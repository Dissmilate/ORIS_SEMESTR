(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2056],{27148:function(e,n,i){"use strict";i.d(n,{_:function(){return S}});var t=i(4472),a=i(34789),d=i(9246),l=i.n(d),o=i(98656),r=i.n(o),m=(i(37667),i(85106)),c=i(44742),s=i.n(c),u=i(47934);const k=["scaleOnHover","behaviorClassName","onClick","className","info","overlay"];function v(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}function p(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?v(Object(i),!0).forEach((function(n){(0,t.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):v(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}const y=r().bind(s());var S=e=>{const{scaleOnHover:n=!1,behaviorClassName:i,onClick:t,className:d,info:o,overlay:r}=e,c=(0,a.Z)(e,k),s=y("root",n&&"root_scaleOnHover",i);return(0,u.jsxs)("div",{role:"presentation",onClick:t,className:l()(s),"data-tid":"CardBehavior",children:[o,(0,u.jsx)("div",{className:y("card-wrapper"),children:(0,u.jsx)(m.Z,p({className:y("card",d)},c))}),r]})}},8711:function(e,n,i){"use strict";let t;i.d(n,{T:function(){return t}}),function(e){e[e.SelectionScreen=0]="SelectionScreen",e[e.TvchannelsScreen=1]="TvchannelsScreen",e[e.FavoriteScreen=2]="FavoriteScreen",e[e.PurchaseScreen=3]="PurchaseScreen",e[e.WatchingHistoryScreen=4]="WatchingHistoryScreen"}(t||(t={}))},36011:function(e,n,i){"use strict";i.d(n,{a:function(){return p}});i(37667);var t=i(7375),a=i.n(t),d=i(27020),l=i(69184),o=i(11172),r=i(98109),m=i(98485),c=i(47178),s=i(34778),u=i(23649);var k=i(47934);const v=a()((()=>Promise.all([i.e(5276),i.e(134)]).then(i.bind(i,20134)).then((e=>e.NotificationsWithAnalytics)).catch((()=>()=>null))),{loading:()=>null,loadableGenerated:{webpack:()=>[20134]}}),p=e=>{let{supportedTemplateIds:n=o.US,supportedTemplateToActions:i=o.n2}=e;const t=(0,r.j)(),{isFullscreen:a}=(0,d.O)(),p=(0,m.V)(n,i),y=(0,u.R)({event:c.WO,uiParams:{communicationFeatureToBuy:"",communicationContentType:s.F4.NPS,errorType:s.NI.NetworkError,errorTitle:"Failed to fetch",errorMessage:"Error loading notifications",requestId:"",communicationId:"",billingProductIds:""}}),{notification:S}=(0,l.l)({variables:p,shouldSkip:t,onError:y});return null===S||void 0===S||!S.payload||!o.$m.includes(null===S||void 0===S?void 0:S.templateId)||t||a?null:(0,k.jsx)(v,{notification:{notificationPayloadId:S.notificationPayloadId,templateId:S.templateId,payload:S.payload},supportedTemplateIds:n,supportedTemplateToActions:i})}},48781:function(e,n,i){"use strict";i.d(n,{P:function(){return o},Y:function(){return l}});var t=i(34778),a=i(38562),d=i(8711);const l={watch_later_any:t.RH.Bookmarks,purchases:t.RH.Purchases,"watching-history":t.RH.History},o={[d.T.FavoriteScreen]:a.Dr.BookmarksScreen,[d.T.PurchaseScreen]:a.Dr.PurchasesScreen,[d.T.WatchingHistoryScreen]:a.Dr.WatchingHistoryScreen}},92063:function(e,n,i){"use strict";i.d(n,{K:function(){return l}});var t=i(48781),a=i(32232),d=i(7477);const l=(e,n)=>{const i=t.Y[n],l=((e,n)=>{const i=(0,d.o)(e);return(0,a.H)(i.findIndex((e=>{let{id:i}=e;return i===n})))})(e,n);return{selectionId:i,selectionPosition:l}}},7477:function(e,n,i){"use strict";i.d(n,{o:function(){return r}});var t=i(96941),a=i(60423),d=i(57768);const l=[{type:a.R.PURCHASES,id:"purchases"},{type:a.R.WATCHING_HISTORY,id:"watching-history"}],o=[{type:a.R.FAVORITE,id:d.u},...l],r=e=>{if(!e.isAuthorized)return[];return(0,t.H)(e)?l:o}},90132:function(e,n,i){"use strict";i.d(n,{T:function(){return a}});var t=i(58290);const a=(e,n)=>{if("number"===typeof e&&"number"===typeof n){return(0,t.l)().formatMessage({id:"features.selection.d0485803900499f87735f000affa8dfa"},{seasonNumber:e,episodeNumber:n})}return""}},73464:function(e,n,i){"use strict";i.d(n,{S:function(){return o}});var t=i(52269),a=i(96823),d=i(51861),l=i(58187);const o=e=>{if(!e)return{type:null};if((0,a.e)(e))return{type:d.a.Watch};const{contentPackageToBuy:n,type:i}=e;return i===t.tj.Paid||i===t.tj.PaidMultiple?(e=>{const{promotionActionType:n}=e;return"DISCOUNT"===n?{type:d.a.TransactionDiscount}:{type:d.a.Transaction}})(e):i===t.tj.Subscription?{type:(0,l.V)(null===n||void 0===n?void 0:n.billingFeatureName)}:{type:null}}},50351:function(e,n,i){"use strict";i.d(n,{g:function(){return d}});var t=i(71042),a=i(58187);function d(e){let{isBySubscription:n,billingFeatureName:i}=e;const d=n?(0,a.V)(i):void 0;return d?t.l[d]:void 0}},21298:function(e,n,i){"use strict";i.d(n,{l:function(){return d}});var t=i(29352),a=i(81660);function d(e){const{buttonText:n}=e,i=(0,a.g)(e),d=(0,t.W)(e);if(i&&d&&n)return n}},97046:function(e,n,i){"use strict";i.d(n,{f:function(){return k}});var t=i(4472),a=i(94145),d=i(37667),l=i(4033),o=i(42601);const r={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"WatchingHistory"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"cursor"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"limit"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"clientInfo"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"time"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentDate"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"userProfile"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"UserId"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"UserProfileInterface"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"watchingHistory"},arguments:[{kind:"Argument",name:{kind:"Name",value:"cursor"},value:{kind:"Variable",name:{kind:"Name",value:"cursor"}}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hasMore"}},{kind:"Field",name:{kind:"Name",value:"nextCursor"}},{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"date"}},{kind:"Field",name:{kind:"Name",value:"entity"},selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Film"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"contentId"}},{kind:"Field",name:{kind:"Name",value:"title"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"Title"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"ott"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"WatchingHistoryOtt"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"gallery"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"WatchingHistoryGallery"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"WatchingHistoryViewOption"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Video"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"contentId"}},{kind:"Field",name:{kind:"Name",value:"title"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"Title"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"ott"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"WatchingHistoryOtt"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"gallery"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"WatchingHistoryGallery"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"WatchingHistoryViewOption"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Episode"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"contentId"}},{kind:"Field",name:{kind:"Name",value:"title"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"Title"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"number"}},{kind:"Field",name:{kind:"Name",value:"season"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"contentId"}},{kind:"Field",name:{kind:"Name",value:"number"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"cover"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"avatarsUrl"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"ott"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"duration"}},{kind:"Field",name:{kind:"Name",value:"skippableFragments"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"SkippableFragment"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"timing"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"current"}},{kind:"Field",name:{kind:"Name",value:"maximum"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"viewOption"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"availabilityEndDate"}},{kind:"Field",name:{kind:"Name",value:"availabilityStatus"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"tvSeries"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"contentId"}},{kind:"Field",name:{kind:"Name",value:"title"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"Title"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"gallery"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"WatchingHistoryGallery"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"WatchingHistoryViewOption"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"SkippableFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"SkippableFragment"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"type"}},{kind:"Field",name:{kind:"Name",value:"startTime"}},{kind:"Field",name:{kind:"Name",value:"endTime"}},{kind:"Field",name:{kind:"Name",value:"final"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"ImageSize"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ImageSize"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"MovieHorizontalLogo"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"MovieLogos"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"horizontal"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"avatarsUrl"}},{kind:"Field",name:{kind:"Name",value:"origSize"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ImageSize"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"MoneyAmount"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"MoneyAmount"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"amount"}},{kind:"Field",name:{kind:"Name",value:"currency"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currencyCode"}},{kind:"Field",name:{kind:"Name",value:"symbol"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"WatchPeriod"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"WatchPeriod"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"timeToExpire"}},{kind:"Field",name:{kind:"Name",value:"watchPeriodStatus"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"WatchingHistoryViewOptionProps"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ViewOption"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"contentPackageToBuy"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"billingFeatureName"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"optionMonetizationModels"}},{kind:"Field",name:{kind:"Name",value:"purchasabilityStatus"}},{kind:"Field",name:{kind:"Name",value:"priceWithTotalDiscount"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"MoneyAmount"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"transactionalMinimumPrice"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"MoneyAmount"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"transactionalPrice"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"MoneyAmount"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"type"}},{kind:"Field",name:{kind:"Name",value:"buttonText"}},{kind:"Field",name:{kind:"Name",value:"originalButtonText"}},{kind:"Field",name:{kind:"Name",value:"promotionActionType"}},{kind:"Field",name:{kind:"Name",value:"watchPeriod"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"WatchPeriod"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"watchabilityStatus"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"UserId"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"UserProfileInterface"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"ottId"}},{kind:"Field",name:{kind:"Name",value:"kpId"}},{kind:"Field",name:{kind:"Name",value:"puid"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"Title"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Title"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"localized"}},{kind:"Field",name:{kind:"Name",value:"original"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"WatchingHistoryOtt"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Ott"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"preview"},selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"OttPreview_AbstractVideo"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"duration"}},{kind:"Field",name:{kind:"Name",value:"timing"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"current"}},{kind:"Field",name:{kind:"Name",value:"maximum"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Ott_AbstractVideo"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"skippableFragments"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"SkippableFragment"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"WatchingHistoryGallery"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"MovieGallery"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"logos"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"MovieHorizontalLogo"}},{kind:"Field",name:{kind:"Name",value:"rightholderForCoverRecommendedTheme"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"covers"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"horizontal"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"avatarsUrl"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"WatchingHistoryViewOption"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Movie"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"viewOption"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"WatchingHistoryViewOptionProps"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}}]};function m(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}function c(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?m(Object(i),!0).forEach((function(n){(0,t.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):m(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}const s=(e,n)=>{var i,t,a,d,l;let{fetchMoreResult:o}=n;if(null===o||void 0===o||null===(i=o.userProfile)||void 0===i||null===(t=i.watchingHistory)||void 0===t||!t.items)return e;const r={__typename:o.__typename,clientInfo:o.clientInfo,userProfile:o.userProfile},m=null!==(a=null===(d=e.userProfile)||void 0===d||null===(l=d.watchingHistory)||void 0===l?void 0:l.items)&&void 0!==a?a:[],c=o.userProfile.watchingHistory.items;return r.userProfile.watchingHistory.items=[...m,...c],r},u=(e,n)=>{var i,t,a,d,l,o,r,m;let{fetchMoreResult:s}=n;const u=null===s||void 0===s||null===(i=s.userProfile)||void 0===i||null===(t=i.watchingHistory)||void 0===t?void 0:t.items[0];if(null===s||void 0===s||null===(a=s.userProfile)||void 0===a||null===(d=a.watchingHistory)||void 0===d||!d.items||!u)return e;const k=c({},s);k.userProfile.watchingHistory=(null===(l=e.userProfile)||void 0===l?void 0:l.watchingHistory)||s.userProfile.watchingHistory;const v=[...null!==(o=null===(r=e.userProfile)||void 0===r||null===(m=r.watchingHistory)||void 0===m?void 0:m.items)&&void 0!==o?o:[]],p=v.findIndex((e=>{var n;let{date:i,entity:t}=e;return i===u.date&&(null===t||void 0===t?void 0:t.contentId)===(null===(n=u.entity)||void 0===n?void 0:n.contentId)}));return-1!==p&&v.splice(p,1),c(c({},k),{},{userProfile:c(c({},k.userProfile),{},{watchingHistory:c(c({},k.userProfile.watchingHistory),{},{items:[u,...v]})})})},k=e=>{var n,i;const t=(0,l.o)(),{data:m,loading:c,fetchMore:k}=(0,a.a)(r,{variables:{limit:48,cursor:null},fetchPolicy:null!==e&&void 0!==e&&e.cacheOnly?"cache-only":"network-only",nextFetchPolicy:"cache-only",notifyOnNetworkStatusChange:!0,skip:!t.isAuthorized}),{hasMore:v=!1,nextCursor:p=null}=null!==(n=null===m||void 0===m||null===(i=m.userProfile)||void 0===i?void 0:i.watchingHistory)&&void 0!==n?n:{},y=(0,d.useCallback)((()=>{null!==e&&void 0!==e&&e.cacheOnly||k({variables:{limit:1,cursor:null},updateQuery:u})}),[e,k]);(0,o.O)({onChange:y});const S=(0,d.useCallback)((()=>{v&&k({variables:{cursor:p},updateQuery:s})}),[v,p,k]);return{data:m,loading:Boolean(!p&&c),loadingMore:Boolean(p&&c),fetchMore:S,updateFirst:y}}},77327:function(e,n,i){"use strict";i.d(n,{q:function(){return fe}});var t=i(37667),a=i(41931),d=i(52347),l=i(2445),o=i(69159),r=i(48582),m=i(13001),c=i(67337),s=i(37734),u=i(67894),k=i(63420),v=i(61831),p=i(58005),y=i(96823),S=i(73464),N=i(36301),F=i(7538),g=i(40202),f=i(52192),_=i(30373),h=i(23767),b=i(90132);var O=i(4472),P=i(34789),I=i(14761),w=i(25529),T=i(41117),j=i(38562),C=i(19149),H=i(42923),x=i(55270),D=i(34778),W=i(15751),M=i(16655),A=i(32232),E=i(15035),B=i(91887),V=i(91597);var R=i(11221),U=i(44330),Z=i(50351),G=i(21298);const z={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"WatchingHistoryViewOption"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Movie"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"viewOption"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"WatchingHistoryViewOptionProps"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"MoneyAmount"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"MoneyAmount"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"amount"}},{kind:"Field",name:{kind:"Name",value:"currency"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currencyCode"}},{kind:"Field",name:{kind:"Name",value:"symbol"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"WatchPeriod"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"WatchPeriod"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"timeToExpire"}},{kind:"Field",name:{kind:"Name",value:"watchPeriodStatus"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"WatchingHistoryViewOptionProps"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ViewOption"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"contentPackageToBuy"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"billingFeatureName"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"optionMonetizationModels"}},{kind:"Field",name:{kind:"Name",value:"purchasabilityStatus"}},{kind:"Field",name:{kind:"Name",value:"priceWithTotalDiscount"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"MoneyAmount"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"transactionalMinimumPrice"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"MoneyAmount"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"transactionalPrice"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"MoneyAmount"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"type"}},{kind:"Field",name:{kind:"Name",value:"buttonText"}},{kind:"Field",name:{kind:"Name",value:"originalButtonText"}},{kind:"Field",name:{kind:"Name",value:"promotionActionType"}},{kind:"Field",name:{kind:"Name",value:"watchPeriod"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"WatchPeriod"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"watchabilityStatus"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}}]},L=e=>{const n=((e,n)=>{var i;return null===(i=e.readFragment({id:(0,B.wY)(n),fragment:z,fragmentName:"WatchingHistoryViewOption"}))||void 0===i?void 0:i.viewOption})(U.T.apollo,e);var i;return n?{priceAndCurrency:(0,G.l)(n),badgeType:(0,Z.g)({billingFeatureName:null===(i=n.contentPackageToBuy)||void 0===i?void 0:i.billingFeatureName,isBySubscription:(0,R.M)(n)})}:{}},Y=e=>{var n;let{uiParams:{contentId:i,itemIndex:t},dependencies:{apolloClient:a}}=e;const d=function(e,n){const i=e.readFragment({id:(0,B.eX)(n),fragment:V.q,fragmentName:"EpisodeSeries"});return null===i||void 0===i?void 0:i.tvSeries}(a,i),l=(0,E.X)(a,i),o=null!==(n=null===d||void 0===d?void 0:d.contentId)&&void 0!==n?n:i,{badgeType:r,priceAndCurrency:m}=L(o);return{uuid:(0,M.U)(o),cardPosition:(0,A.H)(t),title:(0,M.U)((0,f.o)(null===d||void 0===d?void 0:d.title)||l),badgeType:r,priceAndCurrency:m}};var q=i(92063);function $(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}function J(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?$(Object(i),!0).forEach((function(n){(0,O.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):$(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}const K=e=>{const{dependencies:{apolloClient:n}}=e,i=(0,W.c)(n),t=Y(e),a=(0,q.K)(i,"watching-history");return J(J(J({},t),a),{},{entityType:D.$.SelectionMovieIcon,uuidType:D.ic.Ott})},Q=["itemIndex","totalItemIndex"];function X(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}function ee(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?X(Object(i),!0).forEach((function(n){(0,O.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):X(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}function ne(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}function ie(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?ne(Object(i),!0).forEach((function(n){(0,O.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ne(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}var te=i(98656),ae=i.n(te),de=i(49093),le=i(27148),oe=i(70592),re=i(96606),me=i(45208),ce=i(33560),se=i(58213),ue=i(87717),ke=i.n(ue),ve=i(47934);const pe=ae().bind(ke()),ye=e=>{let{className:n,title:i,subtitle:t,backgroundUrl:a,url:d,watchProgressPosition:l,duration:o,isPurchased:r,purchaseType:m,priceString:c,expirationText:s,isWatchable:u,startContent:k,onNavigated:v,setElementRef:p}=e;const y=(0,ve.jsxs)("div",{className:pe("info",n),children:[(0,ve.jsxs)(de.r,{className:pe("link"),role:"button",onClick:e=>{r||!u?e.preventDefault():v()},to:d,"aria-disabled":!u,children:[(0,ve.jsx)(me.w,{className:pe("info-title"),children:i}),t&&(0,ve.jsx)(re.g,{className:pe("info-subtitle"),description:!0,children:t})]}),(null===s||void 0===s?void 0:s.text)&&(0,ve.jsx)(re.g,{className:pe("info-expiration"),warning:s.isHighlighted,showClockIcon:s.showClockIcon,gray:!0,children:s.text})]});return(0,ve.jsx)("div",{className:pe("root"),role:"presentation",onClick:()=>{r&&k()},ref:p,"data-tid":"WatchingHistoryCard",children:(0,ve.jsxs)(le._,{behaviorClassName:pe("behavior"),backgroundUrl:a,info:y,scaleOnHover:u,isBlocked:!u,children:[r&&(0,ve.jsx)(oe.A,{className:pe("play-icon")}),!r&&(0,ve.jsx)(se.u,{className:pe("badge"),labelClassName:pe("label"),type:m,priceString:c}),u&&(0,ve.jsx)("div",{className:pe("progress"),children:(0,ve.jsx)(ce.Ex,{currentTime:l,totalTime:o})})]})})},Se=["contentId","startContent"];function Ne(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}function Fe(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?Ne(Object(i),!0).forEach((function(n){(0,O.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Ne(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}const ge=e=>{var n;let{contentId:i,startContent:t}=e,a=(0,P.Z)(e,Se);const{totalItemIndex:d,itemIndex:l,isPurchased:o}=a,r=(e=>{let{itemIndex:n,totalItemIndex:i}=e,t=(0,P.Z)(e,Q);const a=(0,H.I)(),d=(0,C.$)({event:T.Qs,eventParamsBuilder:Y,uiParams:ee(ee({},t),{},{itemIndex:i})}),l=(0,C.$)({event:j.AD,eventParamsBuilder:K,uiParams:ee(ee({},t),{},{itemIndex:n})});let o=I.Z;a===x.u.HISTORY&&(o=d),a===x.u.PERSONAL&&(o=l);const r=(0,w.useIntersectionObserver)({callback:o,threshold:.8});if(a===x.u.HISTORY||a===x.u.PERSONAL)return r})({contentId:i,itemIndex:l,totalItemIndex:d}),m=null!==(n=(e=>{let{contentId:n,itemIndex:i,isPurchased:t,totalItemIndex:a}=e;const d=(0,H.I)(),l=(0,C.$)({event:T.Mp,eventParamsBuilder:e=>ie(ie({},Y(e)),{},{to:t?T.If.PlayerScreen:T.If.Payment}),uiParams:{contentId:n,itemIndex:a}}),o=(0,C.$)({event:j.N7,eventParamsBuilder:e=>ie(ie({},K(e)),{},{to:t?j.gV.PlayerScreen:j.gV.Payment}),uiParams:{contentId:n,itemIndex:i}});return d===x.u.HISTORY?l:d===x.u.PERSONAL?o:void 0})({contentId:i,itemIndex:l,totalItemIndex:d,isPurchased:o}))&&void 0!==n?n:I.Z;return(0,ve.jsx)(ye,Fe(Fe({},a),{},{startContent:()=>{m(),t()},onNavigated:m,setElementRef:r}))},fe=(0,t.memo)((e=>{let{className:n,watchingHistoryEntity:i,itemIndex:t,totalItemIndex:O,selectionId:P,fromBlockBuilder:I}=e;const{contentId:w,filmId:T,title:j,subtitle:C,backgroundUrl:H,url:x,watchProgressPosition:D,duration:W,isPurchased:M,purchaseType:A,priceString:E,expirationText:B,isWatchable:V,isTvSeries:R}=(e=>{var n,i,t,a,d,l,o,r,m,c,s,u;if("Episode"===(null===e||void 0===e?void 0:e.__typename)){var k,v,O,P,I,w,T,j,C,H,x,D,W,M,A,E,B,V,R,U,Z,G,z;const n=(0,y.e)(null===(k=e.tvSeries)||void 0===k?void 0:k.viewOption),{type:i}=(0,S.S)(null===(v=e.tvSeries)||void 0===v?void 0:v.viewOption),t=(0,h.G)(null===(O=e.tvSeries)||void 0===O?void 0:O.viewOption);return{contentId:null!==(P=e.contentId)&&void 0!==P?P:"",filmId:null!==(I=null===(w=e.tvSeries)||void 0===w?void 0:w.contentId)&&void 0!==I?I:"",title:null!==(T=(0,F.qJ)((0,f.o)(null===(j=e.tvSeries)||void 0===j?void 0:j.title),null!==(C=(0,f.o)(e.title))&&void 0!==C?C:void 0))&&void 0!==T?T:"",subtitle:(0,b.T)(null===(H=e.season)||void 0===H?void 0:H.number,e.number),backgroundUrl:null!==(x=(0,g.W)(e.cover))&&void 0!==x?x:"",url:(0,_.C)(null!==(D=null===(W=e.tvSeries)||void 0===W?void 0:W.contentId)&&void 0!==D?D:""),watchProgressPosition:null!==(M=null===(A=e.ott)||void 0===A||null===(E=A.timing)||void 0===E?void 0:E.current)&&void 0!==M?M:0,duration:null!==(B=null===(V=e.ott)||void 0===V?void 0:V.duration)&&void 0!==B?B:0,isPurchased:n,purchaseType:i,priceString:t,expirationText:(0,N.o)({availabilityEndDate:null===(R=e.ott)||void 0===R||null===(U=R.viewOption)||void 0===U?void 0:U.availabilityEndDate,availabilityStatus:null===(Z=e.ott)||void 0===Z||null===(G=Z.viewOption)||void 0===G?void 0:G.availabilityStatus}),isWatchable:(0,p.B)(null===(z=e.tvSeries)||void 0===z?void 0:z.viewOption),isTvSeries:!0}}const L="OttPreview_AbstractVideo"===(null===e||void 0===e||null===(n=e.ott)||void 0===n||null===(i=n.preview)||void 0===i?void 0:i.__typename)?null===e||void 0===e||null===(t=e.ott)||void 0===t?void 0:t.preview:void 0,Y=(0,y.e)(e.viewOption),{type:q}=(0,S.S)(e.viewOption),$=(0,h.G)(e.viewOption);return{contentId:null!==(a=e.contentId)&&void 0!==a?a:"",filmId:null!==(d=e.contentId)&&void 0!==d?d:"",title:null!==(l=(0,f.o)(e.title))&&void 0!==l?l:"",subtitle:void 0,backgroundUrl:null!==(o=(0,g.W)(e.gallery.covers.horizontal))&&void 0!==o?o:"",url:(0,_.C)(null!==(r=e.contentId)&&void 0!==r?r:""),watchProgressPosition:null!==(m=null===L||void 0===L||null===(c=L.timing)||void 0===c?void 0:c.current)&&void 0!==m?m:0,duration:null!==(s=null===L||void 0===L?void 0:L.duration)&&void 0!==s?s:0,isPurchased:Y,purchaseType:q,priceString:$,expirationText:(0,F.CB)(null===(u=e.viewOption)||void 0===u?void 0:u.watchPeriod),isWatchable:(0,p.B)(e.viewOption),isTvSeries:!1}})(i),U=(0,d.u)(),Z=(0,a.useRouter)();return(0,ve.jsx)(ge,{className:n,contentId:w,title:j,subtitle:C,backgroundUrl:H,url:x,watchProgressPosition:D,duration:W,isPurchased:M,purchaseType:A,priceString:E,expirationText:B,isWatchable:V,itemIndex:t,totalItemIndex:O,selectionId:P,startContent:()=>{R?(0,m.d)(U.current,r.c.FILM_START_DELAY):(0,c.q)(U.current,r.c.FILM_START_DELAY);const e=I({fromBlockAction:o._X.THUMBNAIL,fromBlockItemPosition:`${t+1}`})();(0,v.B)({router:Z,queryParams:{[l.cG.REDIRECT_TO_FILM_PAGE]:T,[l.cG.CONTINUE_WATCHING]:"1"}}),R?((0,u.K)(w,s.Z.EPISODE),(0,k.s)(e)):((0,u.K)(w,s.Z.FILM),(0,k.s)(e))}})}))},68249:function(e,n,i){"use strict";i.d(n,{f:function(){return l}});var t=i(60550),a=i(58290);const d=(e,n)=>{const i=(0,a.l)(),d=e.slice(0,10),l=n.slice(0,10);if(l===d)return i.formatMessage({id:"features.watching-history.96269cac1c3515dd7ea0b617074d804d"});const[o,r,m]=l.split("-"),[c,s,u]=d.split("-");return m&&u&&r&&o?o===c&&r===s&&parseInt(m,10)+1===parseInt(u,10)?i.formatMessage({id:"features.watching-history.61d4027f10fce52b6a13d38754697b27"}):i.formatMessage({id:"features.watching-history.735942fb02013e2757fe651ee9da6205"},{day:parseInt(m,10).toString(),month:(0,t.W)(parseInt(r,10)-1),year:o!==c?o:void 0}):void 0},l=e=>{var n,i;const t=null===e||void 0===e||null===(n=e.userProfile)||void 0===n||null===(i=n.watchingHistory)||void 0===i?void 0:i.items;if(!e||!t||!t.length)return[];const{currentDate:a}=e.clientInfo.time,l=[];return t.forEach((e=>{let{date:n,entity:i}=e;if(null!==i&&void 0!==i&&i.contentId){const e=l[l.length-1];e&&e.id===n?e.entities.push(i):l.push(((e,n,i)=>({id:n,title:d(e,n),entities:[i]}))(a,n,i))}})),l}},44742:function(e){e.exports={root:"CardBehavior_root__ZJMms",root_scaleOnHover:"CardBehavior_root_scaleOnHover__agwkD","card-wrapper":"CardBehavior_card-wrapper__muCSf"}},87717:function(e){e.exports={root:"WatchingHistoryCard_root__iJQlJ","play-icon":"WatchingHistoryCard_play-icon__UCDq8",badge:"WatchingHistoryCard_badge__1kBff",label:"WatchingHistoryCard_label__IF9u4","info-title":"WatchingHistoryCard_info-title__pGj_F","info-subtitle":"WatchingHistoryCard_info-subtitle__3dRwl","info-expiration":"WatchingHistoryCard_info-expiration__FTwwl",progress:"WatchingHistoryCard_progress__gGWmh",link:"WatchingHistoryCard_link__ZX7As"}}}]);
//# sourceMappingURL=https://kinopoisk-frontend-internal.s3.mds.yandex.net/hd-www/release/_next/static/chunks/2056-db0ca51f2d36aef9.js.map