(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6245],{13993:function(e,t,n){"use strict";n.d(t,{j:function(){return Ot}});var r=n(4472),i=n(34789);class a extends Error{constructor(){super("Cancel promise"),this.name="CancelError"}}var o=n(85267);class s{static fromPromise(e,t){return new s(((n,r,i)=>{t&&i(t),n(e)}))}static reject(e){return s.fromPromise(Promise.reject(e),o.ZT)}static resolve(){return s.fromPromise(Promise.resolve(arguments[0]),o.ZT)}static race(e){return new s(((t,n,r)=>{const i=e.map((e=>e.then(t,n).catchWithCancel((e=>{n(e)}))));r((()=>{i.forEach((e=>{e.cancel()}))}))}))}static all(e){return new s((t=>{let n=s.resolve();const r=[];e.forEach((e=>{n=n.then((()=>e.then((e=>{r.push(e)}))))})),t(n.then((()=>r)))}))}constructor(e){this.isCancellablePromise=!0,this.isCanceled=!1,this.cancelCallbacks=[],this.cancel=()=>{this.isCanceled||(this.isCanceled=!0,this.cancelCallbacks.forEach(o.RE),this.cancelCallbacks.length=0)};const t=e=>{this.cancelCallbacks.push(e)};this.promise=new Promise(((n,r)=>{e((e=>{var t;e instanceof Promise?e.then(n).catch(r):(t=e,Boolean(t&&t.isCancellablePromise)?(this.cancelCallbacks.push(e.cancel),e.then(n).catchWithCancel(r)):n(e))}),(e=>{r(e)}),t)}))}then(e,t){return new s(((n,r,i)=>{i(this.cancel);this.promise.then((t=>{try{if(this.isCanceled)throw new a;if(!e)return void n(t);n(e(t))}catch(i){r(i)}}),(e=>{try{if(this.isCanceled)throw new a;if(i=e,Boolean(i&&"CancelError"===i.name))throw e;if(!t)return void r(e);n(t(e))}catch(o){r(o)}var i}))}))}catch(e){return this.then(null,e)}finally(e){return(0,o.mf)(e)?this.then((t=>s.resolve(e()).then((()=>t))),(t=>s.resolve(e()).then((()=>{throw t})))):this.then(e,e)}catchWithCancel(e){return new s(((t,n,r)=>{r(this.cancel);const i=r=>{try{if(!e)return void n(r);t(e(r))}catch(i){n(i)}};this.promise.then((e=>{try{if(this.isCanceled)throw new a;t(e)}catch(n){i(n)}}),i)}))}getIsCanceled(){return this.isCanceled}}class d{constructor(){this.destroyed=!1,this.listeners=[]}listen(e,t){const n=()=>{this.unlisten(e)},r=t&&t.once?t=>{e(t),n()}:e;return this.listeners.push({original:e,wrapped:r}),n}unlisten(e){this.listeners=this.listeners.filter((t=>t.original!==e))}emit(e){this.destroyed||this.listeners.forEach((t=>{t.wrapped(e)}))}wait(){return new Promise((e=>{this.listen(e,{once:!0})}))}destroy(){this.destroyed||(this.destroyed=!0,this.listeners.length=0)}}class c{constructor(){this.destroyed=!1,this.signals={}}listenMap(e,t){const n=(0,o.Zt)(e).filter((t=>Boolean(e[t]))).map((n=>this.listen(n,e[n],t)));return()=>{n.forEach((e=>{e()}))}}listen(e,t,n){return this.getSignal(e).listen(t,n)}unlisten(e,t){this.getSignal(e).unlisten(t)}emit(){if(this.destroyed)return;const e=arguments[0],t=arguments[1];this.getSignal(e).emit(t)}waitFor(e){return this.getSignal(e).wait()}destroy(){this.destroyed||(this.destroyed=!0,(0,o.Zt)(this.signals).forEach((e=>{this.getSignal(e).destroy()})))}getSignal(e){return this.signals[e]=this.signals[e]||new d,this.signals[e]}}class l{constructor(){this.unlisteners=[]}listen(e,t,n,r){const i=e.listen(t,n,r);return this.unlisteners.push(i),i}removeAll(){this.unlisteners.forEach((e=>{e()})),this.unlisteners.length=0}}const u="preroll",p=(e,t)=>({breakType:e,error:{errorTitle:"NO_MORE_SECONDS_LEFT_IN_BREAK",errorType:t,errorMessage:"NO_MORE_SECONDS_LEFT_IN_BREAK"}}),h=e=>t=>`${e} ${t}`,f=e=>t=>`${e}: ${t}`,m=h("Midroll"),v=h("Preroll"),g=f("Watcher"),b=f("Queue"),y=f("PlayStrategy"),k=e=>m(g(e)),P=e=>m(b(e)),T=e=>v(b(e)),S=f("Filmoscope Playback"),w=f("Break Planner Controller"),E=e=>m(y(e)),C="MidrollWatcherPreload",O="MidrollWatcherStart",_="MidrollWatcherEnd",A="MidrollWatcherCueDetectionError",I="MidrollQueueLoaded",x="MidrollQueueGetNextAdStart",D="MidrollQueueGetNextAdFailed",R="MidrollQueueItemsSet",M="MidrollQueueClear",N="MidrollQueueLoadAd",V="MidrollQueueReset",j="PrerollWatcherShowStarted",L="PrerollQueueLoadStart",B="PrerollQueueLoaded",W="FilmoscopePlaybackSessionAlreadyExists",U="FilmoscopePlaybackSourceNotSet",F="FilmoscopePlaybackStarted",q="FilmoscopePlaybackEnded",Z="FilmoscopePlaybackError",Q="FilmoscopePlaybackPreloadStarted",H="FilmoscopePlaybackPreloaded",z="FilmoscopePlaybackPreloadFailed",Y="BreakPlannerControllerDependenciesNotSet",$="BreakPlannerControllerPlanned",G="MidrollPlayStrategyContentfulPreload",X="MidrollPlayStrategyStateChange",K="MidrollPlayStrategyWrongStateChange",J="MidrollPlayStrategyBreakIdChange",ee="PrerollPlayStrategyStateChange",te={[O]:e=>k(`handling midroll start detection of ${e}`),[_]:e=>k(`handling midroll end detection of ${e}`),[C]:()=>k("handling midroll preload detection"),[A]:()=>k("midroll cue detection error"),[I]:()=>P("load successfull"),[x]:e=>P(`get Next Ad: currentAdIndex ${e}`),[D]:()=>P("getNextAd failed, getting another add..."),[R]:e=>P(`queue items set, items count: ${e}`),[M]:()=>P("queue cleared"),[N]:()=>P("load ad"),[V]:()=>P("queue reset"),[j]:()=>v(g("starting showing prerolls...")),[L]:()=>T("loading next preroll..."),[B]:()=>T("preroll loaded successfully"),[W]:()=>S("unable to play ad, playbackSession already exists"),[U]:()=>S("unable to play ad, lastFilmoscopeSource is not set"),[F]:()=>S("playback started"),[q]:()=>S("playback ended"),[Z]:()=>S("playback error"),[Q]:e=>S(`preloading ${e}...`),[H]:e=>S(`${e} preloaded successfully`),[z]:e=>S(`${e} preload failed, no video element for preload`),[Y]:e=>w(`planning ${e} failed: breakDependenciesMap is not set`),[$]:e=>w(`${e} planned`),[G]:e=>E(`preloading ${e}...`),[K]:(e,t)=>E(`inappropriate state change from ${e} to ${t}`),[X]:e=>E(`new state \u2013 ${e}`),[J]:(e,t)=>E(`Update with different break id: initial=${e}, new=${t}`),[ee]:e=>v(y(`new state \u2013 ${e}`))};const ne=e=>{const[{adId:t,bannerId:n,creativeId:r}]=e.getAdMetadata();return{adCreativeId:r,adBannerId:n,adId:t}};function re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ie(e){const t=e?new Map:void 0;return{isDuplicate(e){let n=!1;if(void 0===t)return!1;for(const r of e)for(const[e,i]of Object.entries(r)){if(!i)continue;t.has(e)||t.set(e,new Set);const r=t.get(e);r.has(i)?n=!0:r.add(i)}return n},clear(){void 0!==t&&t.clear()}}}const ae=(e,t,n)=>function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?re(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):re(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({breakPodPosition:t,breakType:n,adSource:e.adSource,configIndex:e.index,adRequestId:e.adRequestId,adVastUrl:e.adVastUrl,adParams:e.adParams,error:{errorTitle:"duplicate",errorType:"processing",errorMessage:"AD_POD_DUPLICATE"}},ne(e)),oe=["adSource","index","adRequestId","adVastUrl","adParams"];function se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function de(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?se(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const ce={state:"notLoaded"};function le(e,t,n){const r=function(){let e=0;return{isAdFits:function(t){const n=e+t;return n<=20&&20-n>5&&(e=n,!0)},resetDuration:function(){e=0},isLeftEnoughBreakTime:function(){return 20-e>5}}}(),a=ie(n),d=new c,h=new o.fA(void 0,(()=>{const e=h.get();e&&d.emit("switchToNextBreakPodStatusChanged",{breakType:u,status:e})})),f=new l;let m,v,g=new o.fA(ce,(()=>{return e=g.get(),d.emit("traceInfo",{message:te[ee](e.state),details:{newState:e},level:"info",breakType:u}),void("finished"!==e.state&&"loaded"!==e.state||h.set("finished"===e.state?"willReturnToPlaybackAsNextPodNotFound":"willSwitchToNextBreakPod"));var e})),b=!1;function y(){const e=function(e){const t=g.get();switch(t.state){case"finished":return s.resolve(void 0);case"loaded":return s.resolve(t.adStore);case"loading":return t.promise;case"notLoaded":return P(e)}}("current").then((e=>(m=void 0,g.set(ce),e?(t.play(e,u),!0):(T(),!1))));return m&&m.cancel(),m=e,e.catchWithCancel((()=>!1))}function k(){g.set({state:"finished"}),r.resetDuration()}function P(n){const o=s.resolve().then((()=>{const o=e.getNext({onLoadError(e){let{adSource:t,index:r,adRequestId:a,adVastUrl:o,adParams:s}=e,c=(0,i.Z)(e,oe);d.emit("breakLoadError",{breakPodPosition:n,breakType:u,error:c,adSource:t,configIndex:r,adRequestId:a,adParams:s,adVastUrl:o})},onNotFound(e){let{adSource:t,index:r,adRequestId:i,adParams:a,adVastUrl:o}=e;d.emit("breakNotFound",{breakPodPosition:n,breakType:u,adSource:t,configIndex:r,adRequestId:i,adParams:a,adVastUrl:o})},onRequest(e){let{adSource:t,index:r,adRequestId:i,adParams:a,adVastUrl:o}=e;d.emit("breakRequest",{breakPodPosition:n,breakType:u,adSource:t,configIndex:r,adRequestId:i,adParams:a,adVastUrl:o})}});return r.isLeftEnoughBreakTime()?o?o.then((e=>{if(!e)return void k();if(a.isDuplicate(e.getAdMetadata()))return d.emit("breakPodDuplicate",ae(e,n,u)),P(n);if(!r.isAdFits(e.getAdDuration()))return d.emit("breakPodContentLoadError",de({breakPodPosition:n,breakType:u,adSource:e.adSource,adRequestId:e.adRequestId,error:{errorTitle:"TOO_LONG_AD",errorType:"start",errorMessage:"TOO_LONG_AD"},configIndex:e.index,adParams:e.adParams,adVastUrl:e.adVastUrl},ne(e))),void k();const{index:i}=e;return d.emit("breakPodLoadSuccess",{breakPodPosition:n,breakType:u,adSource:e.adSource,configIndex:i,adRequestId:e.adRequestId,adVastUrl:e.adVastUrl,adParams:e.adParams}),t.isPreloadSupported?(d.emit("breakPodContentLoading",{breakPodPosition:n,breakType:u,configIndex:i}),t.preload(e,u).then((()=>(g.set({state:"loaded",adStore:e}),d.emit("breakPodContentLoadSuccess",de({breakPodPosition:n,breakType:u,adSource:e.adSource,configIndex:i,adRequestId:e.adRequestId,adVastUrl:e.adVastUrl,adParams:e.adParams},ne(e))),e))).catch((t=>(d.emit("breakPodContentLoadError",de({breakPodPosition:n,breakType:u,adRequestId:e.adRequestId,error:t,configIndex:i,adSource:e.adSource,adParams:e.adParams,adVastUrl:e.adVastUrl},ne(e))),P(n))))):(g.set({state:"loaded",adStore:e}),e)})):void 0:(d.emit("breakPodPreloadCancel",p(u,"start")),void k())}));return"loading"!==g.get().state&&g.set({state:"loading",promise:o}),o.catchWithCancel((()=>{}))}function T(){var e;if(!b&&g.get().state===ce.state)return;b=!1,f.removeAll(),m&&(m.cancel(),m=void 0);const n=g.get();"loading"===n.state&&n.promise.cancel(),g.set(ce),t.finishBreak(),null===(e=v)||void 0===e||e(),v=void 0,a.clear()}return{start:(e,n)=>b?Promise.resolve(!1):(v=n,b=!0,t.startBreak(),f.listen(t,"playbackEnded",y),f.listen(t,"playbackError",y),f.listen(t,"breakPodWatchedMinimalTime",(()=>{P("next")})),y().promise),stop:T,update(){},preload(){const e=g.get();switch(e.state){case"loading":return e.promise.then(Boolean).promise;case"notLoaded":return P("next").then(Boolean).promise;default:return Promise.resolve(!0)}},listen:(e,t)=>d.listen(e,t),listenMap:e=>d.listenMap(e)}}function ue(e){return"NO_AD_SECTION"===e||"NO_AD_TO_DISPLAY"===e}function pe(e){return e.getAdSourceTypes().includes("js")}class he extends Error{constructor(e){let{message:t,code:n,type:r}=e;super(t),this.type=r,this.code=n}}const fe="UNKNOWN_ERROR";function me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?me(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):me(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ge(e){const t=new c;let n,r=[];function i(d){const c=r.shift();if(!c)return s.resolve(void 0);t.emit("traceInfo",{message:te[L](),details:{loader:c},level:"info",breakType:u}),(0,o.RE)(d&&d.onRequest,c);const l=s.fromPromise(c.loadAd()),p=l.then((r=>{if(e&&pe(r))throw new he({code:"UNSUPPORTED_AD_TYPE"});return n=void 0,t.emit("traceInfo",{message:te[B](),details:{loader:c,adStore:r},level:"info",breakType:u}),ve(ve({},r),{},{adSource:c.adSource,index:c.index,adRequestId:c.adRequestId,adVastUrl:c.adVastUrl,adParams:c.adParams})})).catchWithCancel((e=>{if(n=void 0,e instanceof a)return;const t=null===e||void 0===e?void 0:e.code;return t&&ue(t)?(0,o.RE)(d&&d.onNotFound,c):(0,o.RE)(d&&d.onLoadError,{errorTitle:t||fe,errorType:"loading",errorMessage:null===e||void 0===e?void 0:e.message,adSource:c.adSource,index:c.index,adRequestId:c.adRequestId,adVastUrl:c.adVastUrl,adParams:c.adParams}),i(d)}));return p.cancel=l.cancel,n=p,p}return{get adLoaders(){return r},get loadingPromise(){return n},get length(){return r.length},set(e){var t;null===(t=n)||void 0===t||t.cancel(),r=[...e]},reset(){},clear(){var e;null===(e=n)||void 0===e||e.cancel(),r=[]},getNext:e=>n||i(e),listen:(e,n)=>t.listen(e,n),listenMap:e=>t.listenMap(e)}}var be=n(85318);function ye(e){return t=>({id:(0,be.x0)(21),breakType:e,meta:t})}var ke=n(18626);function Pe(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Te(e){if("function"===typeof Object.keys)return Object.keys(e);const t=[];for(const n in e)Pe(e,n)&&t.push(n);return t}const Se={adLabel:0,socialAdLabel:0,businessUnitAdLabel:0,actionButton:0,skip:0,mute:0,play:0,pause:0,timeline:0,abuse:0,abuseInCtaButton:0,loader:0,disclaimers:0,ageLabel:0,title:0,body:0,domain:0,backpackAdSequence:0,controlPanel:0,ctaDomain:0,subtitles:0,subtitlesButton:0};Te(Se);const we=function(e,t){const n={};return((e,t,n)=>{for(let r=0;r<e.length;r++)t.call(n,e[r],r,e)})(Te(e),(r=>{n[r]=t(e[r],r)})),n}(Se,(()=>!1));function Ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ee(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Oe={packshotSettings:{isEnabled:!1},controlsSettings:{controlsVisibility:{adLabel:!0,abuse:!0}}},_e=Ce(Ce({},Oe),{},{controlsSettings:{controlsVisibility:Ce(Ce({},we),{},{adLabel:!0}),visibility:!1}});class Ae{constructor(e,t){(0,r.Z)(this,"destroyed",!1),this.callback=e,this.timeout=t}isInProgress(){return void 0!==this.id}start(){this.isInProgress()||this.destroyed||(this.id=window.setTimeout((()=>{this.stop(),this.callback()}),this.timeout))}stop(){void 0!==this.id&&(window.clearTimeout(this.id),this.id=void 0)}destroy(){this.stop(),this.destroyed=!0}}function Ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ie(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ie(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const De=(e,t,n)=>({error:{errorTitle:e,errorType:n,errorMessage:`Ad Pod Error with adPodId: ${t}`}});function Re(e){let t,{adStore:n,videoElement:r,container:i,breakType:a,playOptions:{withControls:o,desiredBitrate:s,volume:d}={}}=e,l=[];const u=new c,p={breakType:a,adSource:n.adSource,configIndex:n.index,adRequestId:n.adRequestId,adParams:n.adParams,adVastUrl:n.adVastUrl};return{get breakType(){return a},get podDuration(){var e;return null===(e=t)||void 0===e?void 0:e.getAdPodDuration()},getVolume(){var e;return null===(e=t)||void 0===e?void 0:e.getAdVolume()},setVolume(e){var n;null===(n=t)||void 0===n||n.setAdVolume(e)},get isSkipEnabled(){var e;return null===(e=t)||void 0===e?void 0:e.getAdSkippableState()},get isVolumeChangeEnabled(){var e;return null===(e=t)||void 0===e?void 0:e.getAdVolumeAvailabilityState()},get timeToSkip(){var e;return null===(e=t)||void 0===e?void 0:e.getAdPodTimeToSkip()},get adTuneInfo(){var e,n;return null===(e=t)||void 0===e||null===(n=e.getCurrentViewerAssets())||void 0===n?void 0:n.adTune},start(){t=n.createPlaybackController(r,i,xe(xe({},o?Oe:_e),{},{desiredBitrate:s}));const e=((e,t)=>n=>xe(xe(xe({},n),(e=>{var t,n;const{url:r,type:i}=null!==(t=e.getCurrentVideoMediaFile())&&void 0!==t?t:{},a=e.getAdSkippableState(),o=e.getAdPodDuration()-1e3*e.getAdPodRemainingTime();return{adPodPosition:null!==(n=e.getAdPodPosition())&&void 0!==n?n:0,adFrameTimestamp:o,adMediafileUrl:r,adMediafileType:i,adVastIsEmpty:!1,adSkippable:a}})(e)),ne(t)))(t,n),a=function(e){return new Ae((()=>{var n;u.emit("breakPodError",e(xe(xe({},p),De("AD_PLAYBACK_TIMEOUT","AdPlaybackTimeout error","playback")))),null===(n=t)||void 0===n||n.stopAd()}),6e3)}(e);l=l.concat(function(e,t,n){const r=e.getAdPodDuration(),i=e.subscribe("AdRemainingTimeChange",(()=>{r&&r-e.getAdPodRemainingTime()>2&&(u.emit("breakPodWatchedMinimalTime",t(p)),i())})),a=e.subscribe("AdRemainingTimeChange",(()=>{const n=e.getAdPodRemainingTime();r&&r-n>=0&&u.emit("breakPodTimeUpdate",xe(xe({},t(p)),{},{currentTime:r-n}))}));return[e.subscribe("AdPodStarted",(()=>{u.emit("playbackStarted"),u.emit("breakPodStart",t(p))})),e.subscribe("AdPodImpression",(()=>{u.emit("breakPodImpression",t(p)),n.destroy()})),e.subscribe("AdPodVideoFirstQuartile",(()=>{u.emit("breakPodWatchedFirstQuartile",t(p))})),e.subscribe("AdPodVideoMidpoint",(()=>{u.emit("breakPodWatchedMidpoint",t(p))})),e.subscribe("AdPodVideoThirdQuartile",(()=>{u.emit("breakPodWatchedThirdQuartile",t(p))})),e.subscribe("AdPodComplete",(()=>{u.emit("breakPodEnd",t(p))})),e.subscribe("AdPodError",(e=>{let{code:r,adPodId:i}=e;u.emit("playbackError"),u.emit("breakPodError",t(xe(xe({},p),De(r,i,"playback")))),n.destroy()})),e.subscribe("AdClickThru",(()=>{u.emit("breakPodClick",t(p))})),e.subscribe("AdPodSkipped",(()=>{u.emit("breakPodSkip",t(p)),n.destroy()})),e.subscribe("AdStarted",(()=>{u.emit("breakStart",p)})),e.subscribe("AdStopped",(()=>{u.emit("breakEnd",p),n.destroy(),u.emit("playbackEnded")})),e.subscribe("AdPlayingStateChange",(e=>{let{playingState:t}=e;u.emit("playingStateChange",{newState:t})})),e.subscribe("AdStartRejected",(()=>{u.emit("playbackError"),u.emit("breakPodError",t(xe(xe({},p),De("AD_START_REJECTED","AdStartRejected error","playback")))),n.destroy()})),e.subscribe("AdVolumeChange",(()=>{u.emit("volumeChange")})),e.subscribe("AdVolumeAvailabilityStateChange",(()=>{u.emit("volumeAvailabilityStateChange")})),e.subscribe("AdSkippableStateChange",(()=>{u.emit("skippableStateChange")})),e.subscribe("AdMediaStateChange",(()=>{u.emit("mediaStateChange",{newState:e.getAdMediaState()})})),i,a]}(t,e,a)),t.playAd(),void 0!==d&&t.setAdVolume(d),a.start()},pause(){var e;null===(e=t)||void 0===e||e.pauseAd()},skip(){var e;null===(e=t)||void 0===e||e.skipAd()},resume(){var e;null===(e=t)||void 0===e||e.resumeAd()},stop(){l.forEach((e=>{e()})),l.length=0,t&&t.stopAd()},listen:u.listen.bind(u)}}function Me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Me(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Me(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ve(){return!(0,ke.yE)()}function je(e,t,n){return e.split(t).join(n)}const Le="[IFA]",Be="[IFATYPE]",We="[CACHEBUSTING]",Ue="[DOMAIN]",Fe="[PAGEURL]",qe="[APPBUNDLE]",Ze="{{SDK_VERSION}}";const Qe=function(){let e;return{isSdkLoaded:()=>Boolean(window.ya&&window.ya.videoAd),loadSdk:()=>e||(e=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.body,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise(((r,i)=>{const a=document.createElement("script");a.type="text/javascript",a.src=e,a.crossOrigin="anonymous",a.onload=r,a.onerror=i,Object.keys(n).forEach((e=>{a.setAttribute(e,n[e])})),t.appendChild(a)}))}("https://yandex.ru/ads/system/adsdk.js").then((()=>window.ya.videoAd.loadModule("AdLoader").then((e=>{let{AdLoader:t}=e;return t})))).catch((()=>{throw e=void 0,new Error("AD_SDK_SCRIPT_LOAD_ERROR")})),e)}}();Object.freeze(Qe);function He(e,t){const{ifa:n,domain:r,pageUrl:i,appBundle:a,cacheBusting:o,isVpaidDisabled:s}=t;let d=e;return n&&(d=je(d,Le,n),d=je(d,Be,"sessionId")),r&&(d=je(d,Ue,r)),i&&(d=je(d,Fe,i)),a&&(d=je(d,qe,a)),s&&(d=je(d,Ze,"1.0.0")),je(d,We,o)}function ze(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ze(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ze(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const $e={preroll:"preroll",midroll:"inroll"};function Ge(e){const t=(0,be.kP)("0123456789",8)(),n=Ye(Ye({},e.placeholderParams),{},{cacheBusting:t});return{build(t){const r=[];return t.filter((t=>t.config.position===e.adType)).forEach((t=>{let{config:i,additionalParams:a}=t;const o=function(e){var t,n;return e.config.sdk_data?"yandex_sdk"===(null===(t=e.config.sdk_data)||void 0===t?void 0:t.type)?[e.createAdYandexSDKConfig(Number(e.config.sdk_data.vendor_client_id))]:"yandex_sdk_adfox"===(null===(n=e.config.sdk_data)||void 0===n?void 0:n.type)?[e.createAdFoxConfig(e.config.sdk_data.vendor_client_id,e.config.sdk_data.params)]:[]:e.config.urls.map(e.createAdVASTConfig)}({createAdFoxConfig:(t,r)=>function(e,t,n){return{config:{adFoxParameters:{ownerId:e,containerId:t,params:n}},type:"Adfox"}}(t,e.adFoxContainerId,function(e,t){return Object.entries(e).reduce(((e,n)=>{let[r,i]=n;return e[r]=He(i,t),e}),{})}(r,n)),createAdVASTConfig:t=>function(e,t){return{config:{vastUrl:e,adBreakType:t},type:"VAST"}}(He(t,n),$e[e.adType]),createAdYandexSDKConfig:t=>function(e,t,n){return{config:{partnerId:e,category:t,adBreakType:n},type:"YandexSDK"}}(t,0,$e[e.adType]),config:i});o.forEach((t=>{let{config:n,type:i}=t;const o=r.length,d=(0,be.x0)(),c=function(e,t){let n={};if("VAST"===t&&e.vastUrl&&(n.adVastUrl=e.vastUrl),"Adfox"===t&&e.adFoxParameters){const t=e.adFoxParameters.params;t&&(r=t,Object.values(r).every((e=>"string"===typeof e)))&&(n.adParams=t)}var r;return n}(n,i),l=s.fromPromise(Qe.loadSdk()).then((t=>t.create(Ye(Ye(Ye({},a),n),{},{secureMode:e.secureMode})))).then((e=>Ye(Ye({},e),{},{adSource:i,index:o,adRequestId:d},c))).catch((()=>{}));r.push(l)}))})),s.all(r).then((e=>e.filter((e=>Boolean(e)))))}}}function Xe(e){let t={state:"disabled",actions:[]};function n(e){try{e()}catch{}}return{enable(){if("disabled"!==t.state)return;const r=function(e,t){const n={},r=e=>Boolean(n[e]),i=[];for(let a=e.length-1;a>=0;a--){const o=e[a];t(o.name,r)&&(n[o.name]=!0,i.push(o))}return i.reverse()}(t.actions,e);t={state:"enabled"},r.forEach((e=>{n(e.callback)}))},execute(e,r){switch(t.state){case"enabled":n(r);break;case"disabled":t.actions.push({name:e,callback:r})}}}}const Ke={start:e=>!e("start")&&!e("stop"),stop:e=>!e("start")&&!e("stop"),update:()=>!0,preload:()=>!0};function Je(e,t){return Ke[e](t)}function et(){let e=function(e){let t=e;return{getValue:e=>t[e],setValue(e,n){t[e]=n},forEach(e){(0,o.Zt)(t).forEach((n=>{e(n,t[n])}))},destroy(){t={}}}}({}),t=null;return{updateBreakDependencies(t){(0,o.Zt)(t).forEach((n=>{const r=e.getValue(n);r&&this.createNewSession(n,r.plannedConfig,t[n])}))},createNewSession(n,r,i){const{configBuilder:a,queue:s,watcher:d,playStrategy:c,playback:u}=i,p=e.getValue(n);p&&p.destroy(!0);const h=function(e){let t;const n=new l;return{plannedConfig:e.plannedConfig,watcherListeners:n,init:function(){return t=e.configBuilder.build(e.plannedConfig).then((t=>{e.queue.set(t)})),t.catchWithCancel(o.ZT),t},destroy(){let r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];n.removeAll(),t&&t.cancel(),e.watcher.stop(),e.playStrategy.stop(),r?e.playback.resumeContent():e.playback.destroy()}}}({plannedConfig:r,configBuilder:a,queue:s,watcher:d,playStrategy:c,playback:u});e.setValue(n,h);const f=h.init();!function(e){let{breakType:n,watcherListeners:r,watcher:i,playStrategy:a,waitForPromiseBeforeAction:s,playback:d}=e;function c(){t=null,d.resumeContent()}const l=Xe(Je);s.then((()=>{l.enable()})).catchWithCancel(o.ZT),r.removeAll(),r.listen(i,"preload",(e=>{l.execute("preload",(()=>{a.preload(e.meta)}))})),r.listen(i,"start",(e=>{t||(t=n,l.execute("start",(()=>{a.start(e.meta,c)})))})),r.listen(i,"stop",(()=>{t===n&&l.execute("stop",(()=>{a.stop(),d.resumeContent()}))})),r.listen(i,"update",(e=>{l.execute("update",(()=>{a.update(e.meta)}))}))}({breakType:n,watcherListeners:h.watcherListeners,watcher:d,playStrategy:c,waitForPromiseBeforeAction:f,playback:u}),d.start()},destroy(){t=null,e.forEach(((e,t)=>{t.destroy()})),e.destroy()}}}function tt(){const e=et();let t;const n=new c;let r;const i=(e,t)=>r=>{t&&t!==r.breakType||n.emit(e,r)},a=()=>{r&&(r.forEach((e=>e())),r=void 0)};return{setBreakDependencies(n){a(),t=n,e.updateBreakDependencies(n),t&&(r=Object.entries(t).reduce(((e,t)=>{let[n,r]=t;return e.push(r.queue.listenMap({traceInfo:i("traceInfo")}),r.playback.listenMap({breakEnd:i("breakEnd",n),breakStart:i("breakStart",n),breakPodError:i("breakPodError",n),breakPodStart:i("breakPodStart",n),breakPodEnd:i("breakPodEnd",n),breakPodClick:i("breakPodClick",n),breakPodSkip:i("breakPodSkip",n),breakPodImpression:i("breakPodImpression",n),traceInfo:i("traceInfo",n),breakPodWatchedMinimalTime:i("breakPodWatchedMinimalTime",n),breakPodWatchedFirstQuartile:i("breakPodWatchedFirstQuartile",n),breakPodWatchedMidpoint:i("breakPodWatchedMidpoint",n),breakPodWatchedThirdQuartile:i("breakPodWatchedThirdQuartile",n),breakPodTimeUpdate:i("breakPodTimeUpdate",n)}),r.watcher.listenMap({breakWindowStart:i("breakWindowStart"),breakWindowEnd:i("breakWindowEnd"),breakWindowEndChanged:i("breakWindowEndChanged"),newBreakWindowDetected:i("newBreakWindowDetected"),traceInfo:i("traceInfo")}),r.playStrategy.listenMap({breakLoadError:i("breakLoadError"),breakNotFound:i("breakNotFound"),breakPodPreloadCancel:i("breakPodPreloadCancel"),breakPodDuplicate:i("breakPodDuplicate"),breakPodContentLoadError:i("breakPodContentLoadError"),breakPodContentLoading:i("breakPodContentLoading"),breakPodContentLoadSuccess:i("breakPodContentLoadSuccess"),breakPodLoadSuccess:i("breakPodLoadSuccess"),breakRequest:i("breakRequest"),traceInfo:i("traceInfo"),switchToNextBreakPodStatusChanged:i("switchToNextBreakPodStatusChanged")})),e}),[]))},planBreak(r,i){if(!t)throw n.emit("traceInfo",{message:te[Y](r),details:{breakDependenciesMap:t,plannedConfig:i},level:"error",breakType:r}),new Error("breakDependenciesMap is empty. Should call `setBreakDependencies` before playBreak");e.createNewSession(r,i,t[r]),n.emit("traceInfo",{message:te[$](r),details:{breakDependenciesMap:t,plannedConfig:i},level:"info",breakType:r})},destroy(){a(),t=void 0,e.destroy()},listen:(e,t)=>n.listen(e,t),listenMap:e=>n.listenMap(e)}}const nt="midroll";function rt(e){const t=document.createElement("a");t.href=e;let n=t.pathname||"";"/"===n.charAt(0)&&(n=n.slice(1));const r=n.split("/"),[i,a]=r;return"kal"!==i?null:a||null}const it=ye(nt);class at{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e4;(0,r.Z)(this,"isStartEventPlanned",!1),(0,r.Z)(this,"isEndEventPlanned",!1),(0,r.Z)(this,"isPreloadEventPlanned",!1),(0,r.Z)(this,"isStartEmitted",!1),(0,r.Z)(this,"isEndEmitted",!1),(0,r.Z)(this,"isPreloadEmitted",!1),(0,r.Z)(this,"emitStartEvent",(()=>{this.updatePlaybackOnAirOffset(),this.isStartEmitted=!0,(0,o.RE)(this.listeners&&this.listeners.start,this)})),(0,r.Z)(this,"emitPreloadEvent",(()=>{this.isStartEmitted||(this.updatePlaybackOnAirOffset(),this.isPreloadEmitted=!0,(0,o.RE)(this.listeners&&this.listeners.preload,this))})),(0,r.Z)(this,"emitEndEvent",(()=>{this.isEndEmitted=!0,(0,o.RE)(this.listeners&&this.listeners.end,this)})),this.getPlaybackOnAirOffset=t,this.listeners=n,this.preloadTimeout=i,this.id=e.id,this.adCampaignId=e.adCampaignId,this.start=e.start,this.type=e.type,this.playbackOnAirOffset=t(),this.endValue=new o.fA(e.end,(()=>{(0,o.RE)(n&&n.endChanged,this)}))}getEnd(){return this.endValue.get()}setEnd(e){const t=this.getEnd();void 0!==t&&void 0!==e&&t.getTime()===e.getTime()||this.endValue.set(e)}getRemainingDuration(){const e=this.getEnd();if(e)return ot(this.playbackOnAirOffset,e)}getRemainingTimeToStart(){return this.updatePlaybackOnAirOffset(),ot(this.playbackOnAirOffset,this.start)}planPreloadEvent(){if(this.isPreloadEventPlanned||this.isStartEmitted||this.isPreloadEmitted)return;this.updatePlaybackOnAirOffset(),this.isPreloadEventPlanned=!0;const e=new Date;this.emitPreloadDate=new Date(this.start.getTime()+this.playbackOnAirOffset-this.preloadTimeout);const t=this.emitPreloadDate.getTime()-e.getTime();t<=-this.preloadTimeout||(t<=0?this.emitPreloadEvent():this.preloadTimeoutId=this.planEvent(t,this.emitPreloadEvent))}planStartEvent(){if(this.isStartEventPlanned)return;this.updatePlaybackOnAirOffset(),this.isStartEventPlanned=!0;const e=new Date;this.emitStartDate=new Date(this.start.getTime()+this.playbackOnAirOffset);const t=this.emitStartDate.getTime()-e.getTime();this.startTimeoutId=this.planEvent(t,this.emitStartEvent)}planEndEvent(){const e=this.getEnd();if(!e||this.isEndEventPlanned||!this.emitStartDate)return;this.isEndEventPlanned=!0;const t=(new Date).getTime()-this.emitStartDate.getTime(),n=e.getTime()-this.start.getTime()-t;this.planEvent(n,this.emitEndEvent)}destroy(){clearTimeout(this.preloadTimeoutId),clearTimeout(this.startTimeoutId),clearTimeout(this.endTimeoutId),this.isStartEmitted&&!this.isEndEmitted&&this.emitEndEvent()}planEvent(e,t){if(!(e<=0))return window.setTimeout(t,e);t()}updatePlaybackOnAirOffset(){this.playbackOnAirOffset=this.getPlaybackOnAirOffset()}}function ot(e,t){return(t.getTime()+e-(new Date).getTime())/1e3}class st{constructor(e,t,n){(0,r.Z)(this,"map",{}),this.getPlaybackOnAirOffset=e,this.listeners=t,this.preloadTimeout=n}add(e){let{isExpired:t=!1,listeners:n={}}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=!this.map[e.id];if(t&&r)return;const{endChanged:i,start:a,end:s,preload:d}=n,c=r?new at(e,this.getPlaybackOnAirOffset,{preload:d,start:a,endChanged:i,end:e=>{this.remove(e.id),s&&(0,o.RE)(s,e)}},this.preloadTimeout):this.map[e.id];return this.map[e.id]=c,c.setEnd(e.end),c.start=e.start,c.type=e.type,r&&(0,o.RE)(this.listeners&&this.listeners.newCue,c),c}remove(e){const t=this.map[e];delete this.map[e],t&&t.destroy()}destroy(){this.clear()}clear(){(0,o.Zt)(this.map).forEach((e=>{this.map[e].destroy()})),this.map={}}}function dt(e,t){if(!t)return!1;const n=e.getEnd();return n?t>=e.start&&t<n:t>=e.start}function ct(e,t,n){if(!e)return;const r=((e,t)=>(0,o.sE)(e,(e=>e.id===t)))(t,e);return r&&dt(r,n)?r:void 0}class lt{constructor(e,t,n){(0,r.Z)(this,"cues",[]),(0,r.Z)(this,"isInProgress",!1),(0,r.Z)(this,"isLive",!0),this.fetchCuesMeta=e,this.listeners=t,this.cueStorage=new st((()=>this.utcPosition?(new Date).getTime()-this.utcPosition.getTime():0),{newCue:t&&t.newCueDetected},n)}updateNextCue(e){const{cues:t}=this;this.utcPosition=e;const n=ct(this.currentCueId,t,e)||function(e,t){if(t)return(0,o.dF)(e,(e=>dt(e,t)))}(t,e);this.currentCueId!==(null===n||void 0===n?void 0:n.id)&&this.currentCueId&&this.cueStorage.remove(this.currentCueId),n&&(n.planStartEvent(),n.planEndEvent()),this.currentCueId=n&&n.id}destroy(){clearTimeout(this.fetchCuesMetadataTimeoutId),this.cueStorage.destroy()}updateCues(e){!this.isInProgress&&this.isLive&&(this.isInProgress=!0,this.pollingInterval?this.fetchCuesMetadataTimeoutId=window.setTimeout((()=>{this.pullCuesMetadata(e)}),this.pollingInterval):this.pullCuesMetadata(e))}pullCuesMetadata(e){this.fetchCuesMeta().then((t=>{this.isInProgress=!1,this.isLive=t.isLive,this.pollingInterval=t.pollingInterval,this.cues=t.cues.reduce(((e,t)=>{const n={preload:this.listeners&&this.listeners.cuePreload,start:this.listeners&&this.listeners.cueStart,end:this.listeners&&this.listeners.cueEnd,endChanged:this.listeners&&this.listeners.cueEndChanged},r=Boolean(this.utcPosition&&t.end&&t.end<this.utcPosition),i=this.cueStorage.add(t,{listeners:n,isExpired:r});return i&&e.push(i),e}),[]),e()})).catch((()=>{this.isInProgress=!1,this.pollingInterval=5e3}))}}function ut(e,t){const n=new Date(e);return n.setTime(n.getTime()+t),n}function pt(e,t){if("number"!==typeof t)return;const n=new Date(e);return n.setTime(n.getTime()+t),n}class ht{constructor(e,t,n){(0,r.Z)(this,"eventEmitter",new c),(0,r.Z)(this,"updateCues",(()=>{this.cuesController.updateCues(this.updateCues),this.cuesController.updateNextCue(this.utcPosition)})),(0,r.Z)(this,"handleCuePreload",(e=>{this.eventEmitter.emit("preloadDetected",e)})),(0,r.Z)(this,"handleCueStart",(e=>{this.eventEmitter.emit("startDetected",e)})),(0,r.Z)(this,"handleCueEnd",(e=>{this.eventEmitter.emit("endDetected",e)})),(0,r.Z)(this,"handleCueEndChanged",(e=>{this.eventEmitter.emit("endChanged",e)})),(0,r.Z)(this,"handleNewCue",(e=>{this.eventEmitter.emit("newCueDetected",e)})),(0,r.Z)(this,"handleCueFetchError",(e=>{const{name:t,message:n,stack:r}=e||{};throw this.eventEmitter.emit("cueFetchError",{name:t,message:n,stack:r,error:e}),e}));const i=(0,o.gt)(),a=t?()=>function(e,t){return e.request(t,{responseType:"json"}).then((e=>e.data)).then((e=>({isLive:e.is_live,pollingInterval:e.poll_interval_ms,cues:e.cues.map((e=>({id:e.cue_id,adCampaignId:e.ad_imp_id,type:e.ad_type,start:new Date(e.start_ms),end:null!==e.duration_ms?new Date(e.start_ms+e.duration_ms):void 0})))})))}(i,t):()=>function(e,t,n){return Promise.resolve().then((()=>{if(!n)throw new Error("INVALID_PROGRAM_DATE_TIME_ERROR");const r=rt(t);if(!r)throw new Error("UNSUPPORTED_STREAM_TO_DETECT_INROLL_ERROR");const i=`https://strm.yandex.net/kal/${r}/break/last?start_ts=${n.getTime()}`;return e.request(i,{responseType:"json"}).then((e=>e.data)).then((e=>{if(!function(e){return"number"===typeof e.offset&&"string"===typeof e.cue_id}(e))throw new Error("INVALID_FETCH_CUE_RESPONSE_ERROR");return{isLive:!0,pollingInterval:5e3,cues:[{id:e.cue_id,type:"inroll",start:ut(n,e.offset),end:pt(n,e.cutoff)}]}}))}))}(i,e,this.utcPosition);this.cuesController=new lt(this.withCueFetcherCatch(a),{cuePreload:this.handleCuePreload,cueStart:this.handleCueStart,cueEnd:this.handleCueEnd,cueEndChanged:this.handleCueEndChanged,newCueDetected:this.handleNewCue},n)}withCueFetcherCatch(e){return()=>e().catch(this.handleCueFetchError)}updateTime(e){e.utcPosition&&(this.utcPosition=new Date(Math.round(e.utcPosition)),this.updateCues())}listen(e,t){return this.eventEmitter.listen(e,t)}destroy(){this.eventEmitter.destroy(),this.cuesController.destroy(),this.utcPosition=void 0}}function ft(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ft(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ft(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function vt(e){const t=new c;let n=[],r=0,i=0;function a(){Object.values(n).forEach((e=>{var t;return null===(t=e.promise)||void 0===t?void 0:t.cancel()})),n=[],r=0,i=0,t.emit("traceInfo",{message:te[M](),details:{},level:"info",breakType:nt})}return{adMap:n,currentAdIndex:r,get length(){return i},set:function(e){t.emit("traceInfo",{message:te[R](e.length),details:{},level:"info",breakType:nt}),a(),n=e.map((e=>({loader:e,promise:void 0,preloaded:void 0,error:void 0}))),i=e.length},reset:function(){t.emit("traceInfo",{message:te[V](),details:{},level:"info",breakType:nt});const e=Object.values(n);e.forEach(((e,t)=>{var n;null===(n=e.promise)||void 0===n||n.cancel(),e.promise=void 0,e.error=void 0,t<r&&(e.preloaded=void 0)})),r=0,i=Object.values(e).length},clear:a,getNext:function a(d){const c=n[r];if(t.emit("traceInfo",{breakType:nt,message:te[x](r),details:{ad:c,currentAdIndex:r,adStates:n},level:"info"}),c)return r++,i--,function(n,r){if(t.emit("traceInfo",{message:te[N](),details:{ad:n},level:"info",breakType:nt}),n.preloaded)return s.resolve(n);if(n.promise)return n.promise;n.error&&(n.error=void 0),(0,o.RE)(r&&r.onRequest,n.loader);const i=s.fromPromise(n.loader.loadAd()),a=i.then((r=>{if(e&&pe(r))throw new he({code:"UNSUPPORTED_AD_TYPE"});return n.preloaded=mt(mt({},r),{},{adSource:n.loader.adSource,index:n.loader.index,adRequestId:n.loader.adRequestId,adVastUrl:n.loader.adVastUrl,adParams:n.loader.adParams}),n.promise=void 0,t.emit("traceInfo",{breakType:nt,message:te[I](),details:n,level:"info"}),n})).catchWithCancel((e=>{n.promise=void 0;const t=null===e||void 0===e?void 0:e.code;if(t&&ue(t)?(0,o.RE)(r&&r.onNotFound,n.loader):(0,o.RE)(r&&r.onLoadError,{errorTitle:t||fe,errorType:"loading",errorMessage:null===e||void 0===e?void 0:e.message,adSource:n.loader.adSource,index:n.loader.index,adRequestId:n.loader.adRequestId,adVastUrl:n.loader.adVastUrl,adParams:n.loader.adParams}),i.getIsCanceled())return n;throw n.error=e instanceof Error?e:new Error("Unknown error"),e}));return a.cancel=i.cancel,n.promise=a,a}(c,d).then((e=>e.preloaded)).catch((e=>(t.emit("traceInfo",{breakType:nt,message:te[D](),details:{failedAd:c,error:e},level:"error"}),a(d))))},listen:(e,n)=>t.listen(e,n),listenMap:e=>t.listenMap(e)}}const gt=["adRequestId","adParams","adVastUrl"];function bt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bt(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function kt(e,t,n){let r,d=!1;const u=new c,h=new l,f=ie(n);let m,v;const g=(e=>{let t,n,r,i=new o.fA("idle",(()=>e.emit("traceInfo",{message:te[X](i.get()),details:{state:i.get(),currentContent:n,error:r},level:"info",breakType:nt})));function s(){var e;null===(e=t)||void 0===e||e.cancel(),t=void 0,i.set("idle"),n=void 0,r=void 0}function d(t){e.emit("traceInfo",{message:te[K](i.get(),t),details:{state:i,currentContent:n},level:"error",breakType:nt}),s()}return{get state(){return i.get()},get pendingPreload(){return t},get currentContent(){return n},get error(){return r},reset:s,load:function(e){var o;return null===(o=t)||void 0===o||o.cancel(),t=e,"idle"===i.get()&&i.set("loading"),t.then((e=>{if("loading"===i.get()||"ready"===i.get())return e?(i.set("ready"),n=e,t=void 0,e):void 0;d("ready")})).catchWithCancel((e=>{e instanceof a||("loading"===i.get()||"ready"===i.get()?(t=void 0,r=e,i.set("finished")):d("error"))}))},clearCurrent:function(){"ready"===i.get()?n=void 0:d("clearCurrent")},finish:function(){s(),i.set("finished")}}})(u),b=new o.fA(void 0,(()=>{const e=b.get();e&&u.emit("switchToNextBreakPodStatusChanged",{breakType:nt,status:e})}));function y(){var n;"idle"!==g.state&&(g.reset(),e.reset(),h.removeAll(),d=!1,m=void 0,t.finishBreak(),null===(n=v)||void 0===n||n(),v=void 0,f.clear())}function k(n){const r=e.getNext({onLoadError(e){let{adRequestId:t,adParams:r,adVastUrl:a}=e,o=(0,i.Z)(e,gt);u.emit("breakLoadError",{breakPodPosition:n,breakType:nt,error:o,adSource:o.adSource,configIndex:o.index,adRequestId:t,adParams:r,adVastUrl:a})},onNotFound(e){let{adSource:t,index:r,adRequestId:i,adParams:a,adVastUrl:o}=e;u.emit("breakNotFound",{breakPodPosition:n,breakType:nt,adSource:t,configIndex:r,adRequestId:i,adParams:a,adVastUrl:o})},onRequest(e){let{adSource:t,index:r,adRequestId:i,adParams:a,adVastUrl:o}=e;u.emit("breakRequest",{breakType:nt,breakPodPosition:n,adSource:t,configIndex:r,adRequestId:i,adParams:a,adVastUrl:o})}});if(!r)return s.resolve(void 0);return r.then((e=>{if(e)return f.isDuplicate(e.getAdMetadata())?(u.emit("breakPodDuplicate",ae(e,n,nt)),k(n)):(u.emit("breakPodLoadSuccess",{breakType:nt,breakPodPosition:n,adSource:e.adSource,configIndex:e.index,adRequestId:e.adRequestId,adParams:e.adParams,adVastUrl:e.adVastUrl}),t.isPreloadSupported?(u.emit("breakPodContentLoading",{breakPodPosition:n,breakType:nt,configIndex:e.index}),t.preload(e,nt).then((()=>(u.emit("breakPodContentLoadSuccess",yt({breakPodPosition:n,breakType:nt,adSource:e.adSource,configIndex:e.index,adRequestId:e.adRequestId,adParams:e.adParams,adVastUrl:e.adVastUrl},ne(e))),e))).catch((t=>(u.emit("breakPodContentLoadError",yt({breakPodPosition:n,breakType:nt,adSource:e.adSource,adRequestId:e.adRequestId,error:t,configIndex:e.index,adParams:e.adParams,adVastUrl:e.adVastUrl},ne(e))),k(n))))):e)}))}function P(e,t){var n;const i=e.getAdDuration(),a=Date.now()/1e3-t;return null===(n=r)||void 0===n||!n.duration||i<=r.duration-a}function T(e){var t;const n=Date.now()/1e3-e;return null===(t=r)||void 0===t||!t.duration||r.duration-n>5}function S(e){const n=g.currentContent;if("finished"===g.state)return y(),s.resolve(!1);if(!T(e))return u.emit("breakPodPreloadCancel",p(nt,"start")),y(),s.resolve(!1);if(n)return P(n,e)?(t.play(n,nt),m=n,g.clearCurrent(),s.resolve(!0)):(u.emit("breakPodContentLoadError",yt({breakPodPosition:"next",adRequestId:n.adRequestId,breakType:nt,adSource:n.adSource,error:{errorTitle:"TOO_LONG_AD",errorType:"start",errorMessage:"TOO_LONG_AD"},configIndex:n.index,adParams:n.adParams,adVastUrl:n.adVastUrl},ne(n))),y(),s.resolve(!1));let r=g.pendingPreload;return r||(r=g.load(k("current"))),r.then((n=>(g.clearCurrent(),n&&P(n,e)?(t.play(n,nt),m=n,!0):(y(),!1))))}return{get currentLoading(){return g.pendingPreload},preload(){var e,t;if("finished"===g.state||d)return Promise.resolve(!1);if("ready"===g.state&&g.currentContent)return Promise.resolve(!0);let n=g.pendingPreload;return n||(n=g.load(k("next"))),u.emit("traceInfo",{message:te[G](null!==(e=null===(t=r)||void 0===t?void 0:t.cueId)&&void 0!==e?e:"undefined cueId"),details:{},breakType:nt,level:"info"}),n.promise.then(Boolean)},start(n,i){if((r&&r.cueId!==n.cueId&&"idle"!==g.state||"finished"===g.state)&&y(),r=n,d)return Promise.resolve(!1);v=i;const a=Date.now()/1e3;return t.startBreak(),h.listen(t,"playbackEnded",(()=>S(a))),h.listen(t,"playbackError",(()=>{m=void 0,S(a)})),h.listen(t,"breakPodWatchedMinimalTime",(()=>m&&P(m,a)?(m=void 0,e.length?void(!g.pendingPreload&&T(a)&&g.load(k("next").then((e=>(e?P(e,a)?b.set("willSwitchToNextBreakPod"):b.set("willReturnToPlaybackAsWindowDurationLessThanPod"):b.set("willReturnToPlaybackAsNextPodNotFound"),e))))):(b.set("willReturnToPlaybackAsNextPodNotFound"),void g.finish())):(b.set("willReturnToPlaybackAsWindowDurationLessThanPod"),void y()))),d=!0,S(a).promise},stop(){y()},update(e){r&&(r.cueId!==e.cueId&&u.emit("traceInfo",{message:te[J](r.cueId,e.cueId),details:{currentBreakPayload:r,newPayload:e},breakType:nt,level:"warning"}),r.duration=e.duration)},listen:(e,t)=>u.listen(e,t),listenMap:e=>u.listenMap(e)}}const Pt=["level","message"];function Tt(e){let{message:t,payload:n,level:r="info"}=e;const i=`[BreakPlanner]: ${t}`;switch(r){case"info":console.info(i,n);break;case"warning":console.warn(i,n);break;case"error":console.error(i,n)}}const St="lastPrerollTime";const wt={buffering:!1,playbackState:"idle",podCurrentTime:void 0};function Et(e){let{playback:t,breakPlannerController:n}=e;const r=new c,i=function(){let e=new c,t=new o.fA(wt.playbackState,(()=>e.emit("playbackStateChange"))),n=new o.fA(wt.buffering,(()=>e.emit("bufferingChange")));return{get playbackState(){return t.get()},get buffering(){return n.get()},set buffering(e){n.set(e)},onStart(){n.set(!1),t.set("playing")},onEnd(){n.set(!1),t.set("idle")},onPause(){t.set("paused")},reset(){n.set(wt.buffering),t.set(wt.playbackState)},listenMap:t=>e.listenMap(t)}}();let a=wt.podCurrentTime,s=[i.listenMap({playbackStateChange:()=>{r.emit("playbackStateChange")},bufferingChange:()=>{r.emit("bufferingChange")}}),t.listenMap({playbackStarted:()=>{i.onStart()},playbackError:()=>{i.buffering=!0},playbackEnded:()=>{i.buffering=!0},returnToContentPlayback:()=>{d(),i.onEnd()},volumeChange:()=>{r.emit("volumeChange")},volumeAvailabilityStateChange:()=>{r.emit("volumeAvailabilityStateChange")},skippableStateChange:()=>{r.emit("skippableStateChange")},mediaStateChange:e=>{let{newState:t}=e;"stalled"===t.name?i.buffering=!0:i.buffering=!1},playingStateChange:e=>{let{newState:t}=e;"pause"===t?i.onPause():i.onStart()},breakPodTimeUpdate:e=>{let{currentTime:t}=e;a=t,r.emit("currentTimeChange")}}),n.listenMap({breakRequest:()=>{"idle"===i.playbackState&&(i.buffering=!0)}})];const d=function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e||i.reset(),a=wt.podCurrentTime};return{get playbackState(){return i.playbackState},get buffering(){return i.buffering},get breakType(){return t.currentBreakType},get currentTime(){return a},get duration(){return t.currentPodDuration},get metadata(){const e=t.adTuneInfo;if(void 0!==e)return{advertiserInfo:e.advertiserInfo,token:e.token,recommendationsLink:"https://yandex.ru/legal/recommendations/#index__adfox"}},get isSkipEnabled(){return t.isSkipEnabled},get timeToSkip(){return t.timeToSkip},get isVolumeChangeEnabled(){return t.isVolumeChangeEnabled},get isInteractionEnabled(){},play(){t.resume()},pause(){t.pause()},skip(){t.skip()},navigate(){},destroy(){i.onEnd(),d(!1),s.forEach((e=>e())),r.destroy()},listen:(e,t)=>r.listen(e,t),listenMap:e=>r.listenMap(e)}}const Ct={preroll:function(){const e=Date.now(),t=sessionStorage.getItem(St);return(!t||e-parseInt(t)>3e5)&&(sessionStorage.setItem(St,e.toString()),!0)}},Ot=e=>{let{ifa:t,appBundle:n,domain:r,pageUrl:a,isVpaidDisabled:s,filmoscope:d,adFoxContainerId:p,debug:h,container:f,withControls:m,secureMode:v,midrollPreloadTimeout:g,isAdDuplicateFilters:b}=e;const y=tt();let k;const P=function(e){let{breakPlannerController:t,logEvent:n}=e;const r=t.listenMap({breakStart:e=>n("AdStart",e),breakEnd:e=>n("AdEnd",e),breakPodStart:e=>n("AdPodStart",e),breakPodEnd:e=>n("AdPodEnd",e),switchToNextBreakPodStatusChanged:e=>n("SwitchToNextBreakPodStatusChanged",e),breakWindowStart:e=>n("BreakWindowStart",e),breakWindowEnd:e=>n("BreakWindowEnd",e),breakWindowEndChanged:e=>n("BreakWindowEndChanged",e),newBreakWindowDetected:e=>n("newBreakWindowDetected",e),breakPodError:e=>n("BreakPodError",e),breakPodClick:e=>n("BreakPodClick",e),breakPodSkip:e=>n("BreakPodSkip",e),breakPodDuplicate:e=>n("breakPodDuplicate",e),breakPodImpression:e=>n("BreakPodImpression",e),breakPodContentLoadError:e=>n("BreakPodContentLoadError",e),breakPodContentLoading:e=>n("BreakPodContentLoading",e),breakPodContentLoadSuccess:e=>n("BreakPodContentLoadSuccess",e),breakPodLoadSuccess:e=>n("BreakPodLoadSuccess",e),breakRequest:e=>n("BreakRequest",e),breakPodPreloadCancel:e=>n("BreakPodPreloadCancel",e),breakNotFound:e=>n("BreakNotFound",e),breakLoadError:e=>n("BreakLoadError",e),traceInfo:e=>n("BreakTraceInfo",e),breakPodWatchedMinimalTime:e=>n("BreakPodWatchedMinimalTime",e),breakPodWatchedFirstQuartile:e=>n("BreakPodWatchedFirstQuartile",e),breakPodWatchedMidpoint:e=>n("BreakPodWatchedMidpoint",e),breakPodWatchedThirdQuartile:e=>n("BreakPodWatchedThirdQuartile",e)});return{destroy(){r()}}}({breakPlannerController:y,logEvent:d.logEvent.bind(d)});h&&(k=function(e){const t=e.listenMap({breakStart:e=>Tt({message:"breakStart",payload:e}),breakEnd:e=>Tt({message:"breakEnd",payload:e}),switchToNextBreakPodStatusChanged:e=>Tt({message:"switchToNextBreakPodStatusChanged",payload:e}),breakWindowStart:e=>Tt({message:"breakWindowStart",payload:e}),breakWindowEnd:e=>Tt({message:"breakWindowEnd",payload:e}),breakWindowEndChanged:e=>Tt({message:"breakWindowEndChanged",payload:e}),newBreakWindowDetected:e=>Tt({message:"newBreakWindowDetected",payload:e}),breakPodError:e=>Tt({message:"breakPodError",payload:e}),breakPodStart:e=>Tt({message:"breakPodStart",payload:e}),breakPodEnd:e=>Tt({message:"breakPodEnd",payload:e}),breakPodClick:e=>Tt({message:"breakPodClick",payload:e}),breakPodSkip:e=>Tt({message:"breakPodSkip",payload:e}),breakPodDuplicate:e=>Tt({message:"breakPodDuplicate",payload:e}),breakPodImpression:e=>Tt({message:"breakPodImpression",payload:e}),breakPodContentLoadError:e=>Tt({message:"breakPodContentLoadError",payload:e}),breakPodContentLoading:e=>Tt({message:"breakPodContentLoading",payload:e}),breakPodContentLoadSuccess:e=>Tt({message:"breakPodContentLoadSuccess",payload:e}),breakPodLoadSuccess:e=>Tt({message:"breakPodLoadSuccess",payload:e}),breakRequest:e=>Tt({message:"breakRequest",payload:e}),breakNotFound:e=>Tt({message:"breakNotFound",payload:e}),breakPodPreloadCancel:e=>Tt({message:"breakPodPreloadCancel",payload:e}),breakLoadError:e=>Tt({message:"breakLoadError",payload:e}),traceInfo:e=>{let{level:t,message:n}=e;return Tt({message:`TraceInfo: ${n}`,payload:(0,i.Z)(e,Pt),level:t})},breakPodWatchedMinimalTime:e=>Tt({message:"breakPodWatchedMinimalTime",payload:e}),breakPodWatchedFirstQuartile:e=>Tt({message:"breakPodWatchedFirstQuartile",payload:e}),breakPodWatchedMidpoint:e=>Tt({message:"breakPodWatchedMidpoint",payload:e}),breakPodWatchedThirdQuartile:e=>Tt({message:"breakPodWatchedThirdQuartile",payload:e})});return{destroy(){t()}}}(y));const T=function(e){var t;let{filmoscope:n,container:r,withControls:i}=e;const a=new c,o=document.createElement("video");o.style.width="100%",o.style.height="100%";const s=Ve()?document.createElement("video"):void 0;let d,u,p=n.currentSource,h=null===(t=n.currentVideoTrack)||void 0===t?void 0:t.bitrate,f=!0;const m=new l;function v(){d=void 0,p=void 0}function g(){u&&u.stop(),u=void 0,m.removeAll()}return{get currentBreakType(){var e;return null===(e=u)||void 0===e?void 0:e.breakType},get currentPodDuration(){var e;return null===(e=u)||void 0===e?void 0:e.podDuration},get timeToSkip(){var e;return null===(e=u)||void 0===e?void 0:e.timeToSkip},get adTuneInfo(){var e;return null===(e=u)||void 0===e?void 0:e.adTuneInfo},get isPreloadSupported(){return Ve()},get isSkipEnabled(){var e;return null===(e=u)||void 0===e?void 0:e.isSkipEnabled},get isVolumeChangeEnabled(){var e;return null===(e=u)||void 0===e?void 0:e.isVolumeChangeEnabled},finishBreak(){g(),o.remove()},destroy(){a.destroy(),v()},resumeContent(){p&&!f&&(void 0!==d&&a.emit("returnToContentPlayback",{breakType:d}),n.setSource(p),v(),n.play())},resume(){var e;null===(e=u)||void 0===e||e.resume()},pause(){var e;null===(e=u)||void 0===e||e.pause()},skip(){var e;null===(e=u)||void 0===e||e.skip()},listen:(e,t)=>a.listen(e,t),listenMap:e=>a.listenMap(e),play(e,t){var s;if(f&&(p=n.currentSource&&Ne(Ne({},n.currentSource),{},{id:n.currentSource.id||String((new Date).getTime())}),h=null===(s=n.currentVideoTrack)||void 0===s?void 0:s.bitrate,n.stop(),f=!1),u)throw a.emit("traceInfo",{breakType:t,message:te[W](),details:{adStore:e,playbackSession:u},level:"error"}),new Error("Has playback session. Should call stop or wait for playbackEnded");if(!p)throw a.emit("traceInfo",{breakType:t,message:te[U](),details:{adStore:e,lastSource:p},level:"error"}),new Error("Should call startBreak before play");u=Re({adStore:e,videoElement:o,container:r,breakType:t,playOptions:{withControls:i,desiredBitrate:h,volume:n.muted?0:n.volume}}),m.listen(u,"playbackStarted",(()=>{a.emit("playbackStarted"),a.emit("traceInfo",{breakType:t,message:te[F](),details:{adStore:e,playbackSession:u},level:"info"})})),m.listen(u,"playbackError",(()=>{g(),a.emit("playbackError"),a.emit("traceInfo",{breakType:t,message:te[Z](),details:{adStore:e,playbackSession:u},level:"error"})})),m.listen(u,"playbackEnded",(()=>{g(),a.emit("playbackEnded"),a.emit("traceInfo",{breakType:t,message:te[q](),details:{adStore:e,playbackSession:u},level:"info"})})),m.listen(u,"breakStart",(e=>{a.emit("breakStart",e)})),m.listen(u,"breakEnd",(e=>{a.emit("breakEnd",e)})),m.listen(u,"breakPodError",(e=>{a.emit("breakPodError",e)})),m.listen(u,"breakPodStart",(e=>{a.emit("breakPodStart",e)})),m.listen(u,"breakPodEnd",(e=>{a.emit("breakPodEnd",e)})),m.listen(u,"breakPodClick",(e=>{a.emit("breakPodClick",e)})),m.listen(u,"breakPodSkip",(e=>{a.emit("breakPodSkip",e)})),m.listen(u,"breakPodImpression",(e=>{a.emit("breakPodImpression",e)})),m.listen(u,"breakPodWatchedMinimalTime",(e=>{a.emit("breakPodWatchedMinimalTime",e)})),m.listen(u,"breakPodTimeUpdate",(e=>{a.emit("breakPodTimeUpdate",e)})),m.listen(u,"breakPodWatchedFirstQuartile",(e=>{a.emit("breakPodWatchedFirstQuartile",e)})),m.listen(u,"breakPodWatchedMidpoint",(e=>{a.emit("breakPodWatchedMidpoint",e)})),m.listen(u,"breakPodWatchedThirdQuartile",(e=>{a.emit("breakPodWatchedThirdQuartile",e)})),m.listen(u,"volumeAvailabilityStateChange",(()=>{a.emit("volumeAvailabilityStateChange")})),m.listen(u,"skippableStateChange",(()=>{a.emit("skippableStateChange")})),m.listen(u,"mediaStateChange",(e=>{a.emit("mediaStateChange",e)})),m.listen(u,"playingStateChange",(e=>{a.emit("playingStateChange",e)})),u.start(),d=t},preload:(e,t)=>s?(a.emit("traceInfo",{breakType:t,message:te[Q](t),details:{adStore:e},level:"info"}),e.preload({videoSlot:s}).then((()=>{a.emit("traceInfo",{breakType:t,message:te[H](t),details:{adStore:e},level:"info"})}))):(a.emit("traceInfo",{breakType:t,message:te[z](t),details:{adStore:e},level:"error"}),Promise.reject(new Error("preload not supported for platform"))),startBreak(){o.parentElement||r.appendChild(o),f=!0}}}({container:f,filmoscope:d,withControls:m}),S=Et({playback:T,breakPlannerController:y});let w;return{playbackController:S,init:function(){const e=Ge({adType:"preroll",adFoxContainerId:p,secureMode:v,placeholderParams:{ifa:t,appBundle:n,domain:r,pageUrl:a,isVpaidDisabled:s}}),i=function(e){const t=ye(u),n=new c,r=new l;let i=e.currentSource;return{start(){r.listen(e,"sourcechange",(()=>{(!i||e.currentSource&&e.currentSource.id!==i.id)&&(n.emit("start",t(void 0)),n.emit("traceInfo",{message:te[j](),details:{filmoscopeCurrentSource:e.currentSource,lastFilmoscopeSource:i},breakType:"preroll",level:"info"})),i=e.currentSource}))},stop(){r.removeAll(),i=e.currentSource},listen:(e,t)=>n.listen(e,t),listenMap:e=>n.listenMap(e)}}(d),h=ge(s),f={configBuilder:e,playStrategy:le(h,T,b),queue:h,watcher:i,playback:T},m=Ge({adType:"midroll",adFoxContainerId:p,secureMode:v,placeholderParams:{ifa:t,appBundle:n,domain:r,pageUrl:a,isVpaidDisabled:s}}),k=function(e){let{filmoscope:t,createMidrollDetector:n}=e;const r=new c,i=new l,a=new l,s=new l;let d,u;const p=new o.fA(void 0,(()=>{f()})),h=new o.fA(void 0,(()=>{const e=h.get();void 0!==e?(r.emit("start",it({cueId:e.id,duration:e.getRemainingDuration()})),r.emit("breakWindowStart",{breakType:nt,breakWindow:e})):(r.emit("stop",it(void 0)),r.emit("breakWindowEnd",{breakType:nt}))}));function f(){var e;m();const r=p.get(),i=null===(e=t.currentStream)||void 0===e?void 0:e.url;if(i&&(r||d))try{u=n(i,d),a.listen(u,"preloadDetected",k),a.listen(u,"startDetected",v),a.listen(u,"endDetected",b),a.listen(u,"endChanged",P),a.listen(u,"newCueDetected",T),a.listen(u,"cueFetchError",g)}catch(o){}}function m(){u&&(a.removeAll(),u.destroy(),u=void 0)}function v(e){r.emit("traceInfo",{message:te[O](e.id),details:{cueMeta:e},level:"info",breakType:nt}),h.set(e)}function g(e){r.emit("traceInfo",{message:te[A](),details:e,level:"info",breakType:nt})}function b(){var e;r.emit("traceInfo",{message:te[_](null===(e=h.get())||void 0===e?void 0:e.id),details:{},level:"info",breakType:nt}),h.set(void 0)}function y(){u&&u.updateTime(t)}function k(){r.emit("traceInfo",{message:te[C](),details:{},level:"info",breakType:nt}),r.emit("preload",it(void 0))}function P(e){r.emit("breakWindowEndChanged",{breakWindow:e,breakType:nt}),r.emit("update",it({cueId:e.id,duration:e.getRemainingDuration()}))}function T(e){r.emit("newBreakWindowDetected",{breakType:nt,breakWindow:e})}return{setCuesUrl(e){d=e,f()},start(){f(),i.listen(t,"streamchange",(()=>{p.set(t.currentStream&&rt(t.currentStream.url)||void 0)})),i.listen(t,"timeupdate",y)},stop(){i.removeAll(),s.removeAll(),a.removeAll(),m()},listen:(e,t)=>r.listen(e,t),listenMap:e=>r.listenMap(e)}}({filmoscope:d,createMidrollDetector:(e,t)=>new ht(e,t,g)}),P=vt(s),S=kt(P,T,b);w={preroll:f,midroll:{configBuilder:m,playStrategy:S,queue:P,watcher:k,playback:T}},y.setBreakDependencies(w)},planAds:function(e,t){let n={preroll:[],midroll:[]};e.forEach((e=>{const t=e.config.position,r=Ct[t];r&&!r()||n[t].push(e)})),Object.entries(n).forEach((e=>{let[t,n]=e;y.planBreak(t,n)})),w&&w.midroll.watcher.setCuesUrl(t)},destroy(){var e;P.destroy(),null===(e=k)||void 0===e||e.destroy(),y.destroy(),S.destroy()},listen:y.listen,listenMap:y.listenMap}}},18626:function(e,t,n){"use strict";n.d(t,{W7:function(){return i},Ps:function(){return a},U$:function(){return o},yE:function(){return f},yd:function(){return p},VY:function(){return c}});const r=["","-webkit-","-ms-","-moz-","-o-"];n(85267);r.map((e=>`(${e}any-pointer:coarse)`)).join(",");r.map((e=>`(${e}touch-enabled)`)).join(",");function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;return/Mobi|Android/i.test(e.navigator.userAgent)}function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;return e.navigator.userAgent.indexOf("SmartTV+")>-1&&e.navigator.userAgent.indexOf("Maple2012")>-1}function o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;return-1!==e.navigator.userAgent.search("PlayStation 4")}function s(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;const t=e.navigator.userAgent;return-1!==t.search("VIDAA")||-1!==t.search("Hisense")}function d(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;return-1!==e.navigator.userAgent.search("PlayStation")}function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;return-1!==e.navigator.userAgent.indexOf("Web0S")}function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;return-1!==e.navigator.userAgent.search("Mina OS")}function u(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;return-1!==e.navigator.userAgent.search("TVIP-")}function p(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;return Boolean(e.navigator.userAgent.match(/Tizen \d{1,}/))}function h(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;return Boolean(e.cast)}function f(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;return s(e)||c(e)||p(e)||a(e)||d(e)||l(e)||u(e)||h(e)}},73529:function(e,t,n){"use strict";n.d(t,{Rv:function(){return c},pS:function(){return s},uq:function(){return d}});var r=n(4472),i=n(6288);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){const n=(0,i.w6)(2),r=o(o({},t),{},{eventType:"impression",eventSubtype:"pageImpression",page:"MovieRating",entityType:"MovieCard",uuidType:"ott",_meta:n});e.trackEvent("MovieRating.Showed",r)}function d(e,t){const n=(0,i.w6)(1),r=o(o({},t),{},{eventType:"impression",eventSubtype:"pageImpression",page:"MovieRating",entityType:"MovieCard",uuidType:"ott",_meta:n});e.trackEvent("MovieRating.Canceled",r)}function c(e,t){const n=(0,i.w6)(2),r=o(o({},t),{},{eventType:"impression",eventSubtype:"pageImpression",page:"MovieRating",entityType:"MovieCard",uuidType:"ott",_meta:n});e.trackEvent("MovieRating.Rating.Selected",r)}},50827:function(e,t,n){"use strict";n.d(t,{$W:function(){return V},Cp:function(){return x},Fv:function(){return N},GR:function(){return C},Ht:function(){return j},L$:function(){return l},NX:function(){return I},OV:function(){return A},R7:function(){return R},RY:function(){return c},TH:function(){return M},TT:function(){return w},Z7:function(){return E},ZR:function(){return O},aO:function(){return _},ao:function(){return u},bC:function(){return T},i$:function(){return s},nt:function(){return B},qI:function(){return S},qY:function(){return f},sD:function(){return m},y4:function(){return L},zw:function(){return D}});var r=n(4472),i=n(6288);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}let s,d,c,l,u,p,h,f,m,v,g,b,y,k,P;function T(e,t){const n=(0,i.w6)(3,{playerGeneral:{version:1}}),r=o(o({},t),{},{from:"player_screen",_meta:n});e.trackEvent("Player.Navigated",r)}function S(e,t){const{channelId:n=""}=t,r=(0,i.w6)(2,{playerGeneral:{version:1}}),a=o(o({},t),{},{channelId:n,_meta:r});e.trackEvent("Player.Content.Prepared",a)}function w(e,t){const{channelId:n=""}=t,r=(0,i.w6)(2,{playerGeneral:{version:1}}),a=o(o({},t),{},{channelId:n,_meta:r});e.trackEvent("Player.Content.Started",a)}function E(e,t){const{channelId:n=""}=t,r=(0,i.w6)(2,{playerGeneral:{version:1}}),a=o(o({},t),{},{channelId:n,_meta:r});e.trackEvent("Player.Content.Finished",a)}function C(e,t){const n=(0,i.w6)(1,{playerGeneral:{version:1}}),r=o(o({},t),{},{_meta:n});e.trackEvent("Player.DeepDive.Selected",r)}function O(e,t){const n=(0,i.w6)(1,{playerGeneral:{version:1}}),r=o(o({},t),{},{from:"player_screen",_meta:n});e.trackEvent("Player.DeepDive.Navigated",r)}function _(e,t){const n=(0,i.w6)(1),r=o(o({},t),{},{_meta:n});e.trackEvent("Player.MusicDeepDive.Showed",r)}function A(e,t){const n=(0,i.w6)(1),r=o(o({},t),{},{from:"player_screen",to:"music_track_screen",_meta:n});e.trackEvent("Player.MusicDeepDive.Navigated",r)}function I(e,t){const n=(0,i.w6)(2,{playerGeneral:{version:1}}),r=o(o({},t),{},{_meta:n});e.trackEvent("Player.SkipButton.Showed",r)}function x(e,t){const n=(0,i.w6)(2,{playerGeneral:{version:1}}),r=o(o({},t),{},{_meta:n});e.trackEvent("Player.SkipButton.Activated",r)}function D(e,t){const n=(0,i.w6)(2,{impressionPageImpression:{version:3}}),r=o(o({},t),{},{eventType:"impression",eventSubtype:"pageImpression",page:"PlayerScreen",uuidType:"ott",_meta:n});e.trackEvent("Player.WatchNext.Showed",r)}function R(e,t){const n=(0,i.w6)(3,{impressionPageImpression:{version:3},generalAutoNavigated:{version:1}}),r=o(o({},t),{},{eventType:"impression",eventSubtype:"pageImpression",page:"PlayerScreen",uuidType:"ott",_meta:n});e.trackEvent("Player.WatchNext.Navigated",r)}function M(e,t){const n=(0,i.w6)(2,{impressionPageImpression:{version:3}}),r=o(o({},t),{},{eventType:"impression",eventSubtype:"pageImpression",page:"PlayerScreen",uuidType:"ott",actionType:"marked",_meta:n});e.trackEvent("Player.WatchNext.Marked",r)}function N(e,t){const n=(0,i.w6)(1,{impressionPageImpression:{version:3}}),r=o(o({},t),{},{eventType:"impression",eventSubtype:"pageImpression",page:"PlayerScreen",uuidType:"ott",_meta:n});e.trackEvent("Player.MovieImpression.Showed",r)}function V(e,t){const n=(0,i.w6)(1,{impressionPageImpression:{version:3}}),r=o(o({},t),{},{eventType:"impression",eventSubtype:"pageImpression",page:"PlayerScreen",uuidType:"ott",actionType:"marked",_meta:n});e.trackEvent("Player.MovieImpression.Marked",r)}function j(e,t){const n=(0,i.w6)(1),r=o(o({},t),{},{page:"PlayerScreen",_meta:n});e.trackEvent("Player.WatchNextStart.Showed",r)}function L(e,t){const n=(0,i.w6)(1),r=o(o({},t),{},{page:"PlayerScreen",_meta:n});e.trackEvent("Player.WatchNextStart.Navigated",r)}function B(e,t){const n=(0,i.w6)(1),r=o(o({},t),{},{page:"PlayerScreen",_meta:n});e.trackEvent("Player.WatchNextStart.Canceled",r)}!function(e){e.ScreenCasting="screen_casting",e.SerialStructureScreen="serial_structure_screen",e.TvProgramScreen="tv_program_screen"}(s||(s={})),function(e){e.ScreenCasting="screen_casting",e.SerialStructureScreen="serial_structure_screen",e.TvProgramScreen="tv_program_screen",e.CatchupPlayerScreen="catchup_player_screen",e.CatchupProgramScreen="catchup_program_screen"}(d||(d={})),function(e){e.PersonCardScreen="person_card_screen"}(c||(c={})),function(e){e.PlayerScreen="player_screen",e.TrailerPlayerScreen="trailer_player_screen",e.MovieCardScreen="movie_card_screen"}(l||(l={})),function(e){e.PlayerScreen="player_screen",e.TrailerPlayerScreen="trailer_player_screen",e.MovieCardScreen="movie_card_screen"}(u||(u={})),function(e){e.PlayerScreen="player_screen",e.TrailerPlayerScreen="trailer_player_screen",e.MovieCardScreen="movie_card_screen"}(p||(p={})),function(e){e.PlayerScreen="player_screen",e.TrailerPlayerScreen="trailer_player_screen",e.MovieCardScreen="movie_card_screen"}(h||(h={})),function(e){e.PlayerScreen="player_screen",e.TrailerPlayerScreen="trailer_player_screen",e.MovieCardScreen="movie_card_screen"}(f||(f={})),function(e){e.PlayerScreen="player_screen",e.TrailerPlayerScreen="trailer_player_screen",e.MovieCardScreen="movie_card_screen"}(m||(m={})),function(e){e.PlayerScreen="player_screen",e.MovieCardScreen="movie_card_screen",e.SerialStructureScreen="serial_structure_screen"}(v||(v={})),function(e){e.PlayerScreen="player_screen"}(g||(g={})),function(e){e.PlayerScreen="player_screen",e.MovieCardScreen="movie_card_screen",e.SerialStructureScreen="serial_structure_screen"}(b||(b={})),function(e){e.PlayerScreen="player_screen"}(y||(y={})),function(e){e.PlayerScreen="player_screen"}(k||(k={})),function(e){e.PlayerScreen="player_screen"}(P||(P={}))},49554:function(e,t,n){"use strict";n.d(t,{Yy:function(){return s},cX:function(){return c},uL:function(){return d}});var r=n(4472),i=n(6288);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){const n=(0,i.w6)(1),r=o(o({},t),{},{_meta:n});e.trackEvent("TVProgram.Showed",r)}function d(e,t){const n=(0,i.w6)(1),r=o(o({},t),{},{_meta:n});e.trackEvent("TVProgram.Closed",r)}function c(e,t){const n=(0,i.w6)(1),r=o(o({},t),{},{_meta:n});e.trackEvent("TVProgram.ErrorRaised",r)}let l,u,p;!function(e){e.Ott="ott",e.Kinopoisk="kinopoisk",e.Sport="sport",e.SportTeam="sport_team",e.SportLeague="sport_league",e.TvChannel="tv_channel"}(l||(l={})),function(e){e.Ott="ott",e.Kinopoisk="kinopoisk",e.Sport="sport",e.SportTeam="sport_team",e.SportLeague="sport_league",e.TvChannel="tv_channel"}(u||(u={})),function(e){e.TvProgramScreen="tv_program_screen",e.CatchupProgramScreen="catchup_program_screen"}(p||(p={}))},45340:function(e,t,n){"use strict";let r,i,a,o,s,d,c,l,u,p,h,f,m,v;n.d(t,{Nh:function(){return f},Rj:function(){return u},SA:function(){return a},SC:function(){return s},Ug:function(){return h},Uq:function(){return r},_X:function(){return m},cI:function(){return d},cS:function(){return v},ev:function(){return o},lK:function(){return i},my:function(){return p},s7:function(){return c},ug:function(){return l}}),function(e){e.SVOD="SVOD",e.TVOD="TVOD",e.EST="EST",e.AVOD="AVOD",e.FREE="FREE",e.Unknown="unknown"}(r||(r={})),function(e){e.Uuid="uuid",e.Trailerid="trailerid",e.Parentcontrolvideoid="parentcontrolvideoid"}(i||(i={})),function(e){e.Live="live",e.Dvr="dvr",e.Vod="vod"}(a||(a={})),function(e){e.Preroll="preroll",e.Postroll="postroll",e.Midroll="midroll",e.Pauseroll="pauseroll",e.Unknown="unknown"}(o||(o={})),function(e){e.Yandex="Yandex",e.Vast="Vast",e.AdFox="AdFox"}(s||(s={})),function(e){e.Loading="loading",e.Processing="processing",e.Caching="caching",e.Start="start",e.Playback="playback",e.Unknown="unknown"}(d||(d={})),function(e){e.Fairplay="fairplay",e.Widevine="widevine",e.Playready="playready",e.None="none"}(c||(c={})),function(e){e.Googlecast="googlecast",e.Airplay="airplay",e.Miracast="miracast",e.Quasarcast="quasarcast",e.Samsungcast="samsungcast",e.Lgcast="lgcast",e.Hdmi="hdmi",e.None="none"}(l||(l={})),function(e){e.Wifi="wifi",e.Mobile="mobile",e.Ethernet="ethernet",e.Other="other",e.Unknown="unknown",e.None="none"}(u||(u={})),function(e){e.Subscriptions="subscriptions",e.Transactions="transactions",e.Purchases="purchases",e.Mypage="mypage",e.Watchlist="watchlist",e.Channels="channels",e.ChannelsCategoryAll="channels_category_all",e.Film="film",e.Search="search",e.Selections="selections",e.Multiselection="multiselection",e.CatalogFilm="catalog_film",e.CatalogSeries="catalog_series",e.History="history",e.Filmography="filmography",e.Sport="sport",e.SportCompetition="sport_competition",e.SportEvent="sport_event",e.Other="other",e.None="none"}(p||(p={})),function(e){e.ContinueWatching="continue_watching",e.Promo="promo",e.FilmCard="film_card",e.Selection="selection",e.Multiselection="multiselection",e.List="list",e.ListGenre="list_genre",e.ListCountry="list_country",e.ListYear="list_year",e.ListTop="list_top",e.ListAward="list_award",e.ListCollections="list_collections",e.Channels="channels",e.Similar="similar",e.Persons="persons",e.WatchingHistory="watching_history",e.Incut="incut",e.Other="other",e.None="none"}(h||(h={})),function(e){e.Subscriptions="subscriptions",e.Transactions="transactions",e.Purchases="purchases",e.Mypage="mypage",e.Watchlist="watchlist",e.Channels="channels",e.ChannelsCategoryAll="channels_category_all",e.Film="film",e.Search="search",e.Selections="selections",e.Multiselection="multiselection",e.CatalogFilm="catalog_film",e.CatalogSeries="catalog_series",e.History="history",e.Filmography="filmography",e.Sport="sport",e.SportCompetition="sport_competition",e.SportEvent="sport_event",e.SportTeam="sport_team",e.Other="other",e.None="none"}(f||(f={})),function(e){e.Autoplay="autoplay",e.Thumbnail="thumbnail",e.PlayButton="play_button",e.PurchaseButton="purchase_button",e.SeriesList="series_list",e.SeriesListPlayer="series_list_player",e.SeamlessWatch="seamless_watch",e.NextEpisode="next_episode",e.NextEpisodeAutoskip="next_episode_autoskip",e.NextEpisodeAftercredits="next_episode_aftercredits",e.NextEpisodeButton="next_episode_button",e.NextEpisodeSelectskip="next_episode_selectskip",e.WNButton="WN_button",e.WNPoster="WN_poster",e.WNCover="WN_cover",e.WNTrailer="WN_trailer",e.SeriesListSelection="series_list_selection",e.PlayButtonSelection="play_button_selection",e.TrailerClick="trailer_click",e.TrailerButtonSelection="trailer_button_selection",e.TrailerAutostart="trailer_autostart",e.TrailerButton="trailer_button",e.ChannelsMenuItem="channels_menu_item",e.ChannelsCategories="channels_categories",e.ChannelsListHorizontal="channels_list_horizontal",e.ChannelsListVertical="channels_list_vertical",e.ChannelsListWCategories="channels_list_w_categories",e.VoiceAutoplay="voice_autoplay",e.Other="other",e.None="none"}(m||(m={})),function(e){e.Drm="drm",e.DrmProxy="drm_proxy",e.Playback="playback",e.Preparing="preparing",e.Audio="audio",e.Connection="connection",e.Communication="communication",e.WatchRejection="watch_rejection",e.Authorization="authorization",e.Unknown="unknown"}(v||(v={}))},53203:function(e,t,n){"use strict";n.d(t,{E2:function(){return l},Wo:function(){return d},Yi:function(){return s},w6:function(){return o}});var r=n(4472);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{event:{version:e},interfaces:t}}let s,d,c;function l(e,t,n){return{trackEvent:(r,i)=>{const o=a(a(a({},i),t.getGlobalParams()),n.getPlatformParams());e.trackEvent(r,o)}}}!function(e){e.Desktop="desktop",e.Phone="phone",e.Tablet="tablet",e.Tv="tv",e.Box="box",e.Auto="auto",e.Unknown="unknown"}(s||(s={})),function(e){e.Android="android",e.Ios="ios",e.AndroidTv="android-tv",e.HarmonyTv="harmony-tv",e.ZeasnTv="zeasn-tv",e.YandexTv="yandex-tv",e.YandexAuto="yandex-auto",e.Tvos="tvos",e.Tizen="tizen",e.Orsay="orsay",e.Webos="webos",e.Playstation="playstation",e.Xbox="xbox",e.AospTv="aosp-tv",e.Vidaa="vidaa",e.Windows="windows",e.Macos="macos",e.Linux="linux",e.Other="other"}(d||(d={})),function(e){e.OttKp="ott-kp",e.Kp="kp",e.OttMobile="ott-mobile",e.OttSmart="ott-smart",e.YaTvAndroid="ya-tv-android",e.YaModule="ya-module",e.YaStation="ya-station",e.YaVideo="ya-video",e.YaSerp="ya-serp",e.YaAuto="ya-auto",e.YaMusic="ya-music",e.YangoMoviesSmartTv="yango-movies-smart-tv",e.YangoMoviesAndroidTv="yango-movies-android-tv",e.YangoMoviesAndroidMobile="yango-movies-android-mobile",e.YangoMoviesIos="yango-movies-ios",e.YangoMoviesTvos="yango-movies-tvos",e.YangoMoviesWeb="yango-movies-web"}(c||(c={}))},18943:function(e,t,n){"use strict";n.d(t,{CL:function(){return de},wE:function(){return Re},h$:function(){return fe},_1:function(){return pe},dv:function(){return he},J5:function(){return Ue},ql:function(){return re},de:function(){return oe},ZS:function(){return se},WF:function(){return Fe},$U:function(){return qe},U5:function(){return Qe},xT:function(){return He},Jc:function(){return It},AW:function(){return ze},YY:function(){return $e},zV:function(){return Ge},yl:function(){return tt},YO:function(){return Ke},Kg:function(){return nt},MQ:function(){return _e},BC:function(){return rt},ho:function(){return Ct},Z3:function(){return at},RR:function(){return ot},l:function(){return st},ae:function(){return dt},EJ:function(){return Ze},O8:function(){return Ye},Mn:function(){return Je},$F:function(){return et},pN:function(){return Xe},h3:function(){return ct},Cj:function(){return lt},x2:function(){return Rt},$N:function(){return ut},Bk:function(){return _t},wn:function(){return Dt},CP:function(){return xt},FV:function(){return pt},PW:function(){return ht},Yt:function(){return ft},jj:function(){return ae},XO:function(){return J},Jw:function(){return it},tf:function(){return Ot},uX:function(){return mt},gK:function(){return kt},lE:function(){return At},gR:function(){return vt},VL:function(){return gt},DE:function(){return bt},WV:function(){return yt},xX:function(){return Tt},wh:function(){return Pt},X$:function(){return Nt},yK:function(){return St},JS:function(){return wt},ST:function(){return Et}});var r,i=n(34789),a=n(4472),o=n(37667),s=n.n(o),d=n(9246),c=n.n(d),l=n(57867),u=n(78842);!function(e){e.init="init",e.waitForUserPlay="waitForUserPlay",e.waitForDocumentVisibility="waitForDocumentVisibility",e.starting="starting",e.started="started",e.broken="broken",e.destroyed="destroyed"}(r||(r={}));var p,h,f,m=n(85533);!function(e){e.preroll="preroll",e.midroll="midroll",e.postPauseroll="postPauseroll",e.postroll="postroll",e.inroll="inroll"}(p||(p={})),function(e){e.PLAY="play",e.PAUSE="pause",e.BUFFERING="buffering",e.END="end"}(h||(h={})),function(e){e.LIVE="LIVE",e.EVENT="EVENT",e.VOD="VOD"}(f||(f={}));var v=n(43458),g=n(84837);var b=n(85267);function y(e,t){return(0,b.Zt)(e).reduce(((n,r)=>(n[r]={get:k(t,r)},"set"in e[r]&&(n[r].set=e=>{t.get()[r]=e}),n)),{})}function k(e,t){return"function"!==typeof e.get()[t]?()=>e.get()[t]:()=>function(){const n=e.get();return n[t].apply(n,arguments)}}function P(e){return(0,b.Zt)(e).reduce(((t,n)=>{const r=e[n];return Object.defineProperty(t,n,{get:r.get,set:r.set,configurable:!1}),t}),{})}function T(){let e=[];return{add(t,n,r){const i={property:n,callback:r,type:t};return e.push(i),()=>{e=e.filter((e=>e!==i))}},pop(){const t=e;return e=[],t}}}function S(){if(window.Filmoscope)return window.Filmoscope.createPlayer}class w{constructor(e){this.stateMachine=e,this.name="LoadingState"}enter(){this.loadFile()}execAction(){}exit(){}loadFile(){const{loadFile:e}=this.stateMachine.context;this.stateMachine.context.loadAttempt++,e().then((e=>{(0,b.RE)(this.stateMachine.context.onLoaded,e),this.stateMachine.changeState(this.stateMachine.loadedState)}),(e=>{(0,b.RE)(this.stateMachine.context.onError,e),this.stateMachine.changeState(this.stateMachine.waitToRetryState)}))}}class E{constructor(e){this.stateMachine=e,this.name="EmptyState"}enter(){}execAction(e){"load"===e.type&&this.stateMachine.changeState(this.stateMachine.loadingState)}exit(){}}var C=n(18626);const O="undefined"===typeof document||"hidden"in document?"hidden":"webkitHidden",_="hidden"===O?"visibilitychange":"webkitvisibilitychange";class A{constructor(e,t){this.destroyed=!1,this.handleVisibilityChange=()=>{!document[O]&&this.isInProgress()&&this.stop()},this.callback=e,this.timeout=t}isInProgress(){return void 0!==this.id}start(){if(this.isInProgress()||this.destroyed)return;const e="function"===typeof this.timeout?this.timeout():this.timeout;this.id=window.setTimeout((()=>{this.stop(),this.callback()}),e),(0,C.yd)()&&document.addEventListener(_,this.handleVisibilityChange)}stop(){(0,C.yd)()&&document.removeEventListener(_,this.handleVisibilityChange),window.clearTimeout(this.id),this.id=void 0}restart(){this.stop(),this.start()}destroy(){this.stop(),this.destroyed=!0}}class I{constructor(e){this.stateMachine=e,this.name="WaitToRetryState"}enter(){this.timeout=new A((()=>{this.stateMachine.changeState(this.stateMachine.loadingState)}),1e3*Math.pow(2,this.stateMachine.context.loadAttempt)),this.timeout.start()}execAction(e){"load"===e.type&&(this.timeout&&this.timeout.stop(),this.stateMachine.context.loadAttempt=0,this.stateMachine.changeState(this.stateMachine.loadingState))}exit(){}}class x{constructor(){this.name="LoadedState"}enter(){}execAction(){}exit(){}}class D{constructor(e){this.emptyState=new E(this),this.loadingState=new w(this),this.loadedState=new x,this.waitToRetryState=new I(this),this.currentState=this.emptyState,this.context={loadAttempt:0,loadFile:e.loadFile,onLoaded:e.onLoaded,onError:e.onError}}changeState(e){try{this.currentState.exit(),this.currentState=e,this.currentState.enter()}catch(t){(0,b.RE)(this.context.onError,t)}}execAction(e){this.currentState.execAction(e)}}function R(e){return t=>{const n=t.filter(M);return[...t.filter((e=>"property"===e.type)),...e(n)]}}function M(e){return"method"===e.type}function N(e,t){return V[e](t)}const V={destroy:j,enableABR:j,getConfiguration:j,getVideoPlaybackQuality:j,getVsid:j,logEvent:()=>!0,pause:j,play:j,resetTextTrack:j,seek:j,seekRange:j,seekToLive:j,setAudioTrack:j,setSource:j,setTextTrack:j,setVideoTrack:j,stop:j,exitPictureInPicture:e=>!e("exitPictureInPicture"),listen:()=>!0,moveToContainer:()=>!0,requestPictureInPicture:e=>!e("exitPictureInPicture")&&!e("requestPictureInPicture"),setConfiguration:()=>!0,setVideoStyle:()=>!0,updateVsid:e=>!e("updateVsid"),logDebugInfo:()=>!0};function j(e){return!e("stop")&&!e("destroy")}const L="14.62.0";const B="https://yastatic.net/s3/kinopoisk-frontend/filmoscope/";function W(e){return e.split(/[\D]/).slice(0,3).map((e=>Number(e)))}const U={audioTracks:[],bufferedRanges:[],buffering:!1,configuration:{},controls:!1,currentAudioTrack:void 0,currentBandwidth:NaN,currentSource:void 0,currentStream:void 0,currentSubtitles:void 0,currentTextTrack:void 0,currentTime:0,currentVideoTrack:void 0,disablePictureInPicture:!1,duration:NaN,dvrDuration:NaN,ended:!1,engineName:"empty",error:void 0,isABREnabled:!0,isOnAir:!1,isWaitingUserPlay:!1,loop:!1,maxWidth:1/0,maxHeight:1/0,mediaElement:null,muted:!1,paused:!0,pictureInPictureElement:null,pictureInPictureEnabled:!0,pictureInPictureWindow:null,playbackRate:1,playbackState:"idle",programDateTime:void 0,ready:!1,remainingBufferedTime:NaN,seekRange:{start:0,end:0},seeking:!1,textTracks:[],videoPlaybackQuality:{corruptedVideoFrames:NaN,creationTime:0,droppedVideoFrames:NaN,totalVideoFrames:NaN},videoHeight:0,videoTracks:[],videoType:void 0,videoWidth:0,volume:1,vsid:"",watchedTime:0,utcPosition:void 0,objectFit:"contain"};function F(e){let{defaultPlayerVersion:t,loadApi:n,planOperation:r,onListen:i,onUnlisten:a}=e;const o=(s=Object.assign(Object.assign({},U),{version:t,buffering:!0}),(0,b.Zt)(s).reduce(((e,t)=>(e[t]={get:()=>s[t]},e)),{}));var s;const d=function(e,t){return t.reduce(((t,n)=>(t[n]={set:t=>{e("property",n,(e=>{e[n]=t}))}},t)),{})}(r,["controls","disablePictureInPicture","loop","muted","playbackRate","volume","objectFit"]),c=function(e,t){return t.reduce(((t,n)=>(t[n]={get:()=>function(){const t=arguments;e("method",n,(e=>{e[n].apply(e,t)}))}},t)),{})}(r,["destroy","enableABR","logEvent","moveToContainer","pause","play","resetTextTrack","seek","seekToLive","setAudioTrack","setConfiguration","setSource","setTextTrack","setVideoStyle","setVideoTrack","stop","updateVsid","logDebugInfo"]);return function(e,t,n){const r={};return(0,b.wB)(r,e),(0,b.wB)(r,n),(0,b.Zt)(t).forEach((e=>{r[e].set=t[e].set})),r}(o,d,Object.assign(Object.assign({},c),{setSource:{get:()=>e=>(n(),c.setSource.get()(e))},exitPictureInPicture:{get:()=>()=>new Promise((e=>{r("method","exitPictureInPicture",(t=>{e(t.exitPictureInPicture())}))}))},getConfiguration:{get:()=>()=>U.configuration},getVideoPlaybackQuality:{get:()=>()=>U.videoPlaybackQuality},getVsid:{get:()=>()=>U.vsid},listen:{get:()=>(e,t,n)=>{let o=r("method","listen",(r=>{o=r.listen(e,t,n)}));return i(e,t,n),()=>{o(),a(e,t)}}},seekRange:{get:()=>()=>U.seekRange},requestPictureInPicture:{get:()=>()=>new Promise((e=>{r("method","requestPictureInPicture",(t=>{e(t.requestPictureInPicture())}))}))}}))}function q(e){let{loaderParams:t,playerParams:n}=e;const r=function(){const e={};return{add(t,n,r){e[t]=e[t]||[],e[t].push({listener:n,params:r})},remove(t,n){e[t]=e[t]||[],e[t]=e[t].filter((e=>e.listener!==n))},emit(t,n){const r=e[t];r&&r.forEach((e=>{var r;e.listener(n),(null===(r=e.params)||void 0===r?void 0:r.once)&&this.remove(t,e.listener)}))}}}();return function(e){let{createDefaultApiRegistry:t,createApiLoader:n,createApiByRegistry:r,createProxyApiRegistry:i,createPlannedOperationQueue:a,createValue:o,collapsePlannedOperations:s,onApiCreated:d}=e;const c=a(),l=t({loadApi:()=>{p.load()},planOperation:(e,t,n)=>c.add(e,t,n)}),u=o(r(l)),p=n((e=>{const t=e();s(c.pop()).forEach((e=>{let{callback:n}=e;n(t)})),u.set(t),d()}));return p.load(),r(i(l,u))}({onApiCreated:()=>{r.emit("vsidchange"),r.emit("versionchanged"),r.emit("mediaelementchanged")},createDefaultApiRegistry:e=>F({defaultPlayerVersion:t.version||L,loadApi:e.loadApi,planOperation:e.planOperation,onListen(e,t,n){r.add(e,t,n)},onUnlisten(e,t){r.remove(e,t)}}),createApiByRegistry:P,createPlannedOperationQueue:T,createValue:g.y,collapsePlannedOperations:R((i=N,e=>{const t={},n=e=>Boolean(t[e]);return e.slice().reverse().filter((e=>!!i(e.property,n)&&(t[e.property]=!0,!0))).reverse()})),createApiLoader:e=>function(e){let{createFileLoader:t,createValue:n,loadVersion:r,loadPlayerScript:i,onSuccess:a}=e;const o=n(t(r,(e=>{const n=t((()=>i(e)),a);n.load(),o.set(n)})));return{load(){o.get().load()}}}({createFileLoader:(e,n)=>function(e,t){const n=new D({loadFile:e,onError:t&&t.onError,onLoaded:t&&t.onSuccess});return{load(){n.execAction({type:"load"})}}}(e,{onError:t.onError,onSuccess:n}),createValue:g.y,loadVersion:()=>{var e;return(t.version?Promise.resolve(t.version):(e=B,new Promise(((t,n)=>{const r=new XMLHttpRequest;r.open("GET",`${e}evergreen/version.txt?ts=${(new Date).getTime()}`,!0),r.timeout=1e4,r.onload=()=>{t(r.responseText)},r.onerror=r.onabort=()=>{n(new Error("Filmoscope: error loading version"))},r.ontimeout=()=>{n(new Error("Filmoscope: version loading timeout"))},r.send()})))).then((e=>t.checkSafeVersion&&!function(e,t){if(!t)return!1;const[n,r,i]=W(e),[a,o,s]=W(t);return a===n&&!(o<r)&&!(o===r&&s<i)}(L,e)?L:e))},loadPlayerScript:e=>{return function(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>!1)()?Promise.resolve():new Promise(((n,r)=>{!function i(a){const o=document.createElement("script");o.crossOrigin="anonymous",o.src=e,o.onload=()=>{n(),o.onload=null,document.head.removeChild(o)},o.onerror=()=>{if(document.head.removeChild(o),!a)return r(new Error(`Failed to load ${e}`));window.setTimeout((()=>{i(a-1)}),1e3*Math.pow(2,t-a))},document.head.appendChild(o)}(t)}))}(function(e){const{bundleType:t,withoutCache:n}=e;var r;return`${"/"===(r=e.staticPath)[r.length-1]?r:r.concat("/")}bundle/${t}.js${n?`?ts=${(new Date).getTime()}`:""}`}({staticPath:t.staticPath||`${B}${e}`,bundleType:(r="mock"===n.useEngineName,r?"mock":(0,C.VY)()?"webos":(0,C.yd)()?"tizen":(0,C.Ps)()?"orsay":(0,C.U$)()?"playstation4":"html5"),withoutCache:t.withoutCache}),(()=>Boolean(S())));var r},onSuccess:()=>{e((()=>S()(n)))}}),createProxyApiRegistry:y});var i}var Z=n(71754);const Q=["from","from_block","stream_block","puid"],H=["params","streams","id"],z=["drmConfig"],Y=["streams","additionalParams","userPreferences","id"],$=["drmConfig","url"];function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function X(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var{PlayerViewProvider:K,usePlayerViewRef:J}=(()=>{const e=s().createContext(null);return{PlayerViewProvider:e.Provider,usePlayerViewRef:()=>(0,o.useContext)(e)}})(),ee="style_module_root",te="style_module_containVideo",ne="style_module_coverVideo",re=e=>{let{objectFit:t="contain",className:n,onClick:r,children:i}=e;const a=J();return s().createElement("div",{className:c()(ee,n,{[te]:"contain"===t,[ne]:"cover"===t}),ref:a,tabIndex:-1,onClick:r,role:"presentation"},i)},{PlayerProvider:ie,usePlayerInstance:ae}=(()=>{const e=s().createContext(null);return{PlayerProvider:e.Provider,usePlayerInstance:()=>(0,o.useContext)(e)}})(),oe=(e=>(e.play="play",e.pause="pause",e.buffering="buffering",e.end="end",e))(oe||{}),se=(e=>(e.live="live",e.event="event",e.vod="vod",e))(se||{}),de=(e=>(e[e.playing=1]="playing",e[e.notPlaying=2]="notPlaying",e))(de||{}),ce=()=>{},le={loadingPlayerError:"LOADING_PLAYER_ERROR"},ue={loadingPlayerError:"Loading Ya player failed"},pe=100,he=0,fe={buffering:h.BUFFERING,pause:h.PAUSE,play:h.PLAY,end:h.END},me={[h.BUFFERING]:"buffering",[h.END]:"end",[h.PAUSE]:"pause",[h.PLAY]:"play"},ve={[m.M.PLAYING]:1,[m.M.NOT_PLAYING]:2},ge={[p.preroll]:"preroll",[p.midroll]:"midroll",[p.postPauseroll]:"postPauseroll",[p.postroll]:"postroll",[p.inroll]:"inroll"},be=(f.VOD,f.EVENT,f.LIVE,{[f.VOD]:"vod",[f.EVENT]:"event",[f.LIVE]:"live"});function ye(e){return{width:e.videoWidth,height:e.videoHeight}}function ke(e,t,n){return{url:e.url,audio:t.map((e=>{let{name:t,lang:n}=e;return{label:t,language:n}})),subtitles:n.map((e=>{let{name:t,lang:n}=e;return{label:t,language:n,url:""}}))}}function Pe(e){return Math.trunc(e*pe)}function Te(e){const t=e/pe;return(e=>e>=0&&e<=1)(t)?t:void 0}var Se=(e,t)=>{let{additionalParams:n,id:r}=e;return X(X({},n),{},{video_content_id:r,testIds:null===t||void 0===t?void 0:t.join(",")})},we=(e,t)=>X(X({},e),{},{preferredTracks:{preferredAudioLangs:void 0===e.userPreferences.preferredTracks.audioTrackLang?[]:[e.userPreferences.preferredTracks.audioTrackLang],preferredTextLangs:void 0===e.userPreferences.preferredTracks.textTrackLang?[]:[e.userPreferences.preferredTracks.textTrackLang]},startPosition:e.startPosition?(0,l.my)(e.startPosition):void 0,additionalParams:Se(e,t),videoInfo:{videoContentId:e.id}});function Ee(e){switch(e){case"NotAllowed":default:return!0;case"AllowedOnlyWithSound":return{allowMuted:!1}}}function Ce(e,t){if(!t.current)return;const n=X(X({},e),{},{version:e.yaPlayerVersion,element:t.current,volume:e.volume&&Te(e.volume),useFriendlyFrame:!0,autoplay:e.autoplay&&Ee(e.autoplay),source:we(e.source,e.testIds),logUrl:e.playerTelemetryUrl});return e.skin?(n.loadSkin=void 0,n.skinParams=(e=>{let{isPlayButtonHidden:t,isTimelineHidden:n}=e;const r={skinConfig:{features:{CloseButton:{visible:!0}},hiddenControls:[]}};return t&&r.skinConfig.hiddenControls.push(v.t.PLAY),n&&r.skinConfig.hiddenControls.push(v.t.TIMELINE),r})(e.skin)):(n.loadSkin=()=>Promise.resolve(null),n.skinParams={skinConfig:{hiddenControls:["*"]}}),n}var Oe=e=>{let{playerContainerRef:t,config:a,onLoadingError:s}=e;const{0:d,1:c}=(0,o.useState)(null),p=a.yaPlayerVersion,h=(0,o.useCallback)((()=>{var e,n;const o=null===(e=window.Ya)||void 0===e||null===(n=e.playerApi)||void 0===n?void 0:n.init(Ce(a,t));a.debug&&(window.playerInstance=o),c(new class{constructor(e,t){this.instance=e,this.setupData=t,this.type="ya",this.startStage=r.init,this.unsubscribeCallbacks=[],this.unsubscribeCallbacks.push(this.onStartStageChange((e=>{e&&(this.startStage=e)})))}get pureInstance(){return this.instance}get isMuted(){var e;return!(null===(e=this.instance.getState())||void 0===e||!e.muted)}setIsMuted(e){this.instance.setMuted(e)}onMuteChange(e){const t=t=>{let{muted:n}=t;return e(n)};return this.instance.on(u.E.MutedChange,t),()=>this.instance.off(u.E.MutedChange,t)}stretchVideoToContainerSize(){this.instance.setVideoStyle({objectFit:"cover"})}get currentTime(){var e;return null===(e=this.instance.getState())||void 0===e?void 0:e.currentTime}onCurrentTimeChange(e){const t=t=>{let{currentTime:n}=t;return e(n)};return this.instance.on(u.E.CurrentTimeChange,t),()=>this.instance.off(u.E.CurrentTimeChange,t)}get duration(){var e;return null===(e=this.instance.getState())||void 0===e?void 0:e.duration}onDurationChange(e){const t=t=>{let{duration:n}=t;return e(n)};return this.instance.on(u.E.DurationChange,t),()=>this.instance.off(u.E.DurationChange,t)}get hasError(){var e;return!(null===(e=this.instance.getState())||void 0===e||!e.error)}onError(e){const t=t=>{let{error:n}=t;return n&&e(n)};return this.instance.on(u.E.ErrorChange,t),()=>{this.instance.off(u.E.ErrorChange,t)}}get playingState(){var e;const t=null===(e=this.instance.getState())||void 0===e?void 0:e.playingState;return t&&me[t]}onPlayingStateChange(e){const t=t=>{let{playingState:n}=t;return n&&e(me[n])};return this.instance.on(u.E.PlayingStateChange,t),()=>this.instance.off(u.E.PlayingStateChange,t)}onFinish(e){return this.onPlayingStateChange((t=>"end"===t&&e()))}play(){this.instance.play()}pause(){this.instance.pause()}onContentImpression(e){return this.instance.on(u.E.ContentImpression,e),()=>this.instance.off(u.E.ContentImpression,e)}get isStarted(){var e;return(null===(e=this.instance.getState())||void 0===e?void 0:e.startStage)===r.started}get isWaitingUserPlay(){return this.startStage===r.waitForUserPlay}onIsStartedChange(e){return this.onStartStageChange((t=>e(t===r.started)))}onWaitingUserPlayChange(e){return this.onStartStageChange((t=>{e(t===r.waitForUserPlay)}))}onStartStageChange(e){const t=t=>{let{startStage:n}=t;e(n)};return this.instance.on(u.E.StartStageChange,t),()=>this.instance.off(u.E.StartStageChange,t)}onReady(e){const t=()=>e();return this.instance.on(u.E.Ready,t),()=>this.instance.off(u.E.Ready,t)}seek(e){this.instance.seek((0,l.my)(e))}get videoSize(){var e;const t=null===(e=this.instance.getState())||void 0===e?void 0:e.videoSize;return t&&ye(t)}onVideoSizeChange(e){const t=t=>{let{videoSize:n}=t;return e(n&&ye(n))};return this.instance.on(u.E.VideoSizeChange,t),()=>this.instance.off(u.E.VideoSizeChange,t)}get volume(){var e;const t=null===(e=this.instance.getState())||void 0===e?void 0:e.volume;return t&&Pe(t)}setVolume(e){const t=Te(e);t&&this.instance.setVolume(t)}onVolumeChange(e){const t=t=>{let{volume:n}=t;return e(Pe(n))};return this.instance.on(u.E.VolumeChange,t),()=>this.instance.off(u.E.VolumeChange,t)}get source(){return(e=>{var t,n;if(void 0===e)return;const{source:r}=e;if(void 0===r)return;const a=e.textTracks,{params:{startPosition:o,withCredentials:s,additionalParams:{from:d,from_block:c,stream_block:l,puid:u},preferredTracks:p},streams:h,id:f}=r,m=(0,i.Z)(r.params.additionalParams,Q);return X(X({},(0,i.Z)(r,H)),{},{id:null!==f&&void 0!==f?f:"Unknown",startPosition:o.videoTime,withCredentials:s,additionalParams:X({from:null!==d&&void 0!==d?d:"",from_block:null!==c&&void 0!==c?c:"",stream_block:null!==l&&void 0!==l?l:"",puid:u||""},m),subtitles:a.map((e=>{let{name:t,lang:n}=e;return{label:t,language:n,url:""}})),userPreferences:{preferredTracks:{textTrackLang:null===(t=p.preferredTextLangs)||void 0===t?void 0:t[0],audioTrackLang:null===(n=p.preferredAudioLangs)||void 0===n?void 0:n[0],videoTrackLabel:void 0}},streams:h.map((e=>{var t;let{drmConfig:n}=e,r=(0,i.Z)(e,z);return X({drmConfig:X(X({},n),{},{servers:null!==(t=null===n||void 0===n?void 0:n.servers)&&void 0!==t?t:{}})},r)}))})})(this.instance.getState())}setSource(e){this.instance.setSource(we(e,this.setupData.testIds)).catch((e=>{var t;if((null===(t=this.instance.getState())||void 0===t?void 0:t.startStage)!==r.destroyed)throw e}))}onSourceChange(e){const t=()=>e(this.source);return this.instance.on(u.E.SourceChange,t),()=>this.instance.off(u.E.SourceChange,t)}get currentStream(){const{stream:e,audioTracks:t,textTracks:n}=this.instance.getState()||{};return e&&ke(e,null!==t&&void 0!==t?t:[],null!==n&&void 0!==n?n:[])}onCurrentStreamChange(e){const t=t=>{let{stream:n}=t;const{audioTracks:r,textTracks:i}=this.instance.getState()||{};e(n&&ke(n,null!==r&&void 0!==r?r:[],null!==i&&void 0!==i?i:[]))};return this.instance.on(u.E.StreamChange,t),()=>this.instance.off(u.E.StreamChange,t)}get watchedTime(){var e;return null===(e=this.instance.getState())||void 0===e?void 0:e.watchedTime}onWatchedTimeChange(e){const t=t=>{let{watchedTime:n}=t;return e(n)};return this.instance.on(u.E.WatchedTimeChange,t),()=>this.instance.off(u.E.WatchedTimeChange,t)}get audioTrack(){var e;return null===(e=this.instance.getState())||void 0===e?void 0:e.audioTrack}get audioTracks(){var e;return null===(e=this.instance.getState())||void 0===e?void 0:e.audioTracks}setAudioTrack(e){this.instance.setAudioTrack(e.value)}onCurrentAudioTrackChange(e){const t=t=>{let{audioTrack:n}=t;return e(n)};return this.instance.on(u.E.AudioTrackChange,t),()=>this.instance.off(u.E.AudioTrackChange,t)}onAudioTracksChange(e){const t=t=>{let{audioTracks:n}=t;return e(n)};return this.instance.on(u.E.AudioTracksChange,t),()=>this.instance.off(u.E.AudioTracksChange,t)}get textTrack(){var e;return null===(e=this.instance.getState())||void 0===e?void 0:e.textTrack}get textTracks(){var e;return null===(e=this.instance.getState())||void 0===e?void 0:e.textTracks}setTextTrack(e){this.instance.setTextTrack(null===e||void 0===e?void 0:e.value)}onCurrentTextTrackChange(e){const t=t=>{let{textTrack:n}=t;return e(n)};return this.instance.on(u.E.TextTrackChange,t),()=>this.instance.off(u.E.TextTrackChange,t)}onTextTracksChange(e){const t=t=>{let{textTracks:n}=t;return e(n)};return this.instance.on(u.E.TextTracksChange,t),()=>this.instance.off(u.E.TextTracksChange,t)}get vsid(){var e;return null===(e=this.instance.getState())||void 0===e?void 0:e.vsid}get videoTrack(){var e;return null===(e=this.instance.getState())||void 0===e?void 0:e.videoTrack}get videoTracks(){var e;return null===(e=this.instance.getState())||void 0===e?void 0:e.videoTracks}onCurrentVideoTrackChange(e){const t=t=>{let{videoTrack:n}=t;return e(n)};return this.instance.on(u.E.VideoTrackChange,t),()=>this.instance.off(u.E.VideoTrackChange,t)}onVideoTracksChange(e){const t=t=>{let{videoTracks:n}=t;return e(n)};return this.instance.on(u.E.VideoTracksChange,t),()=>this.instance.off(u.E.VideoTracksChange,t)}setVideoTrack(e){this.instance.setVideoTrack((null===e||void 0===e?void 0:e.value)||"auto")}get playbackRate(){var e;return null===(e=this.instance.getState())||void 0===e?void 0:e.playbackRate}get playbackRateRange(){var e;return null===(e=this.instance.getState())||void 0===e?void 0:e.playbackRateRange}onPlaybackRateChange(e){const t=t=>{let{playbackRate:n}=t;return e(n)};return this.instance.on(u.E.PlaybackRateChange,t),()=>this.instance.off(u.E.PlaybackRateChange,t)}onPlaybackRateRangeChange(e){const t=t=>{let{playbackRateRange:n}=t;return e(n)};return this.instance.on(u.E.PlaybackRateRangeChange,t),()=>this.instance.off(u.E.PlaybackRateRangeChange,t)}setPlaybackRate(e){this.instance.setPlaybackRate(e)}requestExternalPlay(e){let{externalPlayerId:t,startPosition:n,config:r}=e;return this.instance.requestExternalPlay({externalPlayerId:t,startPosition:(0,l.my)(n),config:r})}requestExternalPlayerList(e){return this.instance.requestExternalPlayerList({currentPlayerListLength:e})}get bufferedRanges(){var e;return null===(e=this.instance.getState())||void 0===e?void 0:e.bufferedRanges}onBufferedRangesChange(e){const t=t=>{let{bufferedRanges:n}=t;return e(n)};return this.instance.on(u.E.BufferedRangesChange,t),()=>this.instance.off(u.E.BufferedRangesChange,t)}get videoType(){var e;const t=null===(e=this.instance.getState())||void 0===e?void 0:e.videoType;return t&&be[t]}get isFullscreen(){var e;return!(null===(e=this.instance.getState())||void 0===e||!e.isFullscreen)}get drmSystem(){var e;return null===(e=this.instance.getState())||void 0===e?void 0:e.drmSystem}get isDrmSupported(){var e,t;return!(null===(e=this.instance.getState())||void 0===e||null===(t=e.stream)||void 0===t||!t.drmConfig)}get utcStartTime(){var e;return null===(e=this.instance.getState())||void 0===e?void 0:e.utcStartTime}onUtcStartTimeChange(e){const t=t=>{let{utcStartTime:n}=t;return e(n)};return this.instance.on(u.E.UtcStartTimeChange,t),()=>this.instance.off(u.E.UtcStartTimeChange,t)}get adState(){var e;const t=null===(e=this.instance.getState())||void 0===e?void 0:e.adState;return t&&function(e){let{state:t,type:n}=e;return{state:ve[t],type:n&&ge[n]}}(t)}onAdStateChanged(e){const t=t=>{let{adState:n}=t;return n&&e(ve[n.state])};return this.instance.on(u.E.AdStateChange,t),()=>this.instance.off(u.E.AdStateChange,t)}onAdPodStart(e){return this.instance.on(u.E.AdPodStart,e),()=>this.instance.off(u.E.AdPodStart,e)}onAdPodEnd(e){return this.instance.on(u.E.AdPodEnd,e),()=>this.instance.off(u.E.AdPodEnd,e)}onAdPodSkip(e){return this.instance.on(u.E.AdPodSkip,e),()=>this.instance.off(u.E.AdPodSkip,e)}onAdLoaded(e){const t=t=>{let{adType:n}=t;return e(n&&ge[n])};return this.instance.on(u.E.AdLoaded,t),()=>this.instance.off(u.E.AdLoaded,t)}onAdError(e){return this.instance.on(u.E.AdError,e),()=>this.instance.off(u.E.AdError,e)}onAdPodClick(e){return this.instance.on(u.E.AdPodClick,e),()=>this.instance.off(u.E.AdPodClick,e)}get currentSubtitles(){var e;return null===(e=this.instance.getState())||void 0===e?void 0:e.subtitles}onCurrentSubtitlesChange(e){const t=t=>{let{subtitles:n}=t;return e(n)};return this.instance.on(u.E.SubtitlesChange,t),()=>this.instance.off(u.E.SubtitlesChange,t)}setNativeSubtitlesVisibility(e){this.instance.setNativeTextTrackVisibility(e)}get dvrStartTime(){var e;return null===(e=this.instance.getState())||void 0===e?void 0:e.dvrStartTime}get dvrEndTime(){const{dvrDuration:e,dvrStartTime:t}=this.instance.getState()||{};if(void 0!==e&&void 0!==t)return t+e}get dvrDuration(){var e;return null===(e=this.instance.getState())||void 0===e?void 0:e.dvrDuration}get utcPosition(){const{currentTime:e,utcStartTime:t}=this.instance.getState()||{};if(void 0!==e&&void 0!==t)return t+e}onDVRTimeChanged(e){const t=t=>{let{dvrStartTime:n}=t;return e({startTime:n,endTime:void 0!==n&&void 0!==this.dvrDuration?n+this.dvrDuration:void 0})};return this.instance.on(u.E.DVRStartTimeChange,t),()=>this.instance.off(u.E.DVRStartTimeChange,t)}onDVRDurationChanged(e){const t=t=>{let{dvrDuration:n}=t;return e(n)};return this.instance.on(u.E.DVRDurationChange,t),()=>this.instance.off(u.E.DVRDurationChange,t)}onUTCPositionChanged(e){const t=()=>this.utcPosition&&e(this.utcPosition);return this.instance.on(u.E.CurrentTimeChange,t),()=>this.instance.off(u.E.DVRDurationChange,t)}requestDebugInfo(){return this.instance.requestDebugInfo()}destroy(){this.unsubscribeCallbacks.forEach((e=>e())),this.instance.destroy()}get isPictureInPicture(){var e;return!(null===(e=this.instance.getState())||void 0===e||!e.isPictureInPicture)}onPictureInPictureStateChanged(e){const t=t=>{let{isPictureInPicture:n}=t;return e(!!n)};return this.instance.on(u.E.PictureInPictureStateChange,t),()=>this.instance.off(u.E.PictureInPictureStateChange,t)}setIsPictureInPictureAllowed(e){this.instance.setPictureInPictureAllowed(e)}onCloseButtonClick(e){return this.instance.once(u.E.SkinReady,(()=>{var t,n;null===(t=this.instance.skin)||void 0===t||null===(n=t.CloseButton)||void 0===n||n.on("Click",e)})),()=>{var t,n;return null===(t=this.instance.skin)||void 0===t||null===(n=t.CloseButton)||void 0===n?void 0:n.off("Click",e)}}}(o,a))}),[a,t]);return(0,o.useEffect)((()=>{d||(async e=>{var t;if(null===(t=window.Ya)||void 0===t||!t.playerApi){const{loadPlayerApi:t}=await n.e(6745).then(n.t.bind(n,26745,23));await t(e)}})({version:a.yaPlayerVersion}).then((()=>{var e;null!==(e=window.Ya)&&void 0!==e&&e.playerApi&&!d&&h()})).catch((e=>{null===s||void 0===s||s({message:e instanceof Error?e.message:ue.loadingPlayerError,code:le.loadingPlayerError,details:"",isFatal:!0,isDrmError:!1,category:"NETWORK_TIMEOUT"})}))}),[d,p]),(0,o.useEffect)((()=>()=>{d&&d.destroy()}),[d]),d},_e=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n=ae();(0,o.useEffect)((()=>{if(n)return e(n)}),[n,...t])},Ae=e=>{let{source:t}=e;return(e=>{const t=e.id;_e((n=>{const r=n.source;if((r||"filmoscope"===n.type)&&(null===r||void 0===r?void 0:r.id)!==t&&(n.setSource(e),"filmoscope"===n.type))return n.onReady((()=>!n.isWaitingUserPlay&&n.play()))}),[t])})(t),null},Ie=e=>{let{children:t,config:n,onLoadingError:r}=e;const i=(0,o.useRef)(null),a=Oe({playerContainerRef:i,config:n,onLoadingError:r});return s().createElement(ie,{value:a},s().createElement(K,{value:i},s().createElement(Ae,{source:n.source}),t))},xe={VOD:"vod",EVENT:"event",LIVE:"live"},De={max:1/0,min:0},Re={playready:"com.microsoft.playready",widevine:"com.widevine.alpha",fairPlay:"com.apple.fps.1_0"};function Me(e,t){const{streams:n,additionalParams:r,userPreferences:{preferredTracks:a},id:o}=e;return X(X({},(0,i.Z)(e,Y)),{},{id:o,streams:n.map((e=>function(e){let{url:t,drmConfig:n,audio:r,subtitles:i}=e;const a={url:t,audio:r,subtitles:i};n&&(a.drmConfig=function(e){const t=e.servers;if(!t)return;const n={servers:Object.values(Re).reduce(((n,r)=>{let i;var a,o;r===Re.fairPlay?i=null===(a=e.advanced)||void 0===a||null===(o=a[Re.fairPlay])||void 0===o?void 0:o.processSPCPath:i=t[r];return i&&(n[r]=i),n}),{}),requestParams:null===e||void 0===e?void 0:e.requestParams},r=t[Re.fairPlay];r&&(n.advanced={[Re.fairPlay]:{serverCertificateUri:r}});return n}(n));return a}(e))),preferredTracks:a&&Ne(a),videoContentId:o,mediaFormat:"video",allowedMuted:"Allowed"===t,from:r.from,fromBlock:r.from_block,streamBlock:r.stream_block,puid:r.puid})}function Ne(e){let{textTrackLang:t,audioTrackLang:n,videoTrackLabel:r}=e;return{preferredTextTrack:t,preferredAudioTrack:n,preferredVideoTrack:r}}function Ve(e){const{label:t,value:n,language:r,bitrate:i}=e;return{name:t||"",value:n,lang:r,bitrate:i}}function je(e){const{label:t,value:n,language:r}=e;return{name:t||"",value:n,lang:r}}function Le(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{label:n,value:r,bitrate:i,height:a,width:o}=e;return{name:n||"",value:r,bitrate:i||0,height:a,width:o,auto:t}}function Be(e){let{config:t,useYasp:n,onLoadingError:r}=e;const{0:a,1:s}=(0,o.useState)(null),{testIds:d,debug:c,autoplay:l,maxABRHeight:u,maxABRWidth:p,serviceId:h,yaspVersion:f,filmoscopeVersion:m,from:v,playerTelemetryUrl:g}=t;return(0,o.useEffect)((()=>{if(!a){const e=q({playerParams:{telemetryParams:{logUrl:g,testIds:d,from:v},restrictABRToElementSize:!0,useEngineName:n?"yasp":"",yaspVersion:f,debug:c,maxABRHeight:u,maxABRWidth:p},loaderParams:{version:m,checkSafeVersion:!0,onError:e=>{null===r||void 0===r||r(function(e){return{message:e instanceof Error?e.message:ue.loadingPlayerError,code:le.loadingPlayerError,details:"",isFatal:!0,isDrmError:!1,category:"NETWORK_TIMEOUT"}}(e))}}});c&&(window.playerInstance=e);const t=new class{constructor(e){this.instance=e,this.autoplayPolicy="Allowed",this.type="filmoscope"}get pureInstance(){return this.instance}get isMuted(){return this.instance.muted}setIsMuted(e){this.instance.muted=e}onMuteChange(e){return this.instance.listen("volumechanged",(()=>e(this.isMuted)))}stretchVideoToContainerSize(){}get currentTime(){return this.instance.currentTime}onCurrentTimeChange(e){return this.instance.listen("timeupdate",(()=>this.currentTime&&e(this.currentTime)))}get duration(){return this.instance.duration}onDurationChange(e){return this.onReady((()=>e(this.duration)))}get hasError(){return!!this.instance.error}onError(e){return this.instance.listen("error",(t=>{let{message:n,code:r,isFatal:i,details:a,stack:o,category:s}=t;"PLAY_ERROR"!==r&&e({message:n,code:r,isFatal:i,details:a,stack:o,vsid:this.vsid,isDrmError:"DRM"===s,category:s})}))}get playingState(){const e=this.instance.paused,t=this.instance.buffering,n=this.instance.ended;return t?"buffering":n?"end":e?"pause":"play"}onPlayingStateChange(e){const t=this.instance.listen("bufferingchange",(()=>e(this.playingState))),n=this.instance.listen("ended",(()=>e(this.playingState))),r=this.instance.listen("pausedchanged",(()=>e(this.playingState)));return()=>{t(),n(),r()}}onFinish(e){return this.instance.listen("ended",(()=>{this.instance.ended&&e()}))}play(){this.instance.ready&&this.instance.paused&&this.instance.play()}pause(){this.instance.pause()}onContentImpression(e){return this.instance.listen("playbackstart",(()=>e()))}get isStarted(){return this.instance.ready&&!this.instance.error}get isWaitingUserPlay(){return this.instance.isWaitingUserPlay}onIsStartedChange(e){return this.onPlayingStateChange((()=>e(this.isStarted)))}onWaitingUserPlayChange(e){return this.instance.listen("waitinguserplaychanged",(()=>e(this.isWaitingUserPlay)))}onReady(e){return this.instance.listen("readychanged",(()=>{this.instance.ready&&e()}))}seek(e){this.instance.seek(e)}onSeeked(e){return this.instance.listen("seeked",(t=>{let{oldPosition:n,newPosition:r}=t;e({oldPositionSec:n,newPositionSec:r})}))}onSeeking(e){return this.instance.listen("seeking",(t=>{let{oldPosition:n,newPosition:r}=t;e({oldPositionSec:n,newPositionSec:r})}))}get videoSize(){const{videoHeight:e,videoWidth:t}=this.instance;return{height:e,width:t}}onVideoSizeChange(e){return this.onReady((()=>e(this.videoSize)))}get volume(){const{volume:e}=this.instance;return e&&(t=e,Math.trunc(t*pe));var t}setVolume(e){const t=function(e){return e/pe}(e);t&&(this.setIsMuted(!1),this.instance.volume=t)}onVolumeChange(e){return this.instance.listen("volumechanged",(()=>e(this.volume)))}get source(){const e=this.instance.currentSource;if(e)return function(e,t){const{streams:n,from:r,fromBlock:i,streamBlock:a,puid:o,preferredTracks:s,subtitles:d,id:c}=e,{preferredAudioTrack:l,preferredTextTrack:u,preferredVideoTrack:p}=null!==s&&void 0!==s?s:{};return X(X({},e),{},{id:null!==c&&void 0!==c?c:"Unknown",additionalParams:{from:r||"",from_block:i,stream_block:a,vsid:t,puid:o},userPreferences:{preferredTracks:{textTrackLang:u,audioTrackLang:l,videoTrackLabel:p}},streams:n.map((e=>X(X({},e),{},{drmConfig:void 0===e.drmConfig?void 0:{servers:e.drmConfig.servers},subtitles:d})))})}(e,this.vsid)}setSource(e){const t=Me(e,this.autoplayPolicy);t&&this.instance.setSource(t)}onSourceChange(e){return this.instance.listen("sourcechange",(()=>e(this.source)))}get currentStream(){const e=this.instance.currentStream;return e&&function(e){const{drmConfig:t,url:n}=e;return X({url:n},(0,i.Z)(e,$))}(e)}onCurrentStreamChange(e){return this.instance.listen("streamchange",(()=>e(this.currentStream)))}get watchedTime(){return this.instance.watchedTime}onWatchedTimeChange(e){return this.instance.listen("watchedtimechange",(()=>e(this.instance.watchedTime)))}get audioTrack(){const{currentAudioTrack:e}=this.instance;if(e)return Ve(e)}get audioTracks(){return this.instance.audioTracks.map(Ve)}setAudioTrack(e){this.instance.setAudioTrack(e.value)}onCurrentAudioTrackChange(e){return this.instance.listen("audiotrackchanged",(()=>e(this.audioTrack)))}onAudioTracksChange(e){return this.onReady((()=>e(this.audioTracks)))}get textTrack(){const{currentTextTrack:e}=this.instance;if(e)return je(e)}get textTracks(){return this.instance.textTracks.map(je)}setTextTrack(e){e&&(e.value?this.instance.setTextTrack(e.value):this.instance.resetTextTrack())}onCurrentTextTrackChange(e){return this.instance.listen("texttrackchanged",(()=>e(this.textTrack)))}onTextTracksChange(e){return this.onReady((()=>e(this.textTracks)))}get vsid(){return this.instance.getVsid()}get videoTrack(){const{currentVideoTrack:e}=this.instance;if(e)return Le(e,this.instance.isABREnabled)}get videoTracks(){return this.instance.videoTracks.map((e=>Le(e)))}onCurrentVideoTrackChange(e){const t=this.instance.listen("abrstatuschanged",(()=>e(this.videoTrack))),n=this.instance.listen("videotrackchanged",(()=>e(this.videoTrack)));return()=>{t(),n()}}onVideoTracksChange(e){return this.onReady((()=>e(this.videoTracks)))}setVideoTrack(e){e?this.instance.setVideoTrack(e.value):this.instance.enableABR()}get playbackRate(){return this.instance.playbackRate}get playbackRateRange(){return De}onPlaybackRateChange(e){return this.instance.listen("ratechanged",(()=>e(this.playbackRate)))}onPlaybackRateRangeChange(){return ce}setPlaybackRate(e){this.instance.playbackRate=e}get bufferedRanges(){return this.instance.bufferedRanges}onBufferedRangesChange(e){return this.instance.listen("bufferedrangeschanged",(()=>e(this.bufferedRanges)))}get videoType(){const{videoType:e}=this.instance;return e&&xe[e]}get isFullscreen(){return!1}get drmSystem(){var e;return null===(e=this.instance.currentStream)||void 0===e?void 0:e.drmType}get isDrmSupported(){return!0}get utcStartTime(){return this.instance.utcPosition}onUtcStartTimeChange(e){return this.instance.listen("readychanged",(()=>e(this.utcStartTime)))}get adState(){}onAdStateChanged(){return ce}onAdPodStart(){return ce}onAdPodEnd(){return ce}onAdPodSkip(){return ce}onAdLoaded(){return ce}onAdError(){return ce}onAdPodClick(){return ce}get currentSubtitles(){return this.instance.currentSubtitles}onCurrentSubtitlesChange(e){return this.instance.listen("subtitleschange",(()=>e(this.currentSubtitles)))}setNativeSubtitlesVisibility(){}get dvrStartTime(){return this.instance.seekRange().start}get dvrEndTime(){return this.instance.seekRange().end}get dvrDuration(){const{end:e,start:t}=this.instance.seekRange();return e-t}get utcPosition(){return this.instance.utcPosition}onDVRDurationChanged(e){return this.instance.listen("seekrangeupdated",(t=>{let{start:n,end:r}=t;return e(r-n)}))}onDVRTimeChanged(e){return this.instance.listen("seekrangeupdated",(t=>{let{start:n,end:r}=t;return e({startTime:n,endTime:r})}))}onUTCPositionChanged(e){return this.instance.listen("timeupdate",(()=>void 0!==this.utcPosition&&e(this.utcPosition)))}destroy(){this.instance.destroy()}get isPictureInPicture(){return!!this.instance.pictureInPictureWindow}onPictureInPictureStateChanged(e){const t=this.instance.listen("enterpictureinpicture",(()=>e(!0))),n=this.instance.listen("leavepictureinpicture",(()=>e(!1)));return()=>{t(),n()}}setIsPictureInPictureAllowed(e){this.instance.disablePictureInPicture=!e}onCloseButtonClick(){return ce}moveToContainer(e){this.instance.moveToContainer(e)}logEvent(e,t){this.instance.logEvent(e,t)}}(e);t.autoplayPolicy=l,s(t)}}),[a,d,n,f,c,h,u,p,m,l,v,r,g]),(0,o.useEffect)((()=>()=>{a&&a.destroy()}),[a]),a}var We=e=>{let{children:t,config:n,useYasp:r,onLoadingError:i}=e;const a=(0,o.useRef)(null),d=Be({onLoadingError:i,config:n,useYasp:r});return(0,o.useEffect)((()=>{a.current&&"filmoscope"===(null===d||void 0===d?void 0:d.type)&&(null===d||void 0===d||d.moveToContainer(a.current))}),[d]),s().createElement(ie,{value:d},s().createElement(K,{value:a},s().createElement(Ae,{source:n.source}),t))},Ue=e=>{let{children:t,playerType:n="ya",config:r,useYasp:i,onLoadingError:a}=e;return"filmoscope"===n?s().createElement(We,{config:r,useYasp:i,onLoadingError:a},t):s().createElement(Ie,{config:r,onLoadingError:a},t)},Fe=()=>{const e=ae(),{0:t,1:n}=(0,o.useState)((()=>null===e||void 0===e?void 0:e.audioTracks));return _e((e=>e.onAudioTracksChange(n))),t},qe=()=>{const e=ae(),{0:t,1:n}=(0,o.useState)((()=>null===e||void 0===e?void 0:e.bufferedRanges));return _e((e=>e.onBufferedRangesChange(n))),t},Ze=e=>{_e((t=>t.onCurrentAudioTrackChange(e)),[e])},Qe=()=>{const e=ae(),{0:t,1:n}=(0,o.useState)((()=>null===e||void 0===e?void 0:e.audioTrack));return Ze(n),t},He=()=>{const e=ae(),{0:t,1:n}=(0,o.useState)((()=>null===e||void 0===e?void 0:e.playbackRate));return _e((e=>e.onPlaybackRateChange(n))),t},ze=()=>{const e=ae(),{0:t,1:n}=(0,o.useState)((()=>null===e||void 0===e?void 0:e.textTrack));return _e((e=>e.onCurrentTextTrackChange(n))),t},Ye=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;_e((n=>n.onCurrentTimeChange(t?(0,Z.P)(t,!0,e):e)),[e,t])},$e=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const t=ae(),{0:n,1:r}=(0,o.useState)((()=>(null===t||void 0===t?void 0:t.currentTime)||0));return Ye(r,e),n},Ge=()=>{const e=ae(),{0:t,1:n}=(0,o.useState)((()=>null===e||void 0===e?void 0:e.videoTrack));return _e((e=>e.onCurrentVideoTrackChange(n))),t},Xe=e=>{_e((t=>t.onDurationChange(e)),[e])},Ke=()=>{const e=ae(),{0:t,1:n}=(0,o.useState)((()=>(null===e||void 0===e?void 0:e.duration)||0));return Xe(n),t},Je=e=>{_e((t=>t.onCurrentTimeChange((()=>e(t.dvrDuration)))),[e])},et=e=>{_e((t=>t.onDVRTimeChanged((t=>{let{startTime:n,endTime:r}=t;return e({startTime:n,endTime:r})}))),[e])},tt=()=>{const e=ae(),{0:t,1:n}=(0,o.useState)((()=>(null===e||void 0===e?void 0:e.dvrStartTime)||0)),{0:r,1:i}=(0,o.useState)((()=>(null===e||void 0===e?void 0:e.dvrEndTime)||0)),a=(0,o.useCallback)((e=>{let{startTime:t,endTime:r}=e;n(t),i(r)}),[]);return et(a),{dvrStartTime:t,dvrEndTime:r}},nt=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n=ae();return(0,o.useCallback)(e.bind(null,n),[n,...t])},rt=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n=ae();(0,o.useLayoutEffect)((()=>{if(n)return e(n)}),[n,...t])},it=()=>{const e=ae(),{0:t,1:n}=(0,o.useState)((()=>null===e||void 0===e?void 0:e.playingState)),r=(0,o.useRef)(),i=(0,o.useCallback)((e=>{n((t=>(r.current=t,e)))}),[]);return _e((e=>e.onPlayingStateChange(i))),{playingState:t,previousPlayingState:r.current}},at=()=>{const e=ae(),{0:t,1:n}=(0,o.useState)((()=>!(null===e||void 0===e||!e.isStarted)));return _e((e=>e.onIsStartedChange(n))),t},ot=()=>{const e=ae(),{0:t,1:n}=(0,o.useState)((()=>!!e&&e.isWaitingUserPlay));return _e((e=>e.onWaitingUserPlayChange(n))),t},st=()=>{const e=ae(),{0:t,1:n}=(0,o.useState)((()=>Boolean(null===e||void 0===e?void 0:e.isMuted))),r=nt((e=>null===e||void 0===e?void 0:e.setIsMuted(!t)),[t]);return _e((e=>{const t=e.onMuteChange(n);return n(Boolean(null===e||void 0===e?void 0:e.isMuted)),t})),{isMuted:t,toggleMute:r}},dt=e=>{_e((t=>t.onContentImpression(e)),[e])},ct=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce;const t=(0,o.useCallback)((t=>{t&&e(t)}),[e]);_e((e=>e.onError(t)),[t])},lt=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce;_e((t=>t.onFinish(e)),[e])},ut=e=>{_e((t=>t.onPlayingStateChange(e)),[e])},pt=e=>{_e((t=>t.onSourceChange(e)),[e])},ht=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;_e((n=>n.onWatchedTimeChange(t?(0,Z.P)(t,!0,e):e)),[e])},ft=()=>{const e=ae(),{0:t,1:n}=(0,o.useState)((()=>null===e||void 0===e?void 0:e.playbackRateRange));return _e((e=>e.onPlaybackRateRangeChange(n))),t},mt=()=>{const e=ae(),t=(0,o.useCallback)((function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;const n=null===e||void 0===e?void 0:e.currentTime;e&&void 0!==n&&e.seek((0,l.cb)(n,t))}),[e]),n=(0,o.useCallback)((function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;const n=null===e||void 0===e?void 0:e.currentTime;e&&void 0!==n&&e.seek((0,l.IH)(n,t))}),[e]);return{seekBackward:t,seekForward:n,seekToTime:(0,o.useCallback)((t=>{const n=null===e||void 0===e?void 0:e.currentTime;e&&void 0!==n&&e.seek(t)}),[e])}},vt=e=>{rt((t=>{const n=null===t||void 0===t?void 0:t.isMuted;void 0!==e&&n!==e&&(null===t||void 0===t||t.setIsMuted(e))}),[e])},gt=e=>{rt((t=>null===t||void 0===t?void 0:t.setNativeSubtitlesVisibility(e)),[e])},bt=()=>{const e=ae(),{0:t,1:n}=(0,o.useState)((()=>null===e||void 0===e?void 0:e.currentSubtitles));return _e((e=>{const t=()=>n(e.currentSubtitles),r=e.onCurrentSubtitlesChange(t),i=e.onCurrentTextTrackChange(t);return()=>{r(),i()}}),[]),t},yt=()=>{const e=ae(),{0:t,1:n}=(0,o.useState)((()=>null===e||void 0===e?void 0:e.textTracks));return _e((e=>e.onTextTracksChange(n))),t},kt=()=>{const{seekToTime:e}=mt();return(0,o.useCallback)((()=>{e(Number.MAX_SAFE_INTEGER)}),[e])},Pt=()=>{const e=nt((e=>{null===e||void 0===e||e.play()})),t=nt((e=>{null===e||void 0===e||e.pause()}));return{togglePlay:nt((n=>{const r=null===n||void 0===n?void 0:n.playingState;if(n&&r)return["buffering","play"].includes(r)?(t(),"pause"):["end","pause"].includes(r)?(e(),"play"):void 0})),play:e,pause:t}},Tt=()=>{const{play:e,pause:t}=Pt(),n=kt(),r=(0,o.useCallback)((()=>{n(),e()}),[e,n]);return{toggleOnAir:nt((e=>{const n=null===e||void 0===e?void 0:e.playingState;if(e&&n)return["buffering","play"].includes(n)?(t(),"pause"):["end","pause"].includes(n)?(r(),"play"):void 0}),[r,t]),returnToAir:r,pause:t}},St=()=>{const e=ae(),{0:t,1:n}=(0,o.useState)((()=>null===e||void 0===e?void 0:e.videoSize));return _e((e=>e.onVideoSizeChange(n))),t},wt=()=>{const e=ae(),{0:t,1:n}=(0,o.useState)((()=>null===e||void 0===e?void 0:e.videoTracks));return _e((e=>e.onVideoTracksChange(n))),t},Et=()=>{const e=ae(),{0:t,1:n}=(0,o.useState)((()=>null===e||void 0===e?void 0:e.volume)),{isMuted:r,toggleMute:i}=st(),a=nt((0,Z.P)(20,!0,((e,t)=>{if(!e)return;let n=t;t<=he&&(n=he),t>pe&&(n=pe),(e=>e>=he&&e<=pe)(n)&&(e.setVolume(n),(n>he&&r||n===he&&!r)&&i())})),[]),s=(0,o.useCallback)((e=>{if(!e||void 0===t)return;if(e<0&&r)return;a((e>0&&r?0:t)+e)}),[a,r,t]);return _e((e=>e.onReady((()=>n(e.volume))))),_e((e=>e.onVolumeChange(n))),{volume:t,setVolume:a,changeVolumeByStep:s}},Ct=()=>{const e=ae(),{0:t,1:n}=(0,o.useState)((()=>!(null===e||void 0===e||!e.isPictureInPicture)));return _e((e=>e.onPictureInPictureStateChanged(n))),t},Ot=()=>{const e=Ke(),t=$e();return Math.max(0,e-t)},_t=e=>{_e((t=>t.onReady(e)),[e])};function At(e){rt((t=>{t.setIsPictureInPictureAllowed(e)}),[e])}var It=()=>{const e=ae(),{0:t,1:n}=(0,o.useState)((()=>null===e||void 0===e?void 0:e.currentStream));var r;return _e((e=>e.onCurrentStreamChange(r)),[r=n]),t},xt=e=>{_e((t=>{"filmoscope"===t.type&&t.onSeeking(e)}))},Dt=e=>{_e((t=>{"filmoscope"===t.type&&t.onSeeked(e)}))},Rt=e=>_e((t=>t.onPlaybackRateChange(e)),[e]),Mt=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;_e((n=>n.onUTCPositionChanged(t?(0,Z.P)(t,!0,e):e)),[e,t])},Nt=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const t=ae(),{0:n,1:r}=(0,o.useState)((()=>null===t||void 0===t?void 0:t.utcPosition));return Mt(r,e),n}},74319:function(e,t,n){"use strict";n.d(t,{rZ:function(){return P},mj:function(){return h},MG:function(){return f},GT:function(){return m},$J:function(){return v}});var r=n(45340);const i="unknown_creative_id",a="unknown_banner_id",o="unknown_ad_id",s="unknown_mediafile_type",d="unknown_mediafile_url",c="unknown_request_id",l={unknownValue:"unknown",noneValue:"none",unknownNumberValue:-1},u=1,p=0,h=e=>{const{adPosition:t,adSource:n,adRequestId:r,adSessionId:i,adParams:a=l.noneValue,adVastUrl:o=l.noneValue}=g(e);return{"ad-position":()=>t,"ad-source":()=>n,"ad-request-id":()=>r,"ad-vast-url":()=>o,"ad-params":()=>a,"ad-session-id":()=>i}},f=e=>{const{adCreativeId:t,adBannerId:n,adId:r,adMediafileType:i,adMediafileUrl:a,adVastIsEmpty:o,adSkippable:s,adPodPosition:d}=y(e);return{"ad-creative-id":()=>t,"ad-banner-id":()=>n,"ad-id":()=>r,"ad-mediafile-type":()=>i,"ad-mediafile-url":()=>a,"ad-skippable":()=>s,"ad-pod-position":()=>d,"ad-vast-empty":()=>o}},m=e=>{const{errorTitle:t=l.unknownValue,errorMessage:n=l.unknownValue,errorType:r}=function(e){const t=null===e||void 0===e?void 0:e.error,n={errorType:T(null===t||void 0===t?void 0:t.errorType)};(null===t||void 0===t?void 0:t.errorTitle)&&(n.errorTitle=t.errorTitle);(null===t||void 0===t?void 0:t.errorMessage)&&(n.errorMessage=t.errorMessage);return n}(e);return{"error-title":()=>t,"error-message":()=>n,"error-type":()=>r}},v=e=>Object.assign(Object.assign(Object.assign({},h(e)),(e=>{const{adFrameTimestamp:t}=b(e);return{"ad-frame-timestamp":()=>t}})(e)),f(e));function g(e){var t,n;const r={adPosition:P(null===e||void 0===e?void 0:e.breakType),adSource:k(null===e||void 0===e?void 0:e.adSource),adRequestId:null!==(t=null===e||void 0===e?void 0:e.adRequestId)&&void 0!==t?t:c,adSessionId:null!==(n=null===e||void 0===e?void 0:e.adSessionId)&&void 0!==n?n:l.unknownNumberValue};return(null===e||void 0===e?void 0:e.adVastUrl)&&(r.adVastUrl=e.adVastUrl),(null===e||void 0===e?void 0:e.adParams)&&(r.adParams=e.adParams),r}function b(e){var t;return{adFrameTimestamp:null!==(t=null===e||void 0===e?void 0:e.adFrameTimestamp)&&void 0!==t?t:l.unknownNumberValue}}function y(e){var t,n,r,c,h,f;return{adCreativeId:null!==(t=null===e||void 0===e?void 0:e.adCreativeId)&&void 0!==t?t:i,adBannerId:null!==(n=null===e||void 0===e?void 0:e.adBannerId)&&void 0!==n?n:a,adId:null!==(r=null===e||void 0===e?void 0:e.adId)&&void 0!==r?r:o,adMediafileType:null!==(c=null===e||void 0===e?void 0:e.adMediafileType)&&void 0!==c?c:s,adMediafileUrl:null!==(h=null===e||void 0===e?void 0:e.adMediafileUrl)&&void 0!==h?h:d,adVastIsEmpty:(null===e||void 0===e?void 0:e.adVastIsEmpty)?u:p,adSkippable:(null===e||void 0===e?void 0:e.adSkippable)?u:p,adPodPosition:null!==(f=null===e||void 0===e?void 0:e.adPodPosition)&&void 0!==f?f:l.unknownNumberValue}}function k(e){return"VAST"===e?r.SC.Vast:"Adfox"===e?r.SC.AdFox:"YandexSDK"===e?r.SC.Yandex:r.SC.Vast}function P(e){return"midroll"===e||"inroll"===e?r.ev.Midroll:"preroll"===e?r.ev.Preroll:"postroll"===e?r.ev.Postroll:"pauseroll"===e?r.ev.Pauseroll:r.ev.Unknown}function T(e){return"loading"===e?r.cI.Loading:"start"===e?r.cI.Start:"playback"===e?r.cI.Playback:"processing"===e?r.cI.Processing:r.cI.Unknown}},78472:function(e,t,n){"use strict";n.d(t,{fQ:function(){return b},nk:function(){return V},q8:function(){return N},Q1:function(){return m},Lz:function(){return y},gm:function(){return u},Ji:function(){return r.Ji}});n(95941),n(96514);var r=n(91771),i=(n(5692),n(76948),n(74319)),a=n(33355);var o=n(85533),s=n(78842),d=n(18626);class c{constructor(){this.handlers=Object.create(null)}on(e,t){this.getHandlers(e).push(t)}off(e,t){const n=this.getHandlers(e);void 0!==t?this.removeHandler(t,n):n.length=0}emit(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!t)return;const[r]=t;let i={};t.length>=2&&t[1]&&(i=t[1]);this.getHandlers(r).slice().forEach((e=>{try{e(i)}catch(t){setTimeout((()=>{throw t}),0)}}))}offAll(){this.handlers=Object.create(null)}getHandlers(e){return void 0===this.handlers[e]&&(this.handlers[e]=[]),this.handlers[e]}removeHandler(e,t){const n=t.indexOf(e);-1!==n&&t.splice(n,1)}}class l extends c{}class u extends l{constructor(e){super(),this.instance=e,this.onStateChange=e=>{let{playingState:t}=e;this.emit("stateChange",{state:t})},this.onCurrentTimeChange=e=>{let{currentTime:t}=e;this.emit("currentTimeChange",{currentTime:t})},this.onError=e=>{let{error:t}=e;t&&this.emit("error",{error:t})},this.onWatchedTimeChange=e=>{let{watchedTime:t}=e;this.emit("watchedTimeChange",{watchedTime:t})},this.isTrackStreamChangeNeeded=!1,this.onSourceChange=()=>{this.isTrackStreamChangeNeeded=!0},this.onStreamChange=()=>{this.isTrackStreamChangeNeeded&&(this.emit("setSourceComplete"),this.isTrackStreamChangeNeeded=!1)},this.onReady=()=>{this.emit("ready")},this.emitDestroy=()=>{this.emit("destroyed")},this.isMobile=(0,d.W7)(),this.subscribe()}getVideoTrack(){var e;return null===(e=this.instance.getState())||void 0===e?void 0:e.videoTrack}getAudioTrack(){var e;return null===(e=this.instance.getState())||void 0===e?void 0:e.audioTrack}getTextTrack(){var e;return null===(e=this.instance.getState())||void 0===e?void 0:e.textTrack}getVideoType(){var e;return null===(e=this.instance.getState())||void 0===e?void 0:e.videoType}getDeviceType(){return this.isMobile?{kp:"m",mediascope:"mobile"}:{kp:"d",mediascope:"desktop"}}getIsFullscreen(){var e;return(null===(e=this.instance.getState())||void 0===e?void 0:e.isFullscreen)||!1}getMuted(){var e,t;return(null===(e=this.instance.getState())||void 0===e?void 0:e.muted)||0===(null===(t=this.instance.getState())||void 0===t?void 0:t.volume)}getDuration(){var e;return(null===(e=this.instance.getState())||void 0===e?void 0:e.duration)||0}getPlayingState(){var e;return(null===(e=this.instance.getState())||void 0===e?void 0:e.playingState)||"buffering"}getCurrentTime(){var e;return(null===(e=this.instance.getState())||void 0===e?void 0:e.currentTime)||0}getUtcPosition(){var e,t;const n=null===(e=this.instance.getState())||void 0===e?void 0:e.utcStartTime;return n?n+((null===(t=this.instance.getState())||void 0===t?void 0:t.currentTime)||0):0}getIsDrmSupported(){var e,t,n;return!!(null===(t=null===(e=this.instance.getState())||void 0===e?void 0:e.stream)||void 0===t?void 0:t.drmConfig)&&!(null===(n=this.instance.getState())||void 0===n?void 0:n.error)}getCurrentDrmType(){var e;return(null===(e=this.instance.getState())||void 0===e?void 0:e.drmSystem)||"clear"}getAdState(){var e;const t=null===(e=this.instance.getState())||void 0===e?void 0:e.adState;return{playing:(null===t||void 0===t?void 0:t.state)===o.M.PLAYING,type:null===t||void 0===t?void 0:t.type}}getVsid(){var e,t;return null!==(t=null===(e=this.instance.getState())||void 0===e?void 0:e.vsid)&&void 0!==t?t:""}subscribe(){this.instance.on(s.E.Ready,this.onReady),this.instance.on(s.E.ErrorChange,this.onError),this.instance.on(s.E.PlayingStateChange,this.onStateChange),this.instance.on(s.E.CurrentTimeChange,this.onCurrentTimeChange),this.instance.on(s.E.WatchedTimeChange,this.onWatchedTimeChange),this.instance.on(s.E.SourceChange,this.onSourceChange),this.instance.on(s.E.StreamChange,this.onStreamChange),this.instance.on(s.E.Destroy,this.emitDestroy)}unsubscribe(){this.instance.off(s.E.Ready,this.onReady),this.instance.off(s.E.ErrorChange,this.onError),this.instance.off(s.E.PlayingStateChange,this.onStateChange),this.instance.off(s.E.CurrentTimeChange,this.onCurrentTimeChange),this.instance.off(s.E.WatchedTimeChange,this.onWatchedTimeChange),this.instance.off(s.E.SourceChange,this.onSourceChange),this.instance.off(s.E.StreamChange,this.onStreamChange)}destroy(){this.unsubscribe()}}n(29631);function p(e){return e.ended?"end":e.buffering?"buffering":e.ready?e.paused?"pause":"play":"pause"}function h(e,t){return e===t?0!==e||0!==t||1/e===1/t:e!==e&&t!==t}function f(e,t){let n=t;const r=function(t){if(!function(e,t){if(h(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(t,n[i])||!h(e[n[i]],t[n[i]]))return!1;return!0}(t,n))return n=t,e(t)};return r.reset=()=>{n=t},r}class m extends l{constructor(e){super(),this.playerListeners=[],this.player=e,this.isMobile=(0,d.W7)(),this.isSmartTV=(0,d.yE)(),this.bindPlayerEvents()}bindPlayerEvents(){this.unbindPlayerEvents();let e=!1;const t=f((e=>this.emit("stateChange",{state:e})));this.addPlayerListener("sourcechange",(()=>{e=!1,t.reset()})),this.addPlayerListener("readychanged",(()=>{!e&&this.player.ready&&(e=!0,this.emit("ready"))})),this.addPlayerListener("seeked",(e=>{let{oldPosition:t,newPosition:n}=e;const r={oldPosition:t,newPosition:n};this.emit("seek",{seekObj:r})})),this.addPlayerListener("error",(e=>{e.isFatal&&this.emit("error",{error:e})})),this.addPlayerListener("timeupdate",(()=>{const{currentTime:e}=this.player;this.emit("currentTimeChange",{currentTime:e})})),this.addPlayerListener("destroying",(()=>{this.emit("destroyStart")})),this.addPlayerListener("destroyed",(()=>{this.emit("destroyed")})),this.addPlayerListener("pausedchanged",(()=>{const e=p(this.player);t(e)})),this.addPlayerListener("ended",(()=>{const e=p(this.player);t(e)})),this.addPlayerListener("watchedtimechange",(()=>{const{watchedTime:e}=this.player;this.emit("watchedTimeChange",{watchedTime:e})})),this.addPlayerListener("bufferingchange",(()=>{t(p(this.player))}))}destroy(){this.unbindPlayerEvents()}addPlayerListener(e,t){const n=this.player.listen(e,t);return this.playerListeners.push(n),n}unbindPlayerEvents(){this.playerListeners.forEach((e=>e())),this.playerListeners.length=0}getVsid(){return this.player.getVsid()}getVideoTrack(){var e;if(this.player.currentVideoTrack)return{name:(e=this.player.currentVideoTrack).label,value:e.value,bitrate:e.bitrate,width:e.width,height:e.height}}getAudioTrack(){var e;if(this.player.currentAudioTrack)return{name:(e=this.player.currentAudioTrack).label,value:e.value,lang:e.language,bitrate:e.bitrate}}getTextTrack(){var e;if(this.player.currentTextTrack)return{name:(e=this.player.currentTextTrack).label,value:e.value,lang:e.language}}getVideoType(){return this.player.videoType}getIsFullscreen(){return Boolean(document.fullscreenElement||document.webkitFullscreenElement)}getMuted(){return this.player.muted}getDuration(){return this.player.duration||0}getPlayingState(){return p(this.player)}getCurrentTime(){return this.player.currentTime}getUtcPosition(){return this.player.utcPosition||0}getIsDrmSupported(){return!0}getCurrentDrmType(){var e;return(null===(e=this.player.currentStream)||void 0===e?void 0:e.drmType)||"clear"}getAdState(){return{type:void 0,playing:!1}}getDeviceType(){return this.isMobile?{kp:"m",mediascope:"mobile"}:this.isSmartTV?{kp:"s",mediascope:"smarttv"}:{kp:"d",mediascope:"desktop"}}}class v extends c{constructor(e){super(),this.adPlayback=e,this.isEnabled=!1,this.totalViewtime=0,this.curPodViewtime=0,this.prevPodViewtime=0,this.eventHandlers=[{event:"adPodStart",handler:()=>{this.enable(),this.totalViewtime+=this.curPodViewtime,this.prevPodViewtime=0}},{event:"adPlaybackError",handler:()=>this.disable()},{event:"adFirstQuartile",handler:e=>this.onPercentageViewed({viewedPercent:25,payload:e})},{event:"adMidpoint",handler:e=>this.onPercentageViewed({viewedPercent:50,payload:e})},{event:"adThirdQuartile",handler:e=>this.onPercentageViewed({viewedPercent:75,payload:e})},{event:"adPodEnd",handler:e=>{this.onPercentageViewed({viewedPercent:99,payload:e}),this.reset()}},{event:"adPodSkip",handler:()=>this.disable()},{event:"adCurrentTimeChange",handler:e=>this.onCurrentTimeChange(e)}],this.subscribeOnPlaybackEvents()}subscribeOnPlaybackEvents(){this.eventHandlers.forEach((e=>{let{event:t,handler:n}=e;this.adPlayback.on(t,n)}))}unsubscribeFromPlaybackEvents(){this.eventHandlers.forEach((e=>{let{event:t,handler:n}=e;this.adPlayback.off(t,n)}))}disable(){this.isEnabled=!1}enable(){this.isEnabled=!0}onPercentageViewed(e){this.isEnabled&&this.emit("adViewPercentage",e)}onCurrentTimeChange(e){let{currentTime:t}=e;this.isEnabled&&(this.curPodViewtime=t-this.prevPodViewtime)}popTime(){this.totalViewtime=0,this.prevPodViewtime=this.curPodViewtime}get adViewtime(){return this.totalViewtime+this.curPodViewtime}reset(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0]?this.totalViewtime+=this.curPodViewtime:this.totalViewtime=0,this.curPodViewtime=0,this.prevPodViewtime=0,this.disable()}destroy(){this.reset(),this.unsubscribeFromPlaybackEvents(),this.offAll()}}class g extends c{constructor(e){super(),this.breakPlanner=e,this.unsubscribe=e.listenMap({breakPodError:e=>this.emit("adPlaybackError",e),breakPodStart:e=>this.emit("adPodStart",e),breakPodEnd:e=>this.emit("adPodEnd",e),breakPodSkip:e=>this.emit("adPodSkip",e),breakPodWatchedMinimalTime:e=>this.emit("adImpressionMrc",e),breakPodWatchedFirstQuartile:e=>this.emit("adFirstQuartile",e),breakPodWatchedMidpoint:e=>this.emit("adMidpoint",e),breakPodWatchedThirdQuartile:e=>this.emit("adFirstQuartile",e),breakPodTimeUpdate:e=>this.emit("adCurrentTimeChange",e)})}get currentPodDuration(){return this.breakPlanner.playbackController.duration}destroy(){var e;null===(e=this.unsubscribe)||void 0===e||e.call(this),this.offAll()}}class b extends c{constructor(e){super(),this.adPlaybackEventHandlers=[{event:"adPlaybackError",handler:e=>this.emit("adError",Object.assign(Object.assign({},(0,i.$J)(e)),(0,i.GT)(e)))},{event:"adPodStart",handler:e=>this.emit("adPodStart",(0,i.$J)(e))},{event:"adImpressionMrc",handler:e=>this.emit("adImpressionMrc",(0,i.$J)(e))},{event:"adPodEnd",handler:e=>this.emit("adPodEnd",(0,i.$J)(e))},{event:"adPodSkip",handler:e=>this.emit("adPodSkip",(0,i.$J)(e))}],this.adViewTrackerEventHandlers=[{event:"adViewPercentage",handler:e=>{let{viewedPercent:t,payload:n}=e;return this.emit("adViewed",{viewedPercent:t,data:(0,i.$J)(n)})}}],this.adPlayback=new g(e),this.adViewTracker=new v(this.adPlayback),this.subscribeOnAdEvents(e)}subscribeOnAdEvents(e){this.unsubscribeBreakPlanner=e.listenMap({breakLoadError:e=>this.emit("adError",Object.assign(Object.assign({},(0,i.$J)(e)),(0,i.GT)(e))),breakPodContentLoadError:e=>this.emit("adError",Object.assign(Object.assign({},(0,i.$J)(e)),(0,i.GT)(e))),breakPodDuplicate:e=>this.emit("adError",Object.assign(Object.assign({},(0,i.$J)(e)),(0,i.GT)(e))),breakNotFound:e=>this.emit("adNotFound",(0,i.mj)(e)),breakPodClick:e=>this.emit("adPodClick",(0,i.$J)(e)),breakRequest:e=>this.emit("adRequest",(0,i.mj)(e)),breakPodLoadSuccess:e=>this.emit("adLoad",(0,i.mj)(e)),breakPodContentLoadSuccess:e=>this.emit("adMediaFileLoad",Object.assign(Object.assign({},(0,i.mj)(e)),(0,i.MG)(e))),breakWindowStart:e=>this.emit("adWindowStart",{breakWindow:e.breakWindow}),breakWindowEnd:()=>this.emit("adWindowEnd")}),this.adPlaybackEventHandlers.forEach((e=>{let{event:t,handler:n}=e;return this.adPlayback.on(t,n)})),this.adViewTrackerEventHandlers.forEach((e=>{let{event:t,handler:n}=e;return this.adViewTracker.on(t,n)}))}get adViewtime(){return this.adViewTracker.adViewtime}stop(){this.adViewTracker.reset(!1)}popAdViewtime(){return this.adViewTracker.popTime()}unsubscribeFromAdEvents(){var e;null===(e=this.unsubscribeBreakPlanner)||void 0===e||e.call(this),this.adPlaybackEventHandlers.forEach((e=>{let{event:t,handler:n}=e;return this.adPlayback.off(t,n)})),this.adViewTrackerEventHandlers.forEach((e=>{let{event:t,handler:n}=e;return this.adViewTracker.off(t,n)}))}destroy(){this.unsubscribeFromAdEvents(),this.offAll(),this.adPlayback.destroy(),this.adViewTracker.destroy()}}class y extends c{}n(37421);var k=n(53203),P=n(39837),T=n(4472);function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){(0,T.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){(0,T.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var O=n(45340);const _={play_button:O._X.PlayButton,thumbnail:O._X.Thumbnail,purchase_button:O._X.PurchaseButton,series_list:O._X.SeriesList,series_list_player:O._X.SeriesListPlayer,next_episode:O._X.NextEpisode,next_episode_selectskip:O._X.NextEpisodeSelectskip,next_episode_aftercredits:O._X.NextEpisodeAftercredits,next_episode_autoskip:O._X.NextEpisodeAutoskip,"WN-poster":O._X.WNPoster,"WN-button":O._X.WNButton,"WN-cover":O._X.WNCover,"WN-trailer":O._X.WNTrailer,series_list_selection:O._X.SeriesListSelection,play_button_selection:O._X.PlayButtonSelection,trailer_button:O._X.TrailerButton,trailer_button_selection:O._X.TrailerButtonSelection,next_episode_button:O._X.NextEpisodeButton,channels_menu_item:O._X.ChannelsMenuItem,channels_list_horizontal:O._X.ChannelsListHorizontal,channels_categories:O._X.ChannelsCategories},A={DEFAULT:O.cS.Unknown,MEDIA:O.cS.Playback,NETWORK_MEDIA:O.cS.Communication,NETWORK_TIMEOUT:O.cS.Connection,NO_CODECS:O.cS.Preparing,CANNOT_PLAY:O.cS.WatchRejection,UNSUPPORTED_ENV:O.cS.Preparing,EXCEPTION:O.cS.Playback,CONFIG:O.cS.Preparing,REGIONAL:O.cS.WatchRejection,DRM:O.cS.Drm,ACCESS:O.cS.WatchRejection,INVALID_STREAM_URL:O.cS.Communication,INTERNET_UNAVAILABLE:O.cS.Connection,NETWORK_PLAYER:O.cS.Connection,ADS:O.cS.Playback},I=e=>{const t=Number(e);if(t>0)return t},x=e=>(e=>!e||"-"===e)(e)?void 0:e;var D=n(67814);class R{constructor(){this.datapool=null,this.trackingData=null}get clientTimestamp(){var e,t,n;return Number(null!==(n=null===(t=null===(e=this.datapool)||void 0===e?void 0:e.timestamp)||void 0===t?void 0:t.call(e))&&void 0!==n?n:0)}get clientTimeZoneOffset(){return 6e4*(new Date).getTimezoneOffset()}get vsid(){var e,t;return String(null===(t=null===(e=this.datapool)||void 0===e?void 0:e.vsid)||void 0===t?void 0:t.call(e))}get sessionId(){var e,t;return null!==(t=null===(e=this.trackingData)||void 0===e?void 0:e.sid)&&void 0!==t?t:""}get contentId(){var e,t;return null!==(t=null===(e=this.trackingData)||void 0===e?void 0:e.uuid)&&void 0!==t?t:""}get contentIdType(){return O.lK.Uuid}get monetizationModel(){var e,t,n;return"SVOD"===(n=null!==(t=null===(e=this.trackingData)||void 0===e?void 0:e.monetizationModel)&&void 0!==t?t:"")?O.Uq.SVOD:"TVOD"===n?O.Uq.TVOD:"AVOD"===n?O.Uq.AVOD:"FREE"===n?O.Uq.FREE:"EST"===n?O.Uq.EST:O.Uq.Unknown}get contentTypeId(){var e,t;return null!==(t=null===(e=this.trackingData)||void 0===e?void 0:e.contentTypeId)&&void 0!==t?t:0}get multiplex(){var e,t;return null!==(t=null===(e=this.trackingData)||void 0===e?void 0:e.isMultiplexChannel)&&void 0!==t&&t}get frameTimestamp(){var e,t;return Number((null===(t=null===(e=this.datapool)||void 0===e?void 0:e.fts)||void 0===t?void 0:t.call(e))||0)}get streamingType(){var e;return 1===(null===(e=this.trackingData)||void 0===e?void 0:e.isLive)?O.SA.Live:O.SA.Vod}get drmSystem(){var e,t,n;return"playready"===(n=String(null===(t=null===(e=this.datapool)||void 0===e?void 0:e["drm-type"])||void 0===t?void 0:t.call(e)))?O.s7.Playready:"widevine"===n?O.s7.Widevine:"fairplay"===n?O.s7.Fairplay:O.s7.None}get videoBitrate(){var e,t;return I(null===(t=null===(e=this.datapool)||void 0===e?void 0:e["bitrate-video"])||void 0===t?void 0:t.call(e))}get audioBitrate(){var e,t;return I(null===(t=null===(e=this.datapool)||void 0===e?void 0:e["bitrate-audio"])||void 0===t?void 0:t.call(e))}get audioTrackName(){var e,t;return String(null===(t=null===(e=this.datapool)||void 0===e?void 0:e["audio-track-lang"])||void 0===t?void 0:t.call(e))}get subtitlesTrackName(){var e,t;return String(null===(t=null===(e=this.datapool)||void 0===e?void 0:e["text-track-lang"])||void 0===t?void 0:t.call(e))||void 0}get fullscreen(){var e,t;return Boolean("1"===(null===(t=null===(e=this.datapool)||void 0===e?void 0:e.fullscreen)||void 0===t?void 0:t.call(e)))}get mute(){var e,t;return Boolean("1"===(null===(t=null===(e=this.datapool)||void 0===e?void 0:e.muted)||void 0===t?void 0:t.call(e)))||!1}get castTechnology(){var e;return(null===(e=this.trackingData)||void 0===e?void 0:e.isChromecast)?O.ug.Googlecast:O.ug.None}get connectionType(){return O.Rj.Unknown}get fromBlockStartPage(){var e,t,n;return"-"===(n=null!==(t=null===(e=this.trackingData)||void 0===e?void 0:e.fromBlockStartPage)&&void 0!==t?t:"-")?O.my.None:"subscriptions"===n?O.my.Subscriptions:"transactions"===n?O.my.Transactions:"purchases"===n?O.my.Purchases:"history"===n?O.my.History:"watchlist"===n?O.my.Watchlist:"film"===n?O.my.Film:"search"===n?O.my.Search:"filmography"===n?O.my.Filmography:"multiselection"===n?O.my.Multiselection:"selections"===n?O.my.Selections:"series"===n?O.my.Film:"catalog_film"===n?O.my.CatalogFilm:"catalog_series"===n?O.my.CatalogSeries:"channels"===n?O.my.Channels:"channels_category_all"===n?O.my.ChannelsCategoryAll:"mypage"===n?O.my.Mypage:O.my.Other}get fromBlockEndPage(){var e,t,n;return"-"===(n=null!==(t=null===(e=this.trackingData)||void 0===e?void 0:e.fromBlockEndPage)&&void 0!==t?t:"-")?O.Nh.None:"subscriptions"===n?O.Nh.Subscriptions:"transactions"===n?O.Nh.Transactions:"purchases"===n?O.Nh.Purchases:"history"===n?O.Nh.History:"watchlist"===n?O.Nh.Watchlist:"film"===n?O.Nh.Film:"search"===n?O.Nh.Search:"filmography"===n?O.Nh.Filmography:"multiselection"===n?O.Nh.Multiselection:"selections"===n?O.Nh.Selections:"series"===n?O.Nh.Film:"catalog_film"===n?O.Nh.CatalogFilm:"catalog_series"===n?O.Nh.CatalogSeries:"channels"===n?O.Nh.Channels:"channels_category_all"===n?O.Nh.ChannelsCategoryAll:"mypage"===n?O.Nh.Mypage:O.Nh.Other}get fromBlock(){var e,t,n;return"continue-watching"===(n=null!==(t=null===(e=this.trackingData)||void 0===e?void 0:e.fromBlock)&&void 0!==t?t:"-")?O.Ug.ContinueWatching:"promo"===n?O.Ug.Promo:"film-card"===n?O.Ug.FilmCard:"selections"===n?O.Ug.Selection:"multiselections"===n?O.Ug.Multiselection:"list"===n?O.Ug.List:"list_genre"===n?O.Ug.ListGenre:"list_country"===n?O.Ug.ListCountry:"list_year"===n?O.Ug.ListYear:"list_top"===n?O.Ug.ListTop:"list_award"===n?O.Ug.ListAward:"list_collections"===n?O.Ug.ListCollections:"channels"===n?O.Ug.Channels:"similar"===n?O.Ug.Similar:"persons"===n?O.Ug.Persons:"incut"===n?O.Ug.Incut:"-"===n?O.Ug.None:O.Ug.Other}get fromBlockAction(){var e,t;return(e=>{var t;return null!==(t=_[e])&&void 0!==t?t:O._X.Other})(null!==(t=null===(e=this.trackingData)||void 0===e?void 0:e.fromBlockAction)&&void 0!==t?t:"")}get fromBlockPosition(){var e;const t=Number(null===(e=this.trackingData)||void 0===e?void 0:e.fromBlockPosition);return Number.isInteger(t)?t:void 0}get fromBlockItemPosition(){var e;const t=Number(null===(e=this.trackingData)||void 0===e?void 0:e.fromBlockItemPosition);return Number.isInteger(t)?t:void 0}get fromBlockMLSessionId(){var e;return x(null===(e=this.trackingData)||void 0===e?void 0:e.fromBlockMLSessionId)}get fromBlockExternalLink(){var e;return x(null===(e=this.trackingData)||void 0===e?void 0:e.fromBlockExternalLink)}get bufferingSec(){var e,t;return Number((null===(t=null===(e=this.datapool)||void 0===e?void 0:e["buffering-duration"])||void 0===t?void 0:t.call(e))||0)}get bufferingCount(){var e,t;return Number((null===(t=null===(e=this.datapool)||void 0===e?void 0:e["buffering-count"])||void 0===t?void 0:t.call(e))||0)}get standardData(){const{clientTimestamp:e,clientTimeZoneOffset:t,vsid:n,sessionId:r,contentId:i,contentIdType:a,monetizationModel:o,contentTypeId:s,multiplex:d,frameTimestamp:c,streamingType:l,drmSystem:u,videoBitrate:p,audioBitrate:h,audioTrackName:f,subtitlesTrackName:m,fullscreen:v,mute:g,castTechnology:b,connectionType:y,fromBlockStartPage:k,fromBlock:P,fromBlockPosition:T,fromBlockItemPosition:S,fromBlockEndPage:w,fromBlockAction:E,fromBlockMLSessionId:C,fromBlockExternalLink:O}=this;return{clientTimestamp:e,clientTimeZoneOffset:t,vsid:n,sessionId:r,contentId:i,contentIdType:a,monetizationModel:o,contentTypeId:s,multiplex:d,frameTimestamp:c,streamingType:l,drmSystem:u,videoBitrate:p,audioBitrate:h,audioTrackName:f,subtitlesTrackName:m,fullscreen:v,mute:g,castTechnology:b,connectionType:y,fromBlockStartPage:k,fromBlock:P,fromBlockPosition:T,fromBlockItemPosition:S,fromBlockEndPage:w,fromBlockAction:E,fromBlockMLSessionId:C,fromBlockExternalLink:O}}get standardAdData(){const{clientTimestamp:e,clientTimeZoneOffset:t,vsid:n,sessionId:r,monetizationModel:i,contentId:a,contentIdType:o,contentTypeId:s,multiplex:d,streamingType:c}=this;return{clientTimestamp:e,clientTimeZoneOffset:t,vsid:n,sessionId:r,monetizationModel:i,contentId:a,contentIdType:o,contentTypeId:s,multiplex:d,streamingType:c}}adContextData(e){let t=e["ad-params"]();return(0,D.K)(t)&&(t=JSON.stringify(t)),{adPosition:e["ad-position"](),adSource:e["ad-source"](),adRequestId:e["ad-request-id"](),adSessionId:e["ad-session-id"](),adVastUrl:e["ad-vast-url"](),adParams:t}}adPlaybackData(e){return{adFrameTimestamp:e["ad-frame-timestamp"]()}}adCreativeData(e){return{adCreativeId:e["ad-creative-id"](),adBannerId:e["ad-banner-id"](),adId:e["ad-id"](),adMediafileUrl:e["ad-mediafile-url"](),adMediafileType:e["ad-mediafile-type"](),adSkippable:Boolean(e["ad-skippable"]()),adPodPosition:e["ad-pod-position"]()}}adData(e){return Object.assign(Object.assign(Object.assign(Object.assign({},this.standardAdData),this.adContextData(e)),this.adPlaybackData(e)),this.adCreativeData(e))}get standardBufferingData(){const{bufferingSec:e,bufferingCount:t}=this;return{bufferingSec:e,bufferingCount:t}}}class M{constructor(e){this.evgen=e,this.datapoolInternal=null,this.data=new R}set datapool(e){this.datapoolInternal=e,this.data.datapool=e}get datapool(){return this.datapoolInternal}setTrackingData(e){this.data.trackingData=e}init(){}start(){var e,t,n;const{clientTimestamp:r,clientTimeZoneOffset:i,vsid:a,sessionId:o,contentId:s,contentIdType:d,contentTypeId:c}=this.data,l=Number(null!==(n=null===(t=null===(e=this.datapool)||void 0===e?void 0:e["initial-buffering-time"])||void 0===t?void 0:t.call(e))&&void 0!==n?n:"0");(0,P.Q0)(this.evgen,{clientTimestamp:r,clientTimeZoneOffset:i,vsid:a,sessionId:o,contentId:s,contentIdType:d,contentTypeId:c,initBeforeStreamOrAdMsec:l,initBufferingStreamOrAdMsec:l})}end(){var e,t,n,r,i,a;(0,P.aN)(this.evgen,Object.assign(Object.assign(Object.assign({},this.data.standardData),this.data.standardBufferingData),{contentViewtimeSec:Number(null===(t=null===(e=this.datapool)||void 0===e?void 0:e["watched-time"])||void 0===t?void 0:t.call(e))||0,adViewtimeSec:Number(null===(r=null===(n=this.datapool)||void 0===n?void 0:n["client-ad-sec"])||void 0===r?void 0:r.call(n))||0,pauseSec:Number(null===(a=null===(i=this.datapool)||void 0===i?void 0:i.pause_sec)||void 0===a?void 0:a.call(i))||0}))}prerollStart(){}prerollEnd(){}setSource(){}sourceStart(){}play(){(0,P.dJ)(this.evgen,Object.assign({},this.data.standardData))}pause(){(0,P.Lr)(this.evgen,Object.assign({},this.data.standardData))}seek(){}firstQuartile(){}midpoint(){}thirdQuartile(){}viewed(e){let{config:{percent:t},last:n}=e;n&&(0,P.Mv)(this.evgen,Object.assign(Object.assign({},this.data.standardData),{viewedPercent:t}))}heartbeat(e){var t,n,r,i,a,o;switch(e.config.heartbeatType){case"multiplex":(0,P.BL)(this.evgen,Object.assign(Object.assign(Object.assign({},this.data.standardData),this.data.standardBufferingData),{contentViewtimeSec:Number(null===(n=null===(t=this.datapool)||void 0===t?void 0:t["watched-time"])||void 0===n?void 0:n.call(t))||0,adViewtimeSec:Number(null===(i=null===(r=this.datapool)||void 0===r?void 0:r["client-ad-sec"])||void 0===i?void 0:i.call(r))||0,pauseSec:Number(null===(o=null===(a=this.datapool)||void 0===a?void 0:a.pause_sec)||void 0===o?void 0:o.call(a))||0}));break;case"preroll":break;default:(0,P.mw)(this.evgen,Object.assign(Object.assign({},this.data.standardData),{heartbeatPeriodSec:e.config.delay/1e3}))}}watchedTime(e){var t;1===e.config.offset?(0,P.ec)(this.evgen,Object.assign({},this.data.standardData)):(0,P.fQ)(this.evgen,Object.assign(Object.assign({},this.data.standardData),{viewedSec:(0,a.X)(null!==(t=e.config.offset)&&void 0!==t?t:0)}))}error(e){var t;(0,P.GC)(this.evgen,Object.assign(Object.assign({},this.data.standardData),{errorType:(t=e["error-category"](),t=t.toUpperCase(),A[t]?A[t]:t.includes("SKIN")?O.cS.Playback:O.cS.Unknown),errorTitle:e["error-title"](),errorMessage:e["error-message"]()}))}adPodStart(e){!function(e,t){const{adVastUrl:n="none",adParams:r="none"}=t,i=(0,k.w6)(1),a=w(w({},t),{},{adVastUrl:n,adParams:r,_meta:i});e.trackEvent("Ad.Video.Started",a)}(this.evgen,Object.assign({},this.data.adData(e)))}adPodEnd(e){!function(e,t){const{adVastUrl:n="none",adParams:r="none"}=t,i=(0,k.w6)(1),a=w(w({},t),{},{adVastUrl:n,adParams:r,_meta:i});e.trackEvent("Ad.Video.Finished",a)}(this.evgen,Object.assign({},this.data.adData(e)))}adPodSkip(e){!function(e,t){const{adVastUrl:n="none",adParams:r="none"}=t,i=(0,k.w6)(1),a=w(w({},t),{},{adVastUrl:n,adParams:r,_meta:i});e.trackEvent("Ad.Video.Skipped",a)}(this.evgen,Object.assign({},this.data.adData(e)))}adRequest(e){!function(e,t){const{adVastUrl:n="none",adParams:r="none"}=t,i=(0,k.w6)(1),a=w(w({},t),{},{adVastUrl:n,adParams:r,_meta:i});e.trackEvent("Ad.Requested",a)}(this.evgen,Object.assign(Object.assign({},this.data.standardAdData),this.data.adContextData(e)))}adLoad(e){!function(e,t){const{adVastUrl:n="none",adParams:r="none"}=t,i=(0,k.w6)(1),a=w(w({},t),{},{adVastUrl:n,adParams:r,_meta:i});e.trackEvent("Ad.Loaded",a)}(this.evgen,Object.assign(Object.assign({},this.data.standardAdData),this.data.adContextData(e)))}adMediaFileLoad(e){!function(e,t){const{adVastUrl:n="none",adParams:r="none"}=t,i=(0,k.w6)(1),a=w(w({},t),{},{adVastUrl:n,adParams:r,_meta:i});e.trackEvent("Ad.Mediafile.Loaded",a)}(this.evgen,Object.assign(Object.assign(Object.assign({},this.data.standardAdData),this.data.adContextData(e)),this.data.adCreativeData(e)))}adImpressionMrc(e){!function(e,t){const{adVastUrl:n="none",adParams:r="none"}=t,i=(0,k.w6)(1),a=w(w({},t),{},{adVastUrl:n,adParams:r,_meta:i});e.trackEvent("Ad.Video.ImpressionMRC",a)}(this.evgen,Object.assign({},this.data.adData(e)))}adFirstQuartile(){}adMidpoint(){}adThirdQuartile(){}adViewed(e){let{viewedPercent:t,data:n}=e;!function(e,t){const{adVastUrl:n="none",adParams:r="none"}=t,i=(0,k.w6)(1),a=w(w({},t),{},{adVastUrl:n,adParams:r,_meta:i});e.trackEvent("Ad.Video.PercentViewed",a)}(this.evgen,Object.assign(Object.assign({},this.data.adData(n)),{viewedPercent:t}))}adWindowStart(e){!function(e,t){const{adCampaignId:n="none"}=t,r=(0,k.w6)(1),i=w(w({},t),{},{adCampaignId:n,_meta:r});e.trackEvent("Ad.Window.Started",i)}(this.evgen,Object.assign(Object.assign({},this.data.standardAdData),{cueTimestamp:e["cue-timestamp"](),adContentSwitchTimestamp:e["ad-content-switch-timestamp"](),adCampaignId:e["ad-campaign-id"]()}))}adWindowEnd(e){!function(e,t){const{adCampaignId:n="none"}=t,r=(0,k.w6)(1),i=w(w({},t),{},{adCampaignId:n,_meta:r});e.trackEvent("Ad.Window.Finished",i)}(this.evgen,Object.assign(Object.assign({},this.data.standardAdData),{cueTimestamp:e["cue-timestamp"](),adContentSwitchTimestamp:e["ad-content-switch-timestamp"](),adCampaignId:e["ad-campaign-id"]()}))}adPodClick(e){!function(e,t){const{adVastUrl:n="none",adParams:r="none"}=t,i=(0,k.w6)(1),a=w(w({},t),{},{adVastUrl:n,adParams:r,_meta:i});e.trackEvent("Ad.Video.Navigated",a)}(this.evgen,Object.assign({},this.data.adData(e)))}adError(e){!function(e,t){const{adVastUrl:n="none",adParams:r="none",errorTitle:i="unknown",errorMessage:a="unknown"}=t,o=(0,k.w6)(1),s=w(w({},t),{},{adVastUrl:n,adParams:r,errorTitle:i,errorMessage:a,_meta:o});e.trackEvent("Ad.ErrorRaised",s)}(this.evgen,Object.assign({errorType:e["error-type"](),errorTitle:e["error-title"](),errorMessage:e["error-message"]()},this.data.adData(e)))}adNotFound(e){!function(e,t){const{adVastUrl:n="none",adParams:r="none"}=t,i=(0,k.w6)(1),a=w(w({},t),{},{adVastUrl:n,adParams:r,_meta:i});e.trackEvent("Ad.NotFound",a)}(this.evgen,Object.assign(Object.assign({},this.data.standardAdData),this.data.adContextData(e)))}tvisCreativeStart(){!function(e,t){const n=(0,k.w6)(1),r=C(C({},t),{},{_meta:n});e.trackEvent("AdInteractive.Started",r)}(this.evgen,Object.assign({},this.data.standardAdData))}tvisCreativeEnd(){!function(e,t){const n=(0,k.w6)(1),r=C(C({},t),{},{_meta:n});e.trackEvent("AdInteractive.Finished",r)}(this.evgen,Object.assign({},this.data.standardAdData))}tvisCreativeNavigated(){!function(e,t){const n=(0,k.w6)(1),r=C(C({},t),{},{_meta:n});e.trackEvent("AdInteractive.Navigated",r)}(this.evgen,Object.assign({},this.data.standardAdData))}tvisCreativeSkipped(){!function(e,t){const n=(0,k.w6)(1),r=C(C({},t),{},{_meta:n});e.trackEvent("AdInteractive.Skipped",r)}(this.evgen,Object.assign({},this.data.standardAdData))}tvisCreativeExpanded(){!function(e,t){const n=(0,k.w6)(1),r=C(C({},t),{},{_meta:n});e.trackEvent("AdInteractive.Expanded",r)}(this.evgen,Object.assign({},this.data.standardAdData))}tvisCreativeNotFound(){!function(e,t){const n=(0,k.w6)(1),r=C(C({},t),{},{_meta:n});e.trackEvent("AdInteractive.NotFound",r)}(this.evgen,Object.assign({},this.data.standardAdData))}tvisError(e){!function(e,t){const{errorTitle:n="unknown",errorMessage:r="unknown"}=t,i=(0,k.w6)(1),a=C(C({},t),{},{errorTitle:n,errorMessage:r,_meta:i});e.trackEvent("AdInteractive.ErrorRaised",a)}(this.evgen,Object.assign(Object.assign({},this.data.standardAdData),{errorType:e["error-type"](),errorTitle:e["error-title"](),errorMessage:e["error-message"]()}))}tvisRequestNoWrapper(){!function(e,t){const n=(0,k.w6)(1),r=C(C({},t),{},{_meta:n});e.trackEvent("AdInteractive.Requested",r)}(this.evgen,Object.assign({},this.data.standardAdData))}}class N{constructor(){this.datapoolInternal=null;const e=(0,k.E2)(...arguments);this.ottSessionsWrapper=new M(e)}setTrackingData(e){this.ottSessionsWrapper.setTrackingData(e)}sendEvent(e){var t;switch(null===(t=this.log)||void 0===t||t.call(this,"sending event",e),e.name){case"viewed":case"heartbeat":case"watchedTime":case"error":case"adError":case"adPodStart":case"adPodEnd":case"adPodSkip":case"adPodClick":case"adRequest":case"adLoad":case"adImpressionMrc":case"adMediaFileLoad":case"adNotFound":case"adWindowStart":case"adWindowEnd":case"adViewed":case"tvisError":this.ottSessionsWrapper[e.name](e);break;default:this.ottSessionsWrapper[e.name]()}}get datapool(){return this.ottSessionsWrapper.datapool}set datapool(e){this.ottSessionsWrapper.datapool=e}set log(e){this._log=e,this.ottSessionsWrapper.log=e}get log(){return this._log}}class V{constructor(e){this.senders=e,this.datapoolInternal=null}sendEvent(e){this.senders.forEach((t=>t.sendEvent(e)))}set datapool(e){this.datapoolInternal=e,this.senders.forEach((t=>{t.datapool=e}))}get datapool(){return this.datapoolInternal}}n(29907)},37421:function(e,t,n){"use strict";n.d(t,{P:function(){return u}});var r=n(95941),i=n(96514),a=n(5692),o=n(91771),s=n(67814);function d(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(const i of n)if(e[i]!==t[i])return!1;return!0}function c(e){let{url:t,data:n,contentType:r}=e;const i=((e,t)=>{if("function"!==typeof navigator.sendBeacon)return!1;try{return navigator.sendBeacon(e,t)}catch(n){return!1}})(t,r?new Blob([n],{type:r}):n);if(i)return;const a=new XMLHttpRequest;a.open("POST",t),a.withCredentials=!0,void 0!==r&&a.setRequestHeader("Content-Type",r),a.send(n)}var l=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};class u{constructor(e){this.logger=e,this.trackingEvents=(0,o.cN)(),this.datapool=null}sendEvent(e){const{name:t}=e,n=l(e,["name"]);if("adViewed"!==t)if("adRequest"!==t&&"adLoad"!==t&&"adMediaFileLoad"!==t&&"adImpressionMrc"!==t&&"adFirstQuartile"!==t&&"adMidpoint"!==t&&"adThirdQuartile"!==t&&"adWindowStart"!==t&&"adWindowEnd"!==t&&"adPodStart"!==t&&"adPodEnd"!==t&&"adPodSkip"!==t&&"adPodClick"!==t&&"error"!==t&&"pause"!==t&&"adError"!==t&&"seek"!==t&&"prerollStart"!==t&&"prerollEnd"!==t)if("heartbeat"!==t)if("watchedTime"!==t)if("viewed"!==t)"end"!==t&&"start"!==t?n?this.parseAndTrackUrls(this.trackingEvents[t],n):this.parseAndTrackUrls(this.trackingEvents[t]):n.visibilityChange||this.parseAndTrackUrls(this.trackingEvents[t]);else{const t=this.trackingEvents.viewed.filter((t=>d(t[1],e.config))).map((e=>e[0]));this.parseAndTrackUrls(t)}else{const t=this.trackingEvents.watchedTime.filter((t=>t[1].offset===e.config.offset)).map((e=>e[0]));this.parseAndTrackUrls(t)}else{const t=this.trackingEvents.heartbeat.filter((t=>d(t[1],e.config))).map((e=>e[0]));this.parseAndTrackUrls(t)}else this.parseAndTrackUrls(this.trackingEvents[t],n)}setTrackings(e){this.trackingEvents=(0,i.U)(e.trackingEvents)}parseAndTrackUrls(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Object.assign(Object.assign({},this.datapool),t);e.forEach((e=>{const t=r.Pg.reduce(((e,t)=>{const r=n[t];return void 0===r?e:function(e,t,n){const r=(0,s.K)(n)?JSON.stringify(n):String(n);return e.replace(new RegExp((0,s.K)(n)?`"{{${t}}}"`:`{{${t}}}`,"gm"),encodeURIComponent(r))}(e,t,r())}),e);this.sendTrackingRequest(t)}))}sendTrackingRequest(e){var t;if((0,a.h)(e)){const n=function(e,t){const n=new RegExp(`[?&]${e}=*([^&#]*)`,"g");let r=null,i=null;for(;i=n.exec(t);)r=i;return r&&"string"===typeof r[1]?decodeURIComponent(r[1]):void 0}("data",e);let r=e.split("?")[0];if(this.logger){const e=JSON.parse(null!==n&&void 0!==n?n:"{}");r=null!==(t=this.logger(e.eventType,e))&&void 0!==t?t:r}c({url:r,data:`[${n}]`,contentType:"application/json;charset=utf-8"})}else!function(e){new Promise((t=>{const n=document.createElement("img");n.onload=()=>t(e),n.onerror=()=>t(null),n.src=e}))}(e)}}},76948:function(e,t,n){"use strict";n.d(t,{l:function(){return c},w:function(){return l}});const r=window.performance,i=r&&"function"===typeof r.now,a=r&&r.timing&&r.timing.navigationStart?r.timing.navigationStart:Date.now();let o=0;const s=i?()=>r.now():()=>(()=>{const e=Date.now()-a;return o=Math.max(e,o),o})();function d(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;const t=e();return()=>Math.max(0,e()-t)}class c{constructor(){this.value=0,this.measureTime=()=>0}start(){this.measureTime=d()}pause(){this.value=this.value+this.measureTime(),this.measureTime=()=>0}getTime(){return this.value+this.measureTime()}reset(){this.measureTime=d(),this.value=0}stop(){this.measureTime=()=>0,this.value=0}isRunning(){return this.measureTime()>0}popTime(){const e=this.getTime();return this.isRunning()?this.measureTime=d():this.measureTime=()=>0,this.value=0,e}}class l extends c{constructor(){super(...arguments),this._lastPoint=0}get lastPoint(){return this._lastPoint}lap(){this._lastPoint=this.getTime()}getDiff(){return this.getTime()-this._lastPoint}pause(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];super.pause(),e&&this.lap()}stop(){super.stop(),this._lastPoint=0}reset(){super.reset(),this._lastPoint=0}}},95941:function(e,t,n){"use strict";var r;n.d(t,{Pg:function(){return a},WT:function(){return i},FJ:function(){return s}}),function(e){e.vsid="vsid",e.dl="dl",e.random="random",e.timestamp="timestamp",e.fts="fts",e.vts="vts",e.watched_time="watched-time",e.video_time="video-time",e.device_type="device-type",e.device_type_mediascope="device-type-mediascope",e.fullscreen="fullscreen",e.duration="duration",e.old_position="old-position",e.error_title="error-title",e.error_type="error-type",e.error_message="error-message",e.error_category="error-category",e.audio_track_name="audio-track-name",e.audio_track_lang="audio-track-lang",e.text_track_name="text-track-name",e.text_track_lang="text-track-lang",e.muted="muted",e.drm_supported="drm-supported",e.drm_type="drm-type",e.bitrate_video="bitrate-video",e.bitrate_audio="bitrate-audio",e.buffering_duration="buffering-duration",e.buffering_count="buffering-count",e.initial_buffering_time="initial-buffering-time",e.ad_position="ad-position",e.ad_source="ad-source",e.ad_request_id="ad-request-id",e.ad_vast_url="ad-vast-url",e.ad_params="ad-params",e.ad_frame_timestamp="ad-frame-timestamp",e.cue_timestamp="cue-timestamp",e.ad_content_switch_timestamp="ad-content-switch-timestamp",e.ad_creative_id="ad-creative-id",e.ad_banner_id="ad-banner-id",e.ad_id="ad-id",e.ad_mediafile_url="ad-mediafile-url",e.ad_mediafile_type="ad-mediafile-type",e.ad_vast_empty="ad-vast-empty",e.ad_skippable="ad-skippable",e.ad_pod_position="ad-pod-position",e.ad_campaign_id="ad-campaign-id",e.client_ad_sec="client-ad-sec",e.pause_sec="pause_sec"}(r||(r={}));const i=1e3,a=(o=r,Object.values(o));var o;const s=/^https:\/\/tracking(-testing|\.prestable|\.testing)?\.(ott\.yandex\.(ru|net)|movies\.(yango|funtechservices)\.com)\/v\d+\/watch-batch/},96514:function(e,t,n){"use strict";n.d(t,{U:function(){return i}});var r=n(91771);function i(e){if(!Array.isArray(e))return e;const t=(0,r.cN)();return e.forEach((e=>{Object.keys(e).forEach((n=>{Array.isArray(t[n])||(t[n]=[]),t[n].push(...e[n])}))})),t}},5692:function(e,t,n){"use strict";n.d(t,{h:function(){return i}});var r=n(95941);const i=e=>r.FJ.test(e)},91771:function(e,t,n){"use strict";function r(e){return"number"===typeof e&&isFinite(e)}n.d(t,{cN:function(){return s},Ji:function(){return l}});var i=n(67814);function a(e){if(!(0,i.K)(e))return!1;const{utcStart:t,utcEnd:n}=e;return(void 0===t||r(t))&&(void 0===n||r(n))}const o={trackingEvents:[{init:[],start:[],end:[],setSource:[],prerollStart:[],prerollEnd:[],sourceStart:[],play:[],pause:[],seek:[],firstQuartile:[],midpoint:[],thirdQuartile:[],viewed:[],heartbeat:[],watchedTime:[],error:[],adRequest:[],adLoad:[],adMediaFileLoad:[],adImpressionMrc:[],adFirstQuartile:[],adMidpoint:[],adThirdQuartile:[],adWindowStart:[],adWindowEnd:[],adStart:[],adEnd:[],adError:[],adPodStart:[],adPodEnd:[],adPodSkip:[],adPodClick:[],adNotFound:[],tvisCreativeStart:[],tvisCreativeEnd:[],tvisCreativeExpanded:[],tvisCreativeNavigated:[],tvisCreativeNotFound:[],tvisCreativeSkipped:[],tvisError:[],tvisRequestNoWrapper:[]}]};function s(){return{init:[],start:[],end:[],setSource:[],prerollStart:[],prerollEnd:[],sourceStart:[],play:[],pause:[],seek:[],firstQuartile:[],midpoint:[],thirdQuartile:[],viewed:[],heartbeat:[],watchedTime:[],error:[],adRequest:[],adLoad:[],adMediaFileLoad:[],adImpressionMrc:[],adFirstQuartile:[],adMidpoint:[],adThirdQuartile:[],adWindowStart:[],adWindowEnd:[],adStart:[],adEnd:[],adError:[],adPodStart:[],adPodEnd:[],adPodSkip:[],adPodClick:[],adNotFound:[],tvisCreativeStart:[],tvisCreativeEnd:[],tvisCreativeExpanded:[],tvisCreativeNavigated:[],tvisCreativeNotFound:[],tvisCreativeSkipped:[],tvisError:[],tvisRequestNoWrapper:[]}}function d(e){return Array.isArray(e)?e.filter((e=>"string"===typeof e)):[]}function c(e){if(!(0,i.K)(e))return{init:[],start:[],end:[],setSource:[],prerollStart:[],prerollEnd:[],sourceStart:[],play:[],pause:[],seek:[],firstQuartile:[],midpoint:[],thirdQuartile:[],viewed:[],heartbeat:[],watchedTime:[],error:[],adRequest:[],adLoad:[],adMediaFileLoad:[],adImpressionMrc:[],adFirstQuartile:[],adMidpoint:[],adThirdQuartile:[],adWindowStart:[],adWindowEnd:[],adStart:[],adEnd:[],adError:[],adPodStart:[],adPodEnd:[],adPodSkip:[],adPodClick:[],adNotFound:[],tvisCreativeStart:[],tvisCreativeEnd:[],tvisCreativeExpanded:[],tvisCreativeNavigated:[],tvisCreativeNotFound:[],tvisCreativeSkipped:[],tvisError:[],tvisRequestNoWrapper:[]};const{init:t,start:n,end:o,prerollStart:s,prerollEnd:c,setSource:l,sourceStart:u,play:p,pause:h,seek:f,firstQuartile:m,midpoint:v,thirdQuartile:g,viewed:b,heartbeat:y,watchedTime:k,error:P,adRequest:T,adLoad:S,adStart:w,adEnd:E,adError:C,adPodStart:O,adPodEnd:_,adPodSkip:A,adPodClick:I,adNotFound:x,tvisCreativeStart:D,tvisCreativeEnd:R,tvisCreativeExpanded:M,tvisCreativeNavigated:N,tvisCreativeNotFound:V,tvisCreativeSkipped:j,tvisError:L,tvisRequestNoWrapper:B,adMediaFileLoad:W,adImpressionMrc:U,adFirstQuartile:F,adMidpoint:q,adThirdQuartile:Z,adWindowStart:Q,adWindowEnd:H}=e;return{init:d(t),start:d(n),end:d(o),setSource:d(l),prerollStart:d(s),prerollEnd:d(c),sourceStart:d(u),play:d(p),pause:d(h),seek:d(f),firstQuartile:d(m),midpoint:d(v),thirdQuartile:d(g),heartbeat:($=y,Array.isArray($)?$.filter((e=>{if(!Array.isArray(e)||2!==e.length)return!1;const[t,n]=e;if("string"!==typeof t||!a(n))return!1;const{offset:i,delay:o,callsCount:s}=n;return"number"===typeof o&&(void 0===i||r(i))&&(void 0===s||"number"===typeof s&&s>0)})):[]),viewed:(Y=b,Array.isArray(Y)?Y.filter((e=>{if(Array.isArray(e)&&2===e.length){const[t,n]=e;if("string"!==typeof t)return!1;if(!(0,i.K)(n))return!1;{const{percent:e}=n;if("number"!==typeof e)return!1}return!0}return!1})):[]),watchedTime:(z=k,Array.isArray(z)?z.filter((e=>{if(!Array.isArray(e)||2!==e.length)return!1;const[t,n]=e;if("string"!==typeof t||!(0,i.K)(n))return!1;const{offset:r}=n;return a(n)&&"number"===typeof r})):[]),error:d(P),adRequest:d(T),adLoad:d(S),adMediaFileLoad:d(W),adImpressionMrc:d(U),adFirstQuartile:d(F),adMidpoint:d(q),adThirdQuartile:d(Z),adWindowStart:d(Q),adWindowEnd:d(H),adStart:d(w),adEnd:d(E),adError:d(C),adPodStart:d(O),adPodEnd:d(_),adPodSkip:d(A),adPodClick:d(I),adNotFound:d(x),tvisCreativeStart:d(D),tvisCreativeEnd:d(R),tvisCreativeExpanded:d(M),tvisCreativeNavigated:d(N),tvisCreativeNotFound:d(V),tvisCreativeSkipped:d(j),tvisError:d(L),tvisRequestNoWrapper:d(B)};var z,Y,$}function l(e){if(void 0===e||!(0,i.K)(e))return o;const{trackingEvents:t}=e;return{trackingEvents:(Array.isArray(t)?t:[t]).map(c)}}},29631:function(e,t,n){"use strict";n.d(t,{T:function(){return h}});class r{constructor(e){let{checkActionAvailable:t}=e;this.awaitingTasks=[],this.checkActionAvailable=t}actIfPossible(){this.checkActionAvailable()&&(this.awaitingTasks.forEach((e=>e())),this.awaitingTasks.length=0)}addTask(e){this.awaitingTasks.push(e),this.actIfPossible()}}var i=n(76948),a=n(95941);const o=e=>{let{offset:t,utcStart:n,utcEnd:r}=e;return{offset:t,utcStart:n,utcEnd:r,delay:1/0,callsCount:1}};var s=n(74319),d=n(29907);class c{setTimeout(e,t){const n=window.setTimeout(e,t);return()=>window.clearTimeout(n)}now(){return Date.now()}}class l{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.time=e,this.tasks=[]}setTimeout(e,t){const n=this.time+t,r={task:e,time:n,isCanceled:!1,isRunned:!1};return((e,t,n)=>{let r=0;for(;r<e.length&&!n(e[r]);r+=1);e.splice(r,0,t)})(this.tasks,r,(e=>n<e.time)),t||window.setTimeout((()=>this.runTask(r)),0),()=>{r.isCanceled=!0}}setTime(e){if(isNaN(e))return;let t=0;for(;t<this.tasks.length&&!(e<this.tasks[t].time);t+=1)this.runTask(this.tasks[t]);this.time=e,this.tasks.splice(0,t)}now(){return this.time}tick(e){this.setTime(this.time+e)}reset(){this.time=0,this.tasks=[]}runTask(e){e.isRunned||e.isCanceled||(e.isRunned=!0,this.time=e.time,e.task())}}class u{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new c;this.stopped=!0,this.lastNow=0,this.lastTimeout=0,this.restTime=0,this.destroyed=!1,this.isFirstKnock=!0,this.count=0,this.distributionFunction=e,this.clock=t}setEnabled(e){return e?this.start():this.stop(),this}stop(){return this.stopped||(this.stopped=!0,this.cancelTimeout(),this.restTime=Math.max(this.restTime-(this.clock.now()-this.lastKnockTime),0)),this}start(){return this.stopped&&!this.destroyed&&(this.stopped=!1,this.lastKnockTime=this.clock.now(),this.cancel=this.clock.setTimeout((()=>{this.knock(this.lastNow+this.lastTimeout)}),this.restTime)),this}destroy(){this.cancelTimeout(),this.stopped=!0,this.destroyed=!0}knock(e){this.lastNow=e,this.lastKnockTime=this.clock.now(),this.isFirstKnock?this.isFirstKnock=!1:this.count+=1;const t=this.distributionFunction({time:e,count:this.count});this.restTime=t,this.lastTimeout=t,this.stopped||this.destroyed||(this.cancel=this.clock.setTimeout((()=>{this.knock(e+t)}),t))}cancelTimeout(){this.cancel&&this.cancel(),this.cancel=void 0}}var p=n(33355);class h{constructor(e){this.MACROS={dl:()=>window.document.referrer||window.location&&window.location.href||"",random:()=>Math.floor(Math.random()*Math.pow(10,16)),timestamp:()=>String(Date.now()),vts:()=>Math.round((0,p.X)(Date.now())),fts:()=>{const e=this.player.getVideoType();return Math.floor("VOD"===e?1e3*this.player.getCurrentTime():this.player.getUtcPosition())},"watched-time":()=>Math.floor((0,p.X)(this.watchedTimeClock.now()-(this.prevWatchedTime||0))),"video-time":()=>Math.floor(this.player.getCurrentTime()),"device-type":()=>this.player.getDeviceType().kp,"device-type-mediascope":()=>this.player.getDeviceType().mediascope,fullscreen:()=>this.player.getIsFullscreen()?"1":"0",duration:()=>Math.floor(this.player.getDuration()),vsid:()=>this.player.getVsid(),"audio-track-name":()=>{const e=this.player.getAudioTrack();return e?e.name:""},"audio-track-lang":()=>{const e=this.player.getAudioTrack();return e?e.lang:""},"text-track-name":()=>{const e=this.player.getTextTrack();return e?e.name:""},"text-track-lang":()=>{const e=this.player.getTextTrack();return e?e.lang:""},muted:()=>this.player.getMuted()?"1":"0","drm-supported":()=>this.player.getIsDrmSupported()?"1":"0","ad-position":()=>{const{type:e}=this.player.getAdState();return(0,s.rZ)(e)},"client-ad-sec":()=>this.adController?Math.floor(this.adController.adViewtime):0,"drm-type":()=>{const e=this.player.getCurrentDrmType();return e&&"clear"!==e?e:""},"bitrate-video":()=>{var e;const t=null===(e=this.player.getVideoTrack())||void 0===e?void 0:e.bitrate;return t?Math.floor(t):""},"bitrate-audio":()=>{var e;const t=null===(e=this.player.getAudioTrack())||void 0===e?void 0:e.bitrate;return t?Math.floor(t):""},"initial-buffering-time":()=>{var e;return null!==(e=this.initialBufferingTime)&&void 0!==e?e:""},"buffering-duration":()=>Math.floor(this.bufferedInfo.time),"buffering-count":()=>this.bufferedInfo.count,pause_sec:()=>Math.floor((0,p.X)(this.pauseSecTimeMeasurer.getTime()))},this.initialBufferingTimeMeasurer=new i.l,this.bufferingTimeMeasurer=new i.w,this.pauseSecTimeMeasurer=new i.l,this.prerollTimeMeasurer=new i.l,this.watchedTimeClock=new l,this.prevWatchedTime=void 0,this.prerollClock=new l,this.heartbeatTimers=[],this.prerollHeartbeatTimers=[],this.watchedTimeTimers=[],this.bufferedInfo={count:0,time:0},this.onSourceStart=void 0,this.adWindowTracker=(()=>{let e,t;return{onStarted(n){let{breakWindow:r,adContentSwitchTimestamp:i}=n;e=r,t=i},onEnded(){e=null,t=null},get adWindowData(){var n,r;return{cueTimestamp:null!==(n=null===e||void 0===e?void 0:e.start.getTime())&&void 0!==n?n:0,adContentSwitchTimestamp:null!==t&&void 0!==t?t:0,adCampaignId:null!==(r=null===e||void 0===e?void 0:e.adCampaignId)&&void 0!==r?r:"none'"}}}})(),this.trackingEventsConfig=d.u,this.prerollActionManager=new r({checkActionAvailable:()=>!this.isPrerollPlaying}),this._adController=null,this.sessionState="closed",this.sender=e.sender,this.player=e.player,this.tvisController=e.tvisController,this.adController=e.adController,this.sender.datapool=this.MACROS,this.player.on("destroyed",(()=>{this.destroy()}))}destroy(){var e;this.sessionStop(),this.resetTrackings(),this.player.off("destroyed"),this.player.destroy(),null===(e=this.adController)||void 0===e||e.destroy(),this.adController=null}subscribeOnWatchedTimeChange(){this.player.on("watchedTimeChange",(e=>{let{watchedTime:t}=e;if(isNaN(t))return;const n=this.prerollTimeMeasurer.getTime();this.prerollClock.setTime(n),t*a.WT-n>0&&this.watchedTimeClock.setTime(t*a.WT-n)}))}isStreamPlaying(){return"play"===this.player.getPlayingState()&&!this.isAdPlaying()}isAdPlaying(){return!0===this.player.getAdState().playing}handleMultiplexEvent(e){var t;this.updateBufferedInfoOnSendEvent(),this.sender.sendEvent(e),this.clearBufferedInfo(),this.prevWatchedTime=this.watchedTimeClock.now(),null===(t=this.adController)||void 0===t||t.popAdViewtime(),this.pauseSecTimeMeasurer.popTime()}resetTrackings(){var e,t;[this.heartbeatTimers,this.watchedTimeTimers,this.prerollHeartbeatTimers].forEach((e=>{e.forEach((e=>e.destroy())),e.length=0})),this.watchedTimeClock.reset(),this.prerollClock.reset(),null===(e=this.adController)||void 0===e||e.stop(),this.initialBufferingTimeMeasurer.stop(),this.bufferingTimeMeasurer.stop(),this.pauseSecTimeMeasurer.stop(),this.prerollTimeMeasurer.stop(),this.clearBufferedInfo(),this.initialBufferingTime=void 0,this.prevWatchedTime=void 0,this.onSourceStart=void 0,this.player.offAll(),this.player.on("destroyed",(()=>{this.destroy()})),null===(t=this.tvisController)||void 0===t||t.offAll()}clearBufferedInfo(){this.bufferedInfo={count:0,time:0}}updateBufferedInfo(e){this.bufferedInfo.count++,this.bufferedInfo.time+=e}updateBufferedInfoOnSendEvent(){const e=this.bufferingTimeMeasurer.getDiff();e>0&&(this.bufferingTimeMeasurer.lap(),this.updateBufferedInfo((0,p.X)(e)))}createMeasureBufferingTimeOnStateChangeHandler(){let e=!1;return t=>{let{state:n}=t;if(this.isAdPlaying())return this.bufferingTimeMeasurer.reset(),void(e=!1);if("buffering"===n)e=!0,this.bufferingTimeMeasurer.start();else if(e){e=!1;const t=(0,p.X)(this.bufferingTimeMeasurer.getDiff());this.bufferingTimeMeasurer.pause(),this.updateBufferedInfo(t)}}}get prerollDurationMs(){return this.trackingEventsConfig.prerollDuration}get isPrerollPlaying(){return this.player.getCurrentTime()<this.prerollDurationMs/1e3}get adController(){return this._adController}set adController(e){this._adController&&(this._adController.offAll(),this._adController.destroy()),this._adController=e,this._adController&&this.subscribeOnAdEvents()}subscribeOnAdEvents(){if(this.adController){this.adController.on("adRequest",(e=>{this.sender.sendEvent(Object.assign({name:"adRequest"},e))})),this.adController.on("adLoad",(e=>{this.sender.sendEvent(Object.assign({name:"adLoad"},e))})),this.adController.on("adMediaFileLoad",(e=>{this.sender.sendEvent(Object.assign({name:"adMediaFileLoad"},e))})),this.adController.on("adImpressionMrc",(e=>{this.sender.sendEvent(Object.assign({name:"adImpressionMrc"},e))})),this.adController.on("adViewed",(e=>{switch(this.sender.sendEvent(Object.assign({name:"adViewed"},e)),e.viewedPercent){case 25:this.sender.sendEvent(Object.assign({name:"adFirstQuartile"},e.data));break;case 50:this.sender.sendEvent(Object.assign({name:"adMidpoint"},e.data));break;case 75:this.sender.sendEvent(Object.assign({name:"adThirdQuartile"},e.data))}})),this.adController.on("adError",(e=>{this.sender.sendEvent(Object.assign({name:"adError"},e))}));let e=!1,t=!1;this.adController.on("adPodStart",(n=>{e=!0,t=!1,this.sender.sendEvent(Object.assign({name:"adPodStart"},n))})),this.adController.on("adPodClick",(e=>{this.sender.sendEvent(Object.assign({name:"adPodClick"},e))})),this.adController.on("adPodSkip",(e=>{t=!0,this.sender.sendEvent(Object.assign({name:"adPodSkip"},e))})),this.adController.on("adPodEnd",(n=>{!t&&e?(e=!1,this.sender.sendEvent(Object.assign({name:"adPodEnd"},n))):e=!1})),this.adController.on("adNotFound",(e=>{this.sender.sendEvent(Object.assign({name:"adNotFound"},e))}));const n=()=>({"cue-timestamp":()=>this.adWindowTracker.adWindowData.cueTimestamp,"ad-content-switch-timestamp":()=>this.adWindowTracker.adWindowData.adContentSwitchTimestamp,"ad-campaign-id":()=>this.adWindowTracker.adWindowData.adCampaignId});this.adController.on("adWindowStart",(e=>{let{breakWindow:t}=e;var r,i,a;this.adWindowTracker.onStarted({breakWindow:t,adContentSwitchTimestamp:null!==(a=null===(i=(r=this.MACROS).fts)||void 0===i?void 0:i.call(r))&&void 0!==a?a:0}),this.sender.sendEvent(Object.assign({name:"adWindowStart"},n()))})),this.adController.on("adWindowEnd",(()=>{this.sender.sendEvent(Object.assign({name:"adWindowEnd"},n())),this.adWindowTracker.onEnded()}))}}prerollTimeMeasurerUpdate(){this.isStreamPlaying()&&this.isPrerollPlaying?this.prerollTimeMeasurer.isRunning()||this.prerollTimeMeasurer.start():this.prerollTimeMeasurer.isRunning()&&this.prerollTimeMeasurer.pause()}setTrackings(e){this.resetTrackings(),this.trackingEventsConfig=e,this.onSourceStart=function(e){let t=function(){const n=e.apply(this,arguments);return t=()=>n,n};return function(){return t.apply(this,arguments)}}((()=>this.sender.sendEvent({name:"sourceStart"}))),this.player.on("destroyStart",(()=>{this.sessionStop()})),this.player.on("currentTimeChange",this.createCurrentTimeChangeHandler()),this.player.on("stateChange",this.createMeasureBufferingTimeOnStateChangeHandler()),this.player.on("stateChange",this.createStateChangeHandler()),this.player.on("stateChange",(()=>this.prerollTimeMeasurerUpdate())),this.player.on("seek",(()=>this.prerollTimeMeasurerUpdate())),this.subscribeOnTvis(),this.subscribeOnError(),this.subscribeOnSeek(),this.subscribeOnReady(),this.subscribeOnSetSourceComplete(),this.subscribeOnWatchedTimeChange()}onStart(){const{watchedTime:e,heartbeat:t}=this.trackingEventsConfig;this.onSourceStart&&this.onSourceStart(),this.heartbeatTimers=t.filter((e=>"preroll"!==e.heartbeatType)).map((e=>this.createHeartbeatTimer("heartbeat",e))),this.watchedTimeTimers=e.map(o).map((e=>this.createHeartbeatTimer("watchedTime",e))),this.heartbeatTimers.concat(this.watchedTimeTimers).forEach((e=>e.start()))}onPrerollStart(){this.sender.sendEvent({name:"prerollStart"}),this.prerollHeartbeatTimers=this.trackingEventsConfig.heartbeat.filter((e=>"preroll"===e.heartbeatType)).map((e=>this.createPrerollHeartbeat(e))),this.prerollHeartbeatTimers.forEach((e=>e.start()))}onPrerollEnd(){this.sender.sendEvent({name:"prerollEnd"})}createPrerollHeartbeat(e){return new u((()=>(this.sender.sendEvent({name:"heartbeat",config:e}),e.delay)),this.prerollClock)}createHeartbeatTimer(e,t){const{utcStart:n,utcEnd:r,delay:i,offset:o=i,callsCount:s=1/0,isCalledDuringPause:d=!1,heartbeatType:c}=t;let l=0;const p=new u((()=>{const d=Math.round(this.player.getUtcPosition());return void 0!==n&&d<n||void 0!==r&&d>r?a.WT:0===l?(l+=1,o):("multiplex"===c?this.handleMultiplexEvent({name:"heartbeat",config:t}):this.sender.sendEvent({name:e,config:t}),l+=1,l>s?(p.destroy(),0):i)}),d?void 0:this.watchedTimeClock);return p}subscribeOnTvis(){this.subscribeOnTvisCreativeEnd(),this.subscribeOnTvisCreativeStart(),this.subscribeOnTvisCreativeExpanded(),this.subscribeOnTvisCreativeNavigated(),this.subscribeOnTvisCreativeNotFound(),this.subscribeOnTvisCreativeSkipped(),this.subscribeOnTvisError(),this.subscribeOnTvisRequestNoWrapper()}subscribeOnTvisCreativeStart(){var e;null===(e=this.tvisController)||void 0===e||e.on("tvisCreativeStart",(()=>{this.sender.sendEvent({name:"tvisCreativeStart"})}))}subscribeOnTvisCreativeEnd(){var e;null===(e=this.tvisController)||void 0===e||e.on("tvisCreativeEnd",(()=>{this.sender.sendEvent({name:"tvisCreativeEnd"})}))}subscribeOnTvisCreativeExpanded(){var e;null===(e=this.tvisController)||void 0===e||e.on("tvisCreativeExpanded",(()=>{this.sender.sendEvent({name:"tvisCreativeExpanded"})}))}subscribeOnTvisCreativeNotFound(){var e;null===(e=this.tvisController)||void 0===e||e.on("tvisCreativeNotFound",(()=>{this.sender.sendEvent({name:"tvisCreativeNotFound"})}))}subscribeOnTvisCreativeNavigated(){var e;null===(e=this.tvisController)||void 0===e||e.on("tvisCreativeNavigated",(()=>{this.sender.sendEvent({name:"tvisCreativeNavigated"})}))}subscribeOnTvisCreativeSkipped(){var e;null===(e=this.tvisController)||void 0===e||e.on("tvisCreativeSkipped",(()=>{this.sender.sendEvent({name:"tvisCreativeSkipped"})}))}subscribeOnTvisError(){var e;null===(e=this.tvisController)||void 0===e||e.on("tvisError",(e=>{this.sender.sendEvent(Object.assign({name:"tvisError"},e))}))}subscribeOnTvisRequestNoWrapper(){var e;null===(e=this.tvisController)||void 0===e||e.on("tvisRequestNoWrapper",(()=>{this.sender.sendEvent({name:"tvisRequestNoWrapper"})}))}subscribeOnError(){this.player.on("error",(e=>{let{error:t}=e;t.isFatal&&this.handleMultiplexEvent({name:"error","error-title":()=>String(t.code),"error-message":()=>t.message,"error-category":()=>t.category})}))}subscribeOnSeek(){this.player.on("seek",(e=>{let{seekObj:t}=e;this.sender.sendEvent({name:"seek","old-position":()=>Math.floor(t.oldPosition||0)})}))}subscribeOnReady(){this.player.on("ready",(()=>{this.prerollActionManager.addTask((()=>this.sender.sendEvent({name:"init"})))}))}subscribeOnSetSourceComplete(){this.player.on("setSourceComplete",(()=>{this.sender.sendEvent({name:"setSource"})}))}createCurrentTimeChangeHandler(){let e=[...this.trackingEventsConfig.viewed],t=!1,n=!1,r=!1,i=!1,a=!1,o=!1;return s=>{let{currentTime:d}=s;if(this.prerollTimeMeasurerUpdate(),!this.isStreamPlaying())return;this.prerollActionManager.actIfPossible(),!a&&d>0&&this.isPrerollPlaying&&(this.onPrerollStart(),a=!0),o||this.isPrerollPlaying||!a||(this.onPrerollEnd(),o=!0),!i&&d>0&&!this.isPrerollPlaying&&(this.onStart(),i=!0);const c=this.player.getDuration();if(!c)return;if("VOD"!==this.player.getVideoType())return;const l=(d-this.prerollDurationMs/1e3)/c;!t&&l>.25&&(this.sender.sendEvent({name:"firstQuartile"}),t=!0),!n&&l>.5&&(this.sender.sendEvent({name:"midpoint"}),n=!0),!r&&l>.5&&(this.sender.sendEvent({name:"thirdQuartile"}),r=!0);const u=e.findIndex(((t,n)=>n===e.length-1?l>t.percent/100:l>t.percent/100&&l<e[n+1].percent/100));e=e.filter(((e,t)=>!(l>e.percent/100)||(this.sender.sendEvent({name:"viewed",config:e,last:u===t}),!1)))}}createStateChangeHandler(){let e=!1,t=!1;return n=>{let{state:r}=n;if("end"===r)return this.heartbeatTimers.forEach((e=>e.stop())),t=!1,void this.sessionStop();if(!e)return void("play"===r?(this.initialBufferingTimeMeasurer.pause(),this.initialBufferingTime=Math.floor(this.initialBufferingTimeMeasurer.getTime()),this.sessionStart(),e=!0,t=!0):"buffering"===r&&this.initialBufferingTimeMeasurer.start());if(this.isAdPlaying())return;const i="play"===r||"buffering"===r&&t;i!==t&&"opened"===this.sessionState&&(t=i,i?(this.pauseSecTimeMeasurer.pause(),this.sender.sendEvent({name:"play"})):(this.sender.sendEvent({name:"pause"}),this.pauseSecTimeMeasurer.start()))}}sessionStart(){"closed"===this.sessionState&&(this.sessionState="opened",this.sender.sendEvent({name:"start"}))}sessionStop(){"opened"===this.sessionState&&(this.sessionState="closed",this.handleMultiplexEvent({name:"end"}))}}},29907:function(e,t,n){"use strict";n.d(t,{u:function(){return r}});const r={viewed:[],heartbeat:[],watchedTime:[],prerollDuration:0}},67814:function(e,t,n){"use strict";function r(e){const t=typeof e;return Boolean(e)&&("object"===t||"function"===t)}n.d(t,{K:function(){return r}})},33355:function(e,t,n){"use strict";n.d(t,{X:function(){return i}});var r=n(95941);function i(e){return e/r.WT}},47499:function(e,t,n){"use strict";n.d(t,{ZP:function(){return _e},iE:function(){return Oe}});var r="__VAL__";function i(e,t,n){void 0===t&&(t={});var i=(void 0===n?{}:n).macros,a=void 0===i?"{{".concat(r,"}}"):i,o={};Object.keys(t).forEach((function(e){var n=a.replace(r,e);o[n]=t[e]}));var s=new RegExp("(".concat(Object.keys(o).join("|"),")"),"ig");return("string"===typeof e?e:JSON.stringify(e)).replace(s,(function(e){return e in o?encodeURI(o[e]):e}))}var a,o=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},s=["yandexuid","position","serviceName","reqid","path","sid","uuid","kpId","kpTrailerId","contentTypeId","monetizationModel","puid","page","domain","vars","testIds","eventId","subProfileId","buildTimestamp","pathId","deviceId","appVersion","platformOs","platformOsVersionMajor","platformOsVersionMinor","platformVersion","platformVendor","platformModel","platformVendorDeviceId","platformName","psid","fromBlock","fromBlockPosition","fromBlockItemPosition","fromBlockAction","fromBlockMLSessionId","fromBlockStartPage","fromBlockEndPage","fromBlockExternalLink","isLive","deviceType","appName","deviceUuid","prepareStartupDataTime","browserName","browserVer","browserVerMajor","browserVerMinor","isMultiplexChannel","vitrinaTvChannelSlug","watchedTime","contentPackage","billingFeatureNames"],d=["setSource","init","error","adStart","adEnd","heartbeat","watchedTime","viewed"],c=o(o([],d,!0),["pause","play","end"],!1),l=o(o([],c,!0),["prerollStart","prerollEnd"],!1),u=o(o([],c,!0),["adError","adRequest","adPodClick","adPodEnd","adPodStart","adPodSkip","adNotFound","adLoad","tvisCreativeStart","tvisCreativeEnd","tvisCreativeExpanded","tvisCreativeNavigated","tvisCreativeNotFound","tvisCreativeSkipped","tvisError","tvisRequestNoWrapper","adMediaFileLoad","adImpressionMrc","adFirstQuartile","adMidpoint","adThirdQuartile","adWindowStart","adWindowEnd"],!1),p=o(o([],c,!0),["adWindowStart","adWindowEnd"],!1),h={film:{default:l,kp:l},trailer:{default:c},channel:{default:c},episode:{default:c},"vod-broadcast-episode":{default:p},"music-clip":{default:d},clip:{default:d},"short-video":{default:d},"ott-trailer":{default:c},"tv-channel":{default:u},"ott-sport-episode":{default:p}};!function(e){e.FILM="film",e.TRAILER="trailer",e.CHANNEL="channel",e.MUSIC="music-clip",e.CLIP="clip",e.SHORT_VIDEO="short-video",e.OTT_TRAILER="ott-trailer",e.SPORT_LIVE_OR_RECORD="episode",e.SPORT_EVENT="ott-sport-episode",e.SPORT_HIGHLIGHT="vod-broadcast-episode",e.TV_CHANNEL="tv-channel"}(a||(a={}));var f,m,v=1,g=2,b=3,y=4,k=5,P=6,T=7,S=8,w=9,E=10,C=11,O=12,_=13,A=14,I=15,x=16,D=17,R=18,M=19,N=20,V=21,j=22,L=23,B=24,W=25,U=30,F=31,q=32,Z=33,Q=34,H=35,z=36,Y=37,$=38,G=39,X=40,K=41,J=42,ee=43,te=44,ne=45,re=46,ie=47,ae=48,oe=49,se=50,de=51,ce=82,le=83,ue=84,pe=85,he=86,fe=87,me=88,ve=122,ge=220,be=253;!function(e){e.SET_SOURCE="setSource",e.INIT="init",e.START="start",e.END="end",e.PLAY="play",e.PAUSE="pause",e.PREROLL_START="prerollStart",e.PREROLL_END="prerollEnd",e.ERROR="error",e.AD_START="adStart",e.AD_END="adEnd",e.HEARTBEAT="heartbeat",e.WATCHED_TIME="watchedTime",e.VIEWED="viewed",e.AD_POD_START="adPodStart",e.AD_POD_END="adPodEnd",e.AD_POD_SKIP="adPodSkip",e.AD_ERROR="adError",e.AD_POD_CLICK="adPodClick",e.AD_REQUEST="adRequest",e.AD_LOAD="adLoad",e.AD_MEDIA_FILE_LOAD="adMediaFileLoad",e.AD_IMPRESSION_MRC="adImpressionMrc",e.AD_FIRST_QUARTILE="adFirstQuartile",e.AD_MIDPOINT="adMidpoint",e.AD_THIRD_QUARTILE="adThirdQuartile",e.AD_NOT_FOUND="adNotFound",e.AD_WINDOW_START="adWindowStart",e.AD_WINDOW_END="adWindowEnd",e.TVIS_CREATIVE_START="tvisCreativeStart",e.TVIS_CREATIVE_END="tvisCreativeEnd",e.TVIS_CREATIVE_EXPANDED="tvisCreativeExpanded",e.TVIS_CREATIVE_NAVIGATED="tvisCreativeNavigated",e.TVIS_CREATIVE_NOT_FOUND="tvisCreativeNotFound",e.TVIS_CREATIVE_SKIPPED="tvisCreativeSkipped",e.TVIS_REQUEST_NO_WRAPPER="tvisRequestNoWrapper",e.TVIS_ERROR="tvisError"}(f||(f={}));var ye=((m={})[v]="channel-family",m[g]="channel",m[b]="episode",m[y]="vod-library",m[k]="vod-episode",m[P]="tv-series",m[T]="tv-season",m[S]="black-window",m[w]="out-of-tv-channel",m[E]="type-folder",m[C]="zen-namespace",m[O]="zen-library",m[_]="zen-episode",m[A]="yandex-disribution-library",m[I]="yandex-disribution-episode",m[x]="emergency-black-window",m[D]="cv-black-window",m[R]="yandex-market-library",m[M]="yandex-market-episode",m[N]="ott-movie",m[V]="ott-episode",m[j]="kd-feed-episode",m[L]="ott-sport-episode",m[B]="sport-episode",m[W]="announce",m[U]="ntv-vod-library",m[F]="ntv-vod-movie",m[q]="ntv-vod-series",m[Z]="ntv-vod-series-season",m[Q]="ntv-vod-series-season-episode",m[H]="ott-multipart",m[z]="ott-part",m[Y]="ott-trailer",m[$]="ott-collection",m[G]="ott-collection-item",m[X]="high-light",m[K]="user-episode",m[J]="vod-news",m[ee]="vod-broadcast",m[te]="vod-news-episode",m[ne]="vod-broadcast-episode",m[re]="snapshot-tv-episode",m[ie]="kp-trailer",m[ae]="ya-news",m[oe]="self-service-bw-window",m[se]="main-black-window",m[de]="music-clip",m[ge]="clip",m[ce]="ott_linked_video",m[le]="ott_music_karaoke",m[ue]="ott_linked_video_parent",m[pe]="ott_music_karaoke_parent",m[he]="ott-vod-library",m[fe]="ott_linked_trailer",m[me]="ott_linked_music_clip",m[ve]="ott-video-episode",m[be]="catch-up",m);var ke="content_duration_",Pe=[["1","content_start"],["10000","".concat(ke,"10")],["20000","".concat(ke,"20")],["30000","".concat(ke,"30")],["40000","".concat(ke,"40")],["50000","".concat(ke,"50")],["60000","".concat(ke,"60")],["120000","".concat(ke,"120")]],Te="VIDEO_",Se=[["25","".concat(Te,"25")],["50","".concat(Te,"50")],["75","".concat(Te,"75")],["90","".concat(Te,"90")],["99","".concat(Te,"END")]];function we(e,t,n){var r=[];if(["yango-movies-smart-tv"].some((function(e){return e!==n.serviceName}))){var i=function(e,t,n,r){var i=[];if("trailer"===t){var a="{{metrikaBackend}}{{vpCounterId}}?page-ref=yandex.ru&page-url=goal://{{domain}}/";"init"===e?i.push('{{metrikaBackend}}{{vpCounterId}}?page-ref=yandex.ru&site-info={"kp_trailers":{"host":{"{{serviceName}}":{"{{kpId}}":{"{{uuid}}":"{{kpTrailerId}}"}}}}}&page-url=goal://{{domain}}/TRAILER_START'):"adStart"===e?i.push(a+"TRAILER_AD_START"):"adEnd"===e?i.push(a+"TRAILER_AD_END"):"viewed"===e&&i.push([a+"TRAILER_50",{percent:50}],[a+"TRAILER_90",{percent:90}])}else{var o,s='{{metrikaBackend}}<<COUNTER_NAME>>?page-ref=yandex.ru&site-info={"{{serviceName}}":{"{{fromBlock}}":{"<<EVENT_NAME>>":{"{{uuid}}":{"{{position}}":"{{monetizationModel}}"}}}}}';if("setSource"===e||"init"===e){var d=(o=s.replace("<<EVENT_NAME>>","video_start")).replace("<<COUNTER_NAME>>","{{counterId}}");if(i.push(d+"&page-url=goal://{{domain}}/VIDEO_START"),"init"===e&&"kp"===n){var c=o.replace("<<COUNTER_NAME>>","{{kpCounterId}}");i.push(c+"&page-url=goal://{{domain}}/VIDEO_START")}}if("adStart"===e||"adEnd"===e)if(d=(o=s.replace("<<EVENT_NAME>>","adStart"===e?"VIDEO_AD_START":"VIDEO_AD_END")).replace("<<COUNTER_NAME>>","{{counterId}}"),i.push(d),"kp"===n){var l=o.replace("<<COUNTER_NAME>>","{{kpCounterId}}");i.push(l)}"watchedTime"===e&&Pe.forEach((function(e){var t={offset:Number(e[0])},a=s.replace("<<EVENT_NAME>>",e[1]),o=a.replace("<<COUNTER_NAME>>","{{counterId}}");i.push([o,t]),"kp"===n&&i.push([a.replace("<<COUNTER_NAME>>","{{kpCounterId}}"),t]),"ya-sport"===n&&"120000"===e[0]&&i.push([a.replace("<<COUNTER_NAME>>","{{spCounterId}}")+"&page-url=goal://".concat(n,"/VIDEO_STREAM_2MIN"),t]),"ott-kp"===n&&r&&"120000"===e[0]&&i.push([a.replace("<<COUNTER_NAME>>","{{kpCounterId}}")+"&page-url=goal://".concat(n,"/VIDEO_STREAM_2MIN"),t])})),"viewed"===e&&Se.forEach((function(e){var t={percent:Number(e[0])},r=(s+"&page-url=goal://{{domain}}/<<EVENT_NAME>>").replace(/<<EVENT_NAME>>/g,e[1]),a=r.replace("<<COUNTER_NAME>>","{{counterId}}");i.push([a,t]),"kp"===n&&i.push([r.replace("<<COUNTER_NAME>>","{{kpCounterId}}"),t])}))}return i}(e,t,n.serviceName,n.metrikaKey);r.push.apply(r,i)}var a=function(e,t,n){var r,i,a,o,s=[],d='{{ottTrackingsBackend}}watch-batch?data={"position":"{{position}}","fromBlock":"{{fromBlock}}","serviceName":"{{serviceName}}","uuid":"{{uuid}}","puid":"{{puid}}","sid":"{{sid}}","vSid":"{{vsid}}","yaUID":"{{yandexuid}}","monetizationModel":"{{monetizationModel}}","contentTypeName":"{{contentTypeName}}","device-type":"{{device-type}}","device-type-tns":"{{device-type-tns}}","page":"{{page}}","testIds":"{{testIds}}","eventId":"{{eventId}}","subProfileId":"{{subProfileId}}","deviceId":"{{deviceId}}","appVersion":"{{appVersion}}","platformOs":"{{platformOs}}","platformOsVersionMajor":"{{platformOsVersionMajor}}","platformOsVersionMinor":"{{platformOsVersionMinor}}","platformVersion":"{{platformVersion}}","platformVendor":"{{platformVendor}}","platformModel":"{{platformModel}}","platformVendorDeviceId":"{{platformVendorDeviceId}}","platformName":"{{platformName}}",'+'"psid":'.concat(n.psid?'"{{psid}}"':"null",",")+'"buildTimestamp":"{{buildTimestamp}}","pathId":"{{pathId}}","fromBlockPosition":"{{fromBlockPosition}}","fromBlockItemPosition":"{{fromBlockItemPosition}}","fromBlockAction":"{{fromBlockAction}}","fromBlockMLSessionId":"{{fromBlockMLSessionId}}","fromBlockStartPage":"{{fromBlockStartPage}}","fromBlockEndPage":"{{fromBlockEndPage}}","fromBlockExternalLink":"{{fromBlockExternalLink}}","isLive":"{{isLive}}","deviceType":{{deviceType}},"timestamp":"{{timestamp}}","appName":"{{appName}}","watchedTime":"{{watched-time}}","fts":"{{fts}}","fullscreen":"{{fullscreen}}","mute":"{{muted}}","billingFeatureNames":"{{billingFeatureNames}}","contentPackage":"{{contentPackage}}","localSessionId":"{{localSessionId}}","globalSessionId":"{{globalSessionId}}"',c=',"buffering_sec":"{{buffering-duration}}","buffering_count":"{{buffering-count}}"';if("tv-channel"===t&&(d+=',"multiplex":{{isMultiplexChannel}}',n.isMultiplexChannel&&(d+=',"vitrinaTvChannelSlug":"{{vitrinaTvChannelSlug}}","drm_supported":"{{drm-supported}}","drm_system_use":"{{drm-type}}","device_id":"{{deviceUuid}}","init_before_stream_or_ad_request_msec":"{{prepareStartupDataTime}}","stream_or_ad_initial_buffering_msec":"{{initial-buffering-time}}","bitrate_video":"{{bitrate-video}}","user_browser":"{{browserName}}","user_browser_ver":"{{browserVer}}","user_browser_ver_major":"{{browserVerMajor}}","user_browser_ver_minor":"{{browserVerMinor}}","pause_sec":"{{pause_sec}}"')),"setSource"!==e&&"init"!==e||s.push(d+',"eventType":"video_start","eventCount":"-","audio-track-lang":"{{audio-track-lang}}","audio-track-name":"{{audio-track-name}}","text-track-lang":"{{text-track-lang}}","text-track-name":"{{text-track-name}}"}'),"error"===e&&s.push(d+c+',"errorCode":"{{error-code}}","eventType":"player_error","eventCount":"-"}'),"adStart"===e||"adEnd"===e){var l="adStart"===e?"VIDEO_AD_START":"VIDEO_AD_END";s.push(d+',"eventType":"'.concat(l,'","eventCount":"-"}'))}"play"===e&&s.push(d+',"eventType":"player_play","eventCount":"-"}'),"pause"===e&&s.push(d+c+',"eventType":"player_pause","eventCount":"-"}'),"prerollStart"!==e&&"prerollEnd"!==e||s.push(d.replace("{{uuid}}",null!==(r=n.prerollUuid)&&void 0!==r?r:"preroll").replace("{{contentTypeName}}","preroll")+',"eventType":"'.concat("prerollStart"===e?"preroll_started":"preroll_ended",'","mainUuid":"').concat(null!==(i=null===n||void 0===n?void 0:n.uuid)&&void 0!==i?i:"-",'","prerollTargetContentId":"{{prerollTargetContentId}}"}'));var u='"ad_position":"{{ad-position}}","adSource":"{{ad-source}}","adRequestId":"{{ad-request-id}}","adVastUrl":"{{ad-vast-url}}","adParams":"{{ad-params}}"',p='"adFrameTimestamp":"{{ad-frame-timestamp}}"',h='"cueTimestamp":"{{cue-timestamp}}","adContentSwitchTimestamp":"{{ad-content-switch-timestamp}}","adCampaignId":"{{ad-campaign-id}}"',f='"adId":"{{ad-id}}","adCreativeId":"{{ad-creative-id}}","adBannerId":"{{ad-banner-id}}","adMediafileUrl":"{{ad-mediafile-url}}","adMediafileType":"{{ad-mediafile-type}}","adVastIsEmpty":"{{ad-vast-empty}}","adSkippable":"{{ad-skippable}}","adPodPosition":"{{ad-pod-position}}"';if("adPodStart"===e&&s.push(d+',"eventType":"ad_creative_start","eventCount":"-",'.concat(u,",").concat(p,",").concat(f,',"client_ad_sec":"{{client-ad-sec}}"}')),"adPodEnd"===e&&s.push(d+',"eventType":"ad_creative_end","eventCount":"-",'.concat(u,",").concat(p,",").concat(f,',"client_ad_sec":"{{client-ad-sec}}"}')),"adPodSkip"===e&&s.push(d+',"eventType":"ad_creative_skip","eventCount":"-",'.concat(u,",").concat(p,",").concat(f,',"client_ad_sec":"{{client-ad-sec}}"}')),"adError"===e&&s.push(d+',"eventType":"ad_error","eventCount":"-",'.concat(u,",").concat(p,",").concat(f,',"client_ad_sec":"{{client-ad-sec}}","errorTitle":"{{error-title}}","errorMessage":"{{error-message}}","errorType":"{{error-type}}"}')),"adPodClick"===e&&s.push(d+',"eventType":"ad_creative_click","eventCount":"-",'.concat(u,",").concat(p,",").concat(f,',"client_ad_sec":"{{client-ad-sec}}"}')),"adRequest"===e&&s.push(d+',"eventType":"ad_request_no_wrapper","eventCount":"-",'.concat(u,',"client_ad_sec":"{{client-ad-sec}}"}')),"adNotFound"===e&&s.push(d+',"eventType":"ad_not_found","eventCount":"-",'.concat(u,',"client_ad_sec":"{{client-ad-sec}}"}')),"adMediaFileLoad"===e&&s.push(d+',"eventType":"ad_media_file_load","eventCount":"-",'.concat(u,',"client_ad_sec":"{{client-ad-sec}}",').concat(f,"}")),"adImpressionMrc"===e&&s.push(d+',"eventType":"ad_impression_mrc","eventCount":"-",'.concat(u,",").concat(p,",").concat(f,',"client_ad_sec":"{{client-ad-sec}}"}')),"adFirstQuartile"===e&&s.push(d+',"eventType":"ad_first_quartile","eventCount":"-",'.concat(u,",").concat(p,",").concat(f,',"client_ad_sec":"{{client-ad-sec}}"}')),"adMidpoint"===e&&s.push(d+',"eventType":"ad_midpoint","eventCount":"-",'.concat(u,",").concat(p,",").concat(f,',"client_ad_sec":"{{client-ad-sec}}"}')),"adThirdQuartile"===e&&s.push(d+',"eventType":"ad_third_quartile","eventCount":"-",'.concat(u,",").concat(p,",").concat(f,',"client_ad_sec":"{{client-ad-sec}}"}')),"adWindowStart"===e&&s.push(d+',"eventType":"ad_window_start",'.concat(h,',"eventCount":"-","client_ad_sec":"{{client-ad-sec}}"}')),"adWindowEnd"===e&&s.push(d+',"eventType":"ad_window_end",'.concat(h,',"eventCount":"-","client_ad_sec":"{{client-ad-sec}}"}')),"adLoad"===e&&s.push(d+',"eventType":"ad_load","eventCount":"-",'.concat(u,',"client_ad_sec":"{{client-ad-sec}}"}')),"heartbeat"===e){var m=void 0;switch(t){case"channel":case"short-video":case"ott-trailer":case"trailer":case"clip":m=1e4;break;case"music-clip":m=3e4;break;default:m=6e4}if(s.push([d+',"vts":"{{vts}}","eventType":"heartbeat","eventCount":"'.concat(m,'","audio-track-name":"{{audio-track-name}}","audio-track-lang":"{{audio-track-lang}}","text-track-name":"{{text-track-name}}","text-track-lang":"{{text-track-lang}}"}'),{delay:m,offset:m}]),"tv-channel"===t&&n.isMultiplexChannel){var v=d+',"vts":"{{vts}}","eventType":"heartbeat_30s","eventCount":"'.concat(m=3e4,'","audio-track-name":"{{audio-track-name}}","audio-track-lang":"{{audio-track-lang}}","text-track-name":"{{text-track-name}}","text-track-lang":"{{text-track-lang}}"');s.push([v+c+"}",{delay:m,offset:m,isCalledDuringPause:!0,heartbeatType:"multiplex"}])}"film"===t&&(m=5e3,s.push([d.replace("{{uuid}}",null!==(a=n.prerollUuid)&&void 0!==a?a:"preroll").replace("{{contentTypeName}}","preroll")+',"mainUuid":"'.concat(null!==(o=null===n||void 0===n?void 0:n.uuid)&&void 0!==o?o:"-",'","prerollTargetContentId":"{{prerollTargetContentId}}","vts":"{{vts}}","eventType":"heartbeat_preroll","eventCount":"').concat(m,'","audio-track-name":"{{audio-track-name}}","audio-track-lang":"{{audio-track-lang}}","text-track-name":"{{text-track-name}}","text-track-lang":"{{text-track-lang}}"}'),{delay:m,heartbeatType:"preroll"}]))}return"watchedTime"===e&&Pe.forEach((function(e){var t={offset:Number(e[0])};s.push(["".concat(d,',"eventType":"').concat(e[1],'","eventCount":"').concat(e[0],'","audio-track-lang":"{{audio-track-lang}}","audio-track-name":"{{audio-track-name}}","text-track-lang":"{{text-track-lang}}","text-track-name":"{{text-track-name}}"}'),t])})),"viewed"===e&&Se.forEach((function(e){var t={percent:Number(e[0])};s.push(["".concat(d,',"eventType":"').concat(e[1],'","eventCount":"').concat("99"==e[0]?"100":e[0],'"}'),t])})),"tvisCreativeStart"===e&&s.push(d.replace("{{device-type-tns}}","1")+',"eventType":"tvis_creative_start"}'),"tvisCreativeEnd"===e&&s.push(d.replace("{{device-type-tns}}","1")+',"eventType":"tvis_creative_end"}'),"tvisCreativeExpanded"===e&&s.push(d.replace("{{device-type-tns}}","1")+',"eventType":"tvis_creative_expanded"}'),"tvisCreativeNavigated"===e&&s.push(d.replace("{{device-type-tns}}","1")+',"eventType":"tvis_creative_navigated"}'),"tvisCreativeNotFound"===e&&s.push(d.replace("{{device-type-tns}}","1")+',"eventType":"tvis_creative_not_found"}'),"tvisCreativeSkipped"===e&&s.push(d.replace("{{device-type-tns}}","1")+',"eventType":"tvis_creative_skipped"}'),"tvisError"===e&&s.push(d.replace("{{device-type-tns}}","1")+',"eventType":"tvis_error"}'),"tvisRequestNoWrapper"===e&&s.push(d.replace("{{device-type-tns}}","1")+',"eventType":"tvis_request_no_wrapper"}'),s}(e,t,n);return r.push.apply(r,a),r}function Ee(e){var t={testing:{counterId:45961911,kpCounterId:48924764,vpCounterId:45151398,spCounterId:51357310},production:{counterId:45913512,kpCounterId:48924740,vpCounterId:31713861,spCounterId:51357310}};return t[e]?t[e]:t.testing}function Ce(e){var t={testing:{ottTrackingsBackend:"https://tracking-testing.ott.yandex.ru/v1/",metrikaBackend:"https://mc.yandex.ru/watch/",redirlogBackend:"https://yandex.ru/clck/jclck/"},production:{ottTrackingsBackend:"https://tracking.ott.yandex.ru/v1/",metrikaBackend:"https://mc.yandex.ru/watch/",redirlogBackend:"https://yandex.ru/clck/jclck/"}};return t[e]?t[e]:t.testing}function Oe(e){return[Ce(e.env),Ee(e.env)]}var _e=function(e,t,n){var r=function(e){return"contentTypeID"in e&&(e.contentTypeId=e.contentTypeID),e}(e);r=function(e){for(var t=0;t<s.length;t++){var n=s[t];void 0===e[n]&&(e[n]="domain"===n?document.location.hostname:"buildTimestamp"===n?Date.now():"deviceType"===n?0:"isMultiplexChannel"!==n&&"-")}return e}(r);var a={},o=r.serviceName,d=function(e){var t,n=((t={})[ie]="trailer",t[N]="film",t[V]="film",t[de]="music-clip",t[ge]="clip",t[fe]="channel",t[me]="channel",t[ve]="short-video",t[Y]="ott-trailer",t[b]="episode",t[ne]="vod-broadcast-episode",t[L]="ott-sport-episode",t[g]="tv-channel",t);return e in n?n[String(e)]:"film"}(r.contentTypeId);return(o in h[d]?h[d][o]:h[d].default).forEach((function(e){a[e]=we(e,d,r)})),r=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n={},r=0;r<e.length;r++){var i=e[r];if("object"===typeof i)for(var a in i)n[a]=i[a]}return n}(r,n,t,{contentTypeName:ye[r.contentTypeId]||"unknown"}),{trackingEvents:JSON.parse(i(a,r))}}},84837:function(e,t,n){"use strict";n.d(t,{B:function(){return r},y:function(){return i}});class r{constructor(e){this.defaultValue=e,this.value=e}get(){return this.value}set(e){this.value=e}reset(){this.set(this.defaultValue)}}function i(e){return new r(e)}},85267:function(e,t,n){"use strict";function r(e,t){const n=function(e,t){const{length:n}=e;for(let r=0;r<n;++r)if(t(e[r]))return r;return-1}(e,t);return-1===n?void 0:e[n]}function i(e,t){const n=function(e,t){for(let n=e.length-1;n>=0;n--)if(t(e[n]))return n;return-1}(e,t);return-1===n?void 0:e[n]}function a(e){if(e)return e.apply(null,[].slice.call(arguments,1))}function o(e){const t=typeof e;return Boolean(e)&&("object"===t||"function"===t)}function s(e){return Object.keys(e)}function d(e,t){let n;return{start(){void 0===n&&(n=window.setTimeout((()=>{n=void 0,e()}),t))},stop(){clearTimeout(n),n=void 0}}}function c(){return{createBadStatusError:e=>new Error(String(e)),createErrorFromException:e=>e instanceof Error?e:new Error(e&&e.message||String(e)),createNetworkError:()=>new Error("Failed to fetch"),createTimeoutError:e=>new Error(`Fetch timed out by ${e} timeout`)}}function l(e){return e.getAllResponseHeaders().trim().split("\r\n").filter(Boolean).reduce(((e,t)=>{const n=t.split(": ");return e[n[0].toLowerCase()]=n.slice(1).join(": "),e}),{})}n.d(t,{fA:function(){return T},RE:function(){return a},gt:function(){return g},sE:function(){return r},dF:function(){return i},Zt:function(){return s},mf:function(){return b},ZT:function(){return y},wB:function(){return k}});const u="Content-Type",p="application/json";function h(e){return{request(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{headers:r,method:i="GET",responseType:h="text",errorStrategy:m=c(),createTimeout:v=d}=n,g=new XMLHttpRequest;let b;function y(e,t){return function(){k(),a(n.onError,t.apply(e,arguments))}}function k(){b&&b.stop(),S(),g.abort()}g.open(i,t,!0);const P=n.timeout||e&&e.defaultTimeout;P&&(g.timeout=P,b=v(y(m,(()=>m.createTimeoutError("custom"))),P+1e3),b.start()),void 0!==n.withCredentials&&(g.withCredentials=n.withCredentials),"json"!==h&&(g.responseType=h),r&&function(e,t){s(t).forEach((n=>{e.setRequestHeader(n,t[n])}))}(g,r);const T=y(m,m.createErrorFromException),S=function(e,t){return e.onerror=t.error,e.ontimeout=t.timeout,e.onreadystatechange=()=>{4===e.readyState&&0!==e.status&&(e.status>=400?t.badStatus(e.status,e.response):t.success())},()=>{e.onerror=null,e.ontimeout=null,e.onreadystatechange=null}}(g,{badStatus:y(m,m.createBadStatusError),error:y(m,m.createNetworkError),timeout:y(m,(()=>m.createTimeoutError("native"))),success:()=>{try{a(n.onSuccess,{data:f(g,h),responseURL:g.responseURL,headers:l(g)})}catch(e){T(e)}}});return function(e,t){o(t)&&function(e){e.setRequestHeader(u,p)}(e);const n=o(t)?JSON.stringify(t):t;e.send(n)}(g,n.body),k}}}function f(e,t){return m[t](e)}const m={text:e=>e.responseText,arraybuffer:e=>e.response,json:e=>JSON.parse(e.response),document:e=>e.responseXML},v=e=>new Promise((t=>{window.setTimeout(t,e)}));function g(e){const t=h(e);return{request(n,r){const i=r&&r.createPromise||(e=>new Promise(e));return(a=()=>i(((e,i)=>t.request(n,Object.assign(Object.assign({},r),{onError:i,onSuccess:e})))),o={maxRetries:r&&r.maxRetries||e&&e.maxRetries||0,getDelay:r&&r.getDelay},function(){let e=0;const t=arguments;function n(){return a.apply(null,t).then(null,(t=>{if(e===o.maxRetries)throw t;return(o.getDelay?v(o.getDelay(e)):Promise.resolve()).then((()=>(e++,n())))}))}return n()})();var a,o}}}function b(e){return"function"===typeof e}const y=()=>{};function k(e,t){return s(t).forEach((n=>{e[n]=t[n]})),e}var P=n(84837);class T{constructor(e,t){this.defaultValue=e,this.onChanged=t,this.value=new P.B(e)}get(){return this.value.get()}set(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.get()!==e&&(this.value.set(e),!1!==t&&a(this.onChanged))}reset(e){this.set(this.defaultValue,e)}}const S=window.performance;S&&b(S.now),S&&S.timing&&S.timing.navigationStart?S.timing.navigationStart:Date.now();const w="trimEnd"in String.prototype?function(e){return"".trimEnd.call(e)}:e=>e.replace(/[\s\uFEFF\xA0]+$/g,""),E="trimStart"in String.prototype?function(e){return"".trimStart.call(e)}:e=>e.replace(/^[\s\uFEFF\xA0]+/g,"");String.prototype},92844:function(e,t,n){"use strict";function r(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;try{return(e.navigator||{}).userAgent||""}catch(t){return""}}n.d(t,{i:function(){return r}})},800:function(e,t,n){"use strict";n.d(t,{a:function(){return i}});var r=n(92844);const i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;return/YaBrowser/.test((0,r.i)(e))}},57867:function(e,t,n){"use strict";n.d(t,{IH:function(){return r},cb:function(){return i},my:function(){return a}});const r=function(e){let t=e;for(let n=0;n<(arguments.length<=1?0:arguments.length-1);n++)t+=n+1<1||arguments.length<=n+1?void 0:arguments[n+1];return t},i=function(e){let t=e;for(let n=0;n<(arguments.length<=1?0:arguments.length-1);n++)t-=n+1<1||arguments.length<=n+1?void 0:arguments[n+1];return t};function a(e){return e}},43458:function(e,t){"use strict";t.t=void 0,function(e){e.ALL="*",e.PLAY="play",e.START_SCREEN_PLAY="startScreenPlay",e.VOLUME="sound",e.VOLUME_SLIDER="volumeSlider",e.SETTINGS="settings",e.SETTINGS_ITEM="settingsItem",e.FULLSCREEN="fullscreen",e.TIMELINE="timeline",e.TIMELINE_PREVIEW="timelinePreview",e.LIVE="live",e.POSTER="poster",e.START_POSITION_CONFIRM="startPositionConfirm",e.TIME_DISPLAY="time",e.TITLE_DISPLAY="titleDisplay",e.REPORT="report",e.FORWARD="forward",e.BACKWARD="backward",e.LOGO="logo",e.PRELOADER="preloader",e.CONTEXT_MENU="contextMenu",e.START_SCREEN="startScreen",e.PLAYBACK_RATE="playbackRate",e.SKIPPABLE_FRAGMENTS="skippableFragments",e.EXTERNAL_PLAYBACK="externalPlayback",e.RECOMMENDATIONS="recommendations",e.CLOSE_BUTTON="closeButton",e.NEXT_AD_INFO="nextAdInfo",e.SUBTITLES_TOGGLE="subtitlesToggle",e.LOGO_WIDGET="logoWidget",e.SKIP_AD="skipAd",e.MOBILE_SEEK_BUTTONS="mobileSeekButtons",e.TITLE="title"}(t.t||(t.t={}))},85533:function(e,t,n){"use strict";var r;n.d(t,{M:function(){return r}}),function(e){e[e.PLAYING=1]="PLAYING",e[e.NOT_PLAYING=2]="NOT_PLAYING"}(r||(r={}))},78842:function(e,t,n){"use strict";var r;n.d(t,{E:function(){return r}}),function(e){e.Ready="Ready",e.SkinReady="SkinReady",e.PosterReady="PosterReady",e.UserReady="UserReady",e.Destroy="Destroy",e.ContentImpression="ContentImpression",e.ResourcesIdle="ResourcesIdle",e.SourceChange="SourceChange",e.StreamChange="StreamChange",e.StreamsWithSupportInfoChange="StreamsWithSupportInfoChange",e.StartStageChange="StartStageChange",e.PlayingStateChange="PlayingStateChange",e.RequestPlayingState="RequestPlayingState",e.VideoTypeChange="VideoTypeChange",e.UtcStartTimeChange="UtcStartTimeChange",e.DVRStartTimeChange="DVRStartTimeChange",e.DVRDurationChange="DVRDurationChange",e.CurrentTimeChange="CurrentTimeChange",e.WatchedTimeChange="WatchedTimeChange",e.LiveLatencyChange="LiveLatencyChange",e.DurationChange="DurationChange",e.VolumeChange="VolumeChange",e.MutedChange="MutedChange",e.VolumeChangeReasonChange="VolumeChangeReasonChange",e.FullscreenStateChange="FullscreenStateChange",e.RequestFullscreenStateChange="RequestFullscreenStateChange",e.PictureInPictureStateChange="PictureInPictureStateChange",e.VisibleStateChange="VisibleStateChange",e.VideoSizeChange="VideoSizeChange",e.VideoTracksChange="VideoTracksChange",e.VideoTrackChange="VideoTrackChange",e.AudioTracksChange="AudioTracksChange",e.AudioTrackChange="AudioTrackChange",e.TextTracksChange="TextTracksChange",e.TextTrackChange="TextTrackChange",e.SubtitlesChange="SubtitlesChange",e.ErrorChange="ErrorChange",e.PlaybackRateRangeChange="PlaybackRateRangeChange",e.PlaybackRateChange="PlaybackRateChange",e.AdStateChange="AdStateChange",e.NextAdRemainingTimeChange="NextAdRemainingTimeChange",e.BeforeAdPodStart="BeforeAdPodStart",e.AdPodStart="AdPodStart",e.AdPodSkip="AdPodSkip",e.AdPodEnd="AdPodEnd",e.AdSkippableStateChange="AdSkippableStateChange",e.AdVolumeAvailabilityStateChange="AdVolumeAvailabilityStateChange",e.AdPodCloseStateChange="AdPodCloseStateChange",e.AdPodDurationChange="AdPodDurationChange",e.AdPodCurrentTimeChange="AdPodCurrentTimeChange",e.AdPodTimeToSkipChange="AdPodTimeToSkipChange",e.AdPodFullyClickableStateChange="AdPodFullyClickableStateChange",e.AdInteraction="AdInteraction",e.BufferedRangesChange="BufferedRangesChange",e.TileMetaInfoChange="TileMetaInfoChange",e.TileMetaInfoUrlChange="TileMetaInfoUrlChange",e.VideoClickerEvent="VideoClickerEvent",e.NetworkStatusChange="NetworkStatusChange",e.RecoverStart="RecoverStart",e.ConnectionQualityChange="ConnectionQualityChange",e.DrmSystemChange="DrmSystemChange",e.AdLoaded="AdLoaded",e.AdError="AdError",e.AdPodClick="AdPodClick",e.InrollFrame="InrollFrame"}(r||(r={}))},62930:function(e,t,n){"use strict";n.d(t,{TC:function(){return r}});const r=[.25,.5,.75,1,1.25,1.5,1.75,2]},90929:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(78865);function i(e){return null!=e&&"function"===typeof e["@@transducer/step"]}function a(e,t,n){return function(){if(0===arguments.length)return n();var a=Array.prototype.slice.call(arguments,0),o=a.pop();if(!(0,r.Z)(o)){for(var s=0;s<e.length;){if("function"===typeof o[e[s]])return o[e[s]].apply(o,a);s+=1}if(i(o)){var d=t.apply(null,a);return d(o)}}return n.apply(this,arguments)}}},13294:function(e,t){"use strict";t.Z={init:function(){return this.xf["@@transducer/init"]()},result:function(e){return this.xf["@@transducer/result"](e)}}},69544:function(e,t,n){"use strict";var r=(0,n(43926).Z)((function(e,t){return null!=t&&t.constructor===e||t instanceof e}));t.Z=r},25334:function(e,t,n){"use strict";function r(e){return"[object Number]"===Object.prototype.toString.call(e)}n.d(t,{Z:function(){return i}});var i=(0,n(43926).Z)((function(e,t){if(!r(e)||!r(t))throw new TypeError("Both arguments to range must be numbers");for(var n=[],i=e;i<t;)n.push(i),i+=1;return n}))},44699:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(78865);function i(e,t){return function(){var n=arguments.length;if(0===n)return t();var i=arguments[n-1];return(0,r.Z)(i)||"function"!==typeof i[e]?t.apply(this,arguments):i[e].apply(i,Array.prototype.slice.call(arguments,0,n-1))}}var a=(0,n(22055).Z)(i("slice",(function(e,t,n){return Array.prototype.slice.call(n,e,t)})))},52411:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var r=n(43926),i=n(40279),a=n(90929);var o=n(13294),s=function(){function e(e,t){this.xf=t,this.n=e,this.i=0}return e.prototype["@@transducer/init"]=o.Z.init,e.prototype["@@transducer/result"]=o.Z.result,e.prototype["@@transducer/step"]=function(e,t){this.i+=1;var n,r=0===this.n?e:this.xf["@@transducer/step"](e,t);return this.n>=0&&this.i>=this.n?(n=r)&&n["@@transducer/reduced"]?n:{"@@transducer/value":n,"@@transducer/reduced":!0}:r},e}(),d=(0,r.Z)((function(e,t){return new s(e,t)})),c=n(44699),l=(0,r.Z)((0,a.Z)(["take"],d,(function(e,t){return(0,c.Z)(0,e<0?1/0:e,t)}))),u=(0,r.Z)((function(e,t){return(0,i.Z)(l(e.length,t),e)}))},98027:function(){},39636:function(e){var t="undefined"!==typeof Element,n="function"===typeof Map,r="function"===typeof Set,i="function"===typeof ArrayBuffer&&!!ArrayBuffer.isView;function a(e,o){if(e===o)return!0;if(e&&o&&"object"==typeof e&&"object"==typeof o){if(e.constructor!==o.constructor)return!1;var s,d,c,l;if(Array.isArray(e)){if((s=e.length)!=o.length)return!1;for(d=s;0!==d--;)if(!a(e[d],o[d]))return!1;return!0}if(n&&e instanceof Map&&o instanceof Map){if(e.size!==o.size)return!1;for(l=e.entries();!(d=l.next()).done;)if(!o.has(d.value[0]))return!1;for(l=e.entries();!(d=l.next()).done;)if(!a(d.value[1],o.get(d.value[0])))return!1;return!0}if(r&&e instanceof Set&&o instanceof Set){if(e.size!==o.size)return!1;for(l=e.entries();!(d=l.next()).done;)if(!o.has(d.value[0]))return!1;return!0}if(i&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(o)){if((s=e.length)!=o.length)return!1;for(d=s;0!==d--;)if(e[d]!==o[d])return!1;return!0}if(e.constructor===RegExp)return e.source===o.source&&e.flags===o.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===o.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===o.toString();if((s=(c=Object.keys(e)).length)!==Object.keys(o).length)return!1;for(d=s;0!==d--;)if(!Object.prototype.hasOwnProperty.call(o,c[d]))return!1;if(t&&e instanceof Element)return!1;for(d=s;0!==d--;)if(("_owner"!==c[d]&&"__v"!==c[d]&&"__o"!==c[d]||!e.$$typeof)&&!a(e[c[d]],o[c[d]]))return!1;return!0}return e!==e&&o!==o}e.exports=function(e,t){try{return a(e,t)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}}},57173:function(e,t,n){"use strict";n.d(t,{D:function(){return ve}});var r=n(37667);function i(e){var t=e.getBoundingClientRect();return{width:t.width,height:t.height,top:t.top,right:t.right,bottom:t.bottom,left:t.left,x:t.left,y:t.top}}function a(e){if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function o(e){var t=a(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function s(e){return e instanceof a(e).Element||e instanceof Element}function d(e){return e instanceof a(e).HTMLElement||e instanceof HTMLElement}function c(e){return e?(e.nodeName||"").toLowerCase():null}function l(e){return((s(e)?e.ownerDocument:e.document)||window.document).documentElement}function u(e){return i(l(e)).left+o(e).scrollLeft}function p(e){return a(e).getComputedStyle(e)}function h(e){var t=p(e),n=t.overflow,r=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function f(e,t,n){void 0===n&&(n=!1);var r=l(t),s=i(e),p=d(t),f={scrollLeft:0,scrollTop:0},m={x:0,y:0};return(p||!p&&!n)&&(("body"!==c(t)||h(r))&&(f=function(e){return e!==a(e)&&d(e)?{scrollLeft:(t=e).scrollLeft,scrollTop:t.scrollTop}:o(e);var t}(t)),d(t)?((m=i(t)).x+=t.clientLeft,m.y+=t.clientTop):r&&(m.x=u(r))),{x:s.left+f.scrollLeft-m.x,y:s.top+f.scrollTop-m.y,width:s.width,height:s.height}}function m(e){return{x:e.offsetLeft,y:e.offsetTop,width:e.offsetWidth,height:e.offsetHeight}}function v(e){return"html"===c(e)?e:e.assignedSlot||e.parentNode||e.host||l(e)}function g(e){return["html","body","#document"].indexOf(c(e))>=0?e.ownerDocument.body:d(e)&&h(e)?e:g(v(e))}function b(e,t){void 0===t&&(t=[]);var n=g(e),r="body"===c(n),i=a(n),o=r?[i].concat(i.visualViewport||[],h(n)?n:[]):n,s=t.concat(o);return r?s:s.concat(b(v(o)))}function y(e){return["table","td","th"].indexOf(c(e))>=0}function k(e){if(!d(e)||"fixed"===p(e).position)return null;var t=e.offsetParent;if(t){var n=l(t);if("body"===c(t)&&"static"===p(t).position&&"static"!==p(n).position)return n}return t}function P(e){for(var t=a(e),n=k(e);n&&y(n)&&"static"===p(n).position;)n=k(n);return n&&"body"===c(n)&&"static"===p(n).position?t:n||function(e){for(var t=v(e);d(t)&&["html","body"].indexOf(c(t))<0;){var n=p(t);if("none"!==n.transform||"none"!==n.perspective||n.willChange&&"auto"!==n.willChange)return t;t=t.parentNode}return null}(e)||t}var T="top",S="bottom",w="right",E="left",C="auto",O=[T,S,w,E],_="start",A="end",I="viewport",x="popper",D=O.reduce((function(e,t){return e.concat([t+"-"+_,t+"-"+A])}),[]),R=[].concat(O,[C]).reduce((function(e,t){return e.concat([t,t+"-"+_,t+"-"+A])}),[]),M=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function N(e){var t=new Map,n=new Set,r=[];function i(e){n.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach((function(e){if(!n.has(e)){var r=t.get(e);r&&i(r)}})),r.push(e)}return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){n.has(e.name)||i(e)})),r}function V(e){var t;return function(){return t||(t=new Promise((function(n){Promise.resolve().then((function(){t=void 0,n(e())}))}))),t}}var j={placement:"bottom",modifiers:[],strategy:"absolute"};function L(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some((function(e){return!(e&&"function"===typeof e.getBoundingClientRect)}))}function B(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,r=void 0===n?[]:n,i=t.defaultOptions,a=void 0===i?j:i;return function(e,t,n){void 0===n&&(n=a);var i={placement:"bottom",orderedModifiers:[],options:Object.assign(Object.assign({},j),a),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},o=[],d=!1,c={state:i,setOptions:function(n){l(),i.options=Object.assign(Object.assign(Object.assign({},a),i.options),n),i.scrollParents={reference:s(e)?b(e):e.contextElement?b(e.contextElement):[],popper:b(t)};var d=function(e){var t=N(e);return M.reduce((function(e,n){return e.concat(t.filter((function(e){return e.phase===n})))}),[])}(function(e){var t=e.reduce((function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign(Object.assign(Object.assign({},n),t),{},{options:Object.assign(Object.assign({},n.options),t.options),data:Object.assign(Object.assign({},n.data),t.data)}):t,e}),{});return Object.keys(t).map((function(e){return t[e]}))}([].concat(r,i.options.modifiers)));return i.orderedModifiers=d.filter((function(e){return e.enabled})),i.orderedModifiers.forEach((function(e){var t=e.name,n=e.options,r=void 0===n?{}:n,a=e.effect;if("function"===typeof a){var s=a({state:i,name:t,instance:c,options:r}),d=function(){};o.push(s||d)}})),c.update()},forceUpdate:function(){if(!d){var e=i.elements,t=e.reference,n=e.popper;if(L(t,n)){i.rects={reference:f(t,P(n),"fixed"===i.options.strategy),popper:m(n)},i.reset=!1,i.placement=i.options.placement,i.orderedModifiers.forEach((function(e){return i.modifiersData[e.name]=Object.assign({},e.data)}));for(var r=0;r<i.orderedModifiers.length;r++)if(!0!==i.reset){var a=i.orderedModifiers[r],o=a.fn,s=a.options,l=void 0===s?{}:s,u=a.name;"function"===typeof o&&(i=o({state:i,options:l,name:u,instance:c})||i)}else i.reset=!1,r=-1}}},update:V((function(){return new Promise((function(e){c.forceUpdate(),e(i)}))})),destroy:function(){l(),d=!0}};if(!L(e,t))return c;function l(){o.forEach((function(e){return e()})),o=[]}return c.setOptions(n).then((function(e){!d&&n.onFirstUpdate&&n.onFirstUpdate(e)})),c}}var W={passive:!0};function U(e){return e.split("-")[0]}function F(e){return e.split("-")[1]}function q(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Z(e){var t,n=e.reference,r=e.element,i=e.placement,a=i?U(i):null,o=i?F(i):null,s=n.x+n.width/2-r.width/2,d=n.y+n.height/2-r.height/2;switch(a){case T:t={x:s,y:n.y-r.height};break;case S:t={x:s,y:n.y+n.height};break;case w:t={x:n.x+n.width,y:d};break;case E:t={x:n.x-r.width,y:d};break;default:t={x:n.x,y:n.y}}var c=a?q(a):null;if(null!=c){var l="y"===c?"height":"width";switch(o){case _:t[c]=Math.floor(t[c])-Math.floor(n[l]/2-r[l]/2);break;case A:t[c]=Math.floor(t[c])+Math.ceil(n[l]/2-r[l]/2)}}return t}var Q={top:"auto",right:"auto",bottom:"auto",left:"auto"};function H(e){var t,n=e.popper,r=e.popperRect,i=e.placement,o=e.offsets,s=e.position,d=e.gpuAcceleration,c=e.adaptive,u=function(e){var t=e.x,n=e.y,r=window.devicePixelRatio||1;return{x:Math.round(t*r)/r||0,y:Math.round(n*r)/r||0}}(o),p=u.x,h=u.y,f=o.hasOwnProperty("x"),m=o.hasOwnProperty("y"),v=E,g=T,b=window;if(c){var y=P(n);y===a(n)&&(y=l(n)),i===T&&(g=S,h-=y.clientHeight-r.height,h*=d?1:-1),i===E&&(v=w,p-=y.clientWidth-r.width,p*=d?1:-1)}var k,C=Object.assign({position:s},c&&Q);return d?Object.assign(Object.assign({},C),{},((k={})[g]=m?"0":"",k[v]=f?"0":"",k.transform=(b.devicePixelRatio||1)<2?"translate("+p+"px, "+h+"px)":"translate3d("+p+"px, "+h+"px, 0)",k)):Object.assign(Object.assign({},C),{},((t={})[g]=m?h+"px":"",t[v]=f?p+"px":"",t.transform="",t))}var z={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.options,r=e.name,i=n.offset,a=void 0===i?[0,0]:i,o=R.reduce((function(e,n){return e[n]=function(e,t,n){var r=U(e),i=[E,T].indexOf(r)>=0?-1:1,a="function"===typeof n?n(Object.assign(Object.assign({},t),{},{placement:e})):n,o=a[0],s=a[1];return o=o||0,s=(s||0)*i,[E,w].indexOf(r)>=0?{x:s,y:o}:{x:o,y:s}}(n,t.rects,a),e}),{}),s=o[t.placement],d=s.x,c=s.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=d,t.modifiersData.popperOffsets.y+=c),t.modifiersData[r]=o}},Y={left:"right",right:"left",bottom:"top",top:"bottom"};function $(e){return e.replace(/left|right|bottom|top/g,(function(e){return Y[e]}))}var G={start:"end",end:"start"};function X(e){return e.replace(/start|end/g,(function(e){return G[e]}))}function K(e,t){var n,r=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(r&&((n=r)instanceof a(n).ShadowRoot||n instanceof ShadowRoot)){var i=t;do{if(i&&e.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function J(e){return Object.assign(Object.assign({},e),{},{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function ee(e,t){return t===I?J(function(e){var t=a(e),n=l(e),r=t.visualViewport,i=n.clientWidth,o=n.clientHeight,s=0,d=0;return r&&(i=r.width,o=r.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(s=r.offsetLeft,d=r.offsetTop)),{width:i,height:o,x:s+u(e),y:d}}(e)):d(t)?function(e){var t=i(e);return t.top=t.top+e.clientTop,t.left=t.left+e.clientLeft,t.bottom=t.top+e.clientHeight,t.right=t.left+e.clientWidth,t.width=e.clientWidth,t.height=e.clientHeight,t.x=t.left,t.y=t.top,t}(t):J(function(e){var t=l(e),n=o(e),r=e.ownerDocument.body,i=Math.max(t.scrollWidth,t.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),a=Math.max(t.scrollHeight,t.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),s=-n.scrollLeft+u(e),d=-n.scrollTop;return"rtl"===p(r||t).direction&&(s+=Math.max(t.clientWidth,r?r.clientWidth:0)-i),{width:i,height:a,x:s,y:d}}(l(e)))}function te(e,t,n){var r="clippingParents"===t?function(e){var t=b(v(e)),n=["absolute","fixed"].indexOf(p(e).position)>=0&&d(e)?P(e):e;return s(n)?t.filter((function(e){return s(e)&&K(e,n)&&"body"!==c(e)})):[]}(e):[].concat(t),i=[].concat(r,[n]),a=i[0],o=i.reduce((function(t,n){var r=ee(e,n);return t.top=Math.max(r.top,t.top),t.right=Math.min(r.right,t.right),t.bottom=Math.min(r.bottom,t.bottom),t.left=Math.max(r.left,t.left),t}),ee(e,a));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}function ne(e){return Object.assign(Object.assign({},{top:0,right:0,bottom:0,left:0}),e)}function re(e,t){return t.reduce((function(t,n){return t[n]=e,t}),{})}function ie(e,t){void 0===t&&(t={});var n=t,r=n.placement,a=void 0===r?e.placement:r,o=n.boundary,d=void 0===o?"clippingParents":o,c=n.rootBoundary,u=void 0===c?I:c,p=n.elementContext,h=void 0===p?x:p,f=n.altBoundary,m=void 0!==f&&f,v=n.padding,g=void 0===v?0:v,b=ne("number"!==typeof g?g:re(g,O)),y=h===x?"reference":x,k=e.elements.reference,P=e.rects.popper,E=e.elements[m?y:h],C=te(s(E)?E:E.contextElement||l(e.elements.popper),d,u),_=i(k),A=Z({reference:_,element:P,strategy:"absolute",placement:a}),D=J(Object.assign(Object.assign({},P),A)),R=h===x?D:_,M={top:C.top-R.top+b.top,bottom:R.bottom-C.bottom+b.bottom,left:C.left-R.left+b.left,right:R.right-C.right+b.right},N=e.modifiersData.offset;if(h===x&&N){var V=N[a];Object.keys(M).forEach((function(e){var t=[w,S].indexOf(e)>=0?1:-1,n=[T,S].indexOf(e)>=0?"y":"x";M[e]+=V[n]*t}))}return M}function ae(e,t,n){return Math.max(e,Math.min(t,n))}var oe={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name,i=n.mainAxis,a=void 0===i||i,o=n.altAxis,s=void 0!==o&&o,d=n.boundary,c=n.rootBoundary,l=n.altBoundary,u=n.padding,p=n.tether,h=void 0===p||p,f=n.tetherOffset,v=void 0===f?0:f,g=ie(t,{boundary:d,rootBoundary:c,padding:u,altBoundary:l}),b=U(t.placement),y=F(t.placement),k=!y,C=q(b),O="x"===C?"y":"x",A=t.modifiersData.popperOffsets,I=t.rects.reference,x=t.rects.popper,D="function"===typeof v?v(Object.assign(Object.assign({},t.rects),{},{placement:t.placement})):v,R={x:0,y:0};if(A){if(a){var M="y"===C?T:E,N="y"===C?S:w,V="y"===C?"height":"width",j=A[C],L=A[C]+g[M],B=A[C]-g[N],W=h?-x[V]/2:0,Z=y===_?I[V]:x[V],Q=y===_?-x[V]:-I[V],H=t.elements.arrow,z=h&&H?m(H):{width:0,height:0},Y=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},$=Y[M],G=Y[N],X=ae(0,I[V],z[V]),K=k?I[V]/2-W-X-$-D:Z-X-$-D,J=k?-I[V]/2+W+X+G+D:Q+X+G+D,ee=t.elements.arrow&&P(t.elements.arrow),te=ee?"y"===C?ee.clientTop||0:ee.clientLeft||0:0,ne=t.modifiersData.offset?t.modifiersData.offset[t.placement][C]:0,re=A[C]+K-ne-te,oe=A[C]+J-ne,se=ae(h?Math.min(L,re):L,j,h?Math.max(B,oe):B);A[C]=se,R[C]=se-j}if(s){var de="x"===C?T:E,ce="x"===C?S:w,le=A[O],ue=ae(le+g[de],le,le-g[ce]);A[O]=ue,R[O]=ue-le}t.modifiersData[r]=R}},requiresIfExists:["offset"]};var se={name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,r=e.name,i=n.elements.arrow,a=n.modifiersData.popperOffsets,o=U(n.placement),s=q(o),d=[E,w].indexOf(o)>=0?"height":"width";if(i&&a){var c=n.modifiersData[r+"#persistent"].padding,l=m(i),u="y"===s?T:E,p="y"===s?S:w,h=n.rects.reference[d]+n.rects.reference[s]-a[s]-n.rects.popper[d],f=a[s]-n.rects.reference[s],v=P(i),g=v?"y"===s?v.clientHeight||0:v.clientWidth||0:0,b=h/2-f/2,y=c[u],k=g-l[d]-c[p],C=g/2-l[d]/2+b,O=ae(y,C,k),_=s;n.modifiersData[r]=((t={})[_]=O,t.centerOffset=O-C,t)}},effect:function(e){var t=e.state,n=e.options,r=e.name,i=n.element,a=void 0===i?"[data-popper-arrow]":i,o=n.padding,s=void 0===o?0:o;null!=a&&("string"!==typeof a||(a=t.elements.popper.querySelector(a)))&&K(t.elements.popper,a)&&(t.elements.arrow=a,t.modifiersData[r+"#persistent"]={padding:ne("number"!==typeof s?s:re(s,O))})},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function de(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function ce(e){return[T,w,S,E].some((function(t){return e[t]>=0}))}var le=B({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,r=e.options,i=r.scroll,o=void 0===i||i,s=r.resize,d=void 0===s||s,c=a(t.elements.popper),l=[].concat(t.scrollParents.reference,t.scrollParents.popper);return o&&l.forEach((function(e){e.addEventListener("scroll",n.update,W)})),d&&c.addEventListener("resize",n.update,W),function(){o&&l.forEach((function(e){e.removeEventListener("scroll",n.update,W)})),d&&c.removeEventListener("resize",n.update,W)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=Z({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,r=n.gpuAcceleration,i=void 0===r||r,a=n.adaptive,o=void 0===a||a,s={placement:U(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign(Object.assign({},t.styles.popper),H(Object.assign(Object.assign({},s),{},{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign(Object.assign({},t.styles.arrow),H(Object.assign(Object.assign({},s),{},{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1})))),t.attributes.popper=Object.assign(Object.assign({},t.attributes.popper),{},{"data-popper-placement":t.placement})},data:{}},{name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var n=t.styles[e]||{},r=t.attributes[e]||{},i=t.elements[e];d(i)&&c(i)&&(Object.assign(i.style,n),Object.keys(r).forEach((function(e){var t=r[e];!1===t?i.removeAttribute(e):i.setAttribute(e,!0===t?"":t)})))}))},effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach((function(e){var r=t.elements[e],i=t.attributes[e]||{},a=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:n[e]).reduce((function(e,t){return e[t]="",e}),{});d(r)&&c(r)&&(Object.assign(r.style,a),Object.keys(i).forEach((function(e){r.removeAttribute(e)})))}))}},requires:["computeStyles"]},z,{name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var i=n.mainAxis,a=void 0===i||i,o=n.altAxis,s=void 0===o||o,d=n.fallbackPlacements,c=n.padding,l=n.boundary,u=n.rootBoundary,p=n.altBoundary,h=n.flipVariations,f=void 0===h||h,m=n.allowedAutoPlacements,v=t.options.placement,g=U(v),b=d||(g===v||!f?[$(v)]:function(e){if(U(e)===C)return[];var t=$(e);return[X(e),t,X(t)]}(v)),y=[v].concat(b).reduce((function(e,n){return e.concat(U(n)===C?function(e,t){void 0===t&&(t={});var n=t,r=n.placement,i=n.boundary,a=n.rootBoundary,o=n.padding,s=n.flipVariations,d=n.allowedAutoPlacements,c=void 0===d?R:d,l=F(r),u=l?s?D:D.filter((function(e){return F(e)===l})):O,p=u.filter((function(e){return c.indexOf(e)>=0}));0===p.length&&(p=u);var h=p.reduce((function(t,n){return t[n]=ie(e,{placement:n,boundary:i,rootBoundary:a,padding:o})[U(n)],t}),{});return Object.keys(h).sort((function(e,t){return h[e]-h[t]}))}(t,{placement:n,boundary:l,rootBoundary:u,padding:c,flipVariations:f,allowedAutoPlacements:m}):n)}),[]),k=t.rects.reference,P=t.rects.popper,A=new Map,I=!0,x=y[0],M=0;M<y.length;M++){var N=y[M],V=U(N),j=F(N)===_,L=[T,S].indexOf(V)>=0,B=L?"width":"height",W=ie(t,{placement:N,boundary:l,rootBoundary:u,altBoundary:p,padding:c}),q=L?j?w:E:j?S:T;k[B]>P[B]&&(q=$(q));var Z=$(q),Q=[];if(a&&Q.push(W[V]<=0),s&&Q.push(W[q]<=0,W[Z]<=0),Q.every((function(e){return e}))){x=N,I=!1;break}A.set(N,Q)}if(I)for(var H=function(e){var t=y.find((function(t){var n=A.get(t);if(n)return n.slice(0,e).every((function(e){return e}))}));if(t)return x=t,"break"},z=f?3:1;z>0;z--){if("break"===H(z))break}t.placement!==x&&(t.modifiersData[r]._skip=!0,t.placement=x,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}},oe,se,{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,r=t.rects.reference,i=t.rects.popper,a=t.modifiersData.preventOverflow,o=ie(t,{elementContext:"reference"}),s=ie(t,{altBoundary:!0}),d=de(o,r),c=de(s,i,a),l=ce(d),u=ce(c);t.modifiersData[n]={referenceClippingOffsets:d,popperEscapeOffsets:c,isReferenceHidden:l,hasPopperEscaped:u},t.attributes.popper=Object.assign(Object.assign({},t.attributes.popper),{},{"data-popper-reference-hidden":l,"data-popper-escaped":u})}}]}),ue=n(39636),pe=n.n(ue),he=function(e){return e.reduce((function(e,t){var n=t[0],r=t[1];return e[n]=r,e}),{})},fe="undefined"!==typeof window&&window.document&&window.document.createElement?r.useLayoutEffect:r.useEffect,me=[],ve=function(e,t,n){void 0===n&&(n={});var i=r.useRef(null),a={onFirstUpdate:n.onFirstUpdate,placement:n.placement||"bottom",strategy:n.strategy||"absolute",modifiers:n.modifiers||me},o=r.useState({styles:{popper:{position:a.strategy,left:"0",top:"0"}},attributes:{}}),s=o[0],d=o[1],c=r.useMemo((function(){return{name:"updateState",enabled:!0,phase:"write",fn:function(e){var t=e.state,n=Object.keys(t.elements);d({styles:he(n.map((function(e){return[e,t.styles[e]||{}]}))),attributes:he(n.map((function(e){return[e,t.attributes[e]]})))})},requires:["computeStyles"]}}),[]),l=r.useMemo((function(){var e={onFirstUpdate:a.onFirstUpdate,placement:a.placement,strategy:a.strategy,modifiers:[].concat(a.modifiers,[c,{name:"applyStyles",enabled:!1}])};return pe()(i.current,e)?i.current||e:(i.current=e,e)}),[a.onFirstUpdate,a.placement,a.strategy,a.modifiers,c]),u=r.useRef();return fe((function(){u.current&&u.current.setOptions(l)}),[l]),fe((function(){if(null!=e&&null!=t){var r=(n.createPopper||le)(e,t,l);return u.current=r,function(){r.destroy(),u.current=null}}}),[e,t,n.createPopper]),{state:u.current?u.current.state:null,styles:s.styles,attributes:s.attributes,update:u.current?u.current.update:null,forceUpdate:u.current?u.current.forceUpdate:null}}},531:function(e,t,n){"use strict";n.d(t,{Z:function(){return h}});var r=n(59080),i=n(65793),a=n(67743);function o(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}var s=n(37667),d=n.n(s),c=n(5048),l=n(84218),u=function(e,t){return e&&t&&t.split(" ").forEach((function(t){return r=t,void((n=e).classList?n.classList.remove(r):"string"===typeof n.className?n.className=o(n.className,r):n.setAttribute("class",o(n.className&&n.className.baseVal||"",r)));var n,r}))},p=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).appliedClasses={appear:{},enter:{},exit:{}},t.onEnter=function(e,n){var r=t.resolveArguments(e,n),i=r[0],a=r[1];t.removeClasses(i,"exit"),t.addClass(i,a?"appear":"enter","base"),t.props.onEnter&&t.props.onEnter(e,n)},t.onEntering=function(e,n){var r=t.resolveArguments(e,n),i=r[0],a=r[1]?"appear":"enter";t.addClass(i,a,"active"),t.props.onEntering&&t.props.onEntering(e,n)},t.onEntered=function(e,n){var r=t.resolveArguments(e,n),i=r[0],a=r[1]?"appear":"enter";t.removeClasses(i,a),t.addClass(i,a,"done"),t.props.onEntered&&t.props.onEntered(e,n)},t.onExit=function(e){var n=t.resolveArguments(e)[0];t.removeClasses(n,"appear"),t.removeClasses(n,"enter"),t.addClass(n,"exit","base"),t.props.onExit&&t.props.onExit(e)},t.onExiting=function(e){var n=t.resolveArguments(e)[0];t.addClass(n,"exit","active"),t.props.onExiting&&t.props.onExiting(e)},t.onExited=function(e){var n=t.resolveArguments(e)[0];t.removeClasses(n,"exit"),t.addClass(n,"exit","done"),t.props.onExited&&t.props.onExited(e)},t.resolveArguments=function(e,n){return t.props.nodeRef?[t.props.nodeRef.current,e]:[e,n]},t.getClassNames=function(e){var n=t.props.classNames,r="string"===typeof n,i=r?""+(r&&n?n+"-":"")+e:n[e];return{baseClassName:i,activeClassName:r?i+"-active":n[e+"Active"],doneClassName:r?i+"-done":n[e+"Done"]}},t}(0,a.Z)(t,e);var n=t.prototype;return n.addClass=function(e,t,n){var r=this.getClassNames(t)[n+"ClassName"],i=this.getClassNames("enter").doneClassName;"appear"===t&&"done"===n&&i&&(r+=" "+i),"active"===n&&e&&(0,l.Q)(e),r&&(this.appliedClasses[t][n]=r,function(e,t){e&&t&&t.split(" ").forEach((function(t){return r=t,void((n=e).classList?n.classList.add(r):function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}(n,r)||("string"===typeof n.className?n.className=n.className+" "+r:n.setAttribute("class",(n.className&&n.className.baseVal||"")+" "+r)));var n,r}))}(e,r))},n.removeClasses=function(e,t){var n=this.appliedClasses[t],r=n.base,i=n.active,a=n.done;this.appliedClasses[t]={},r&&u(e,r),i&&u(e,i),a&&u(e,a)},n.render=function(){var e=this.props,t=(e.classNames,(0,i.Z)(e,["classNames"]));return d().createElement(c.ZP,(0,r.Z)({},t,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(d().Component);p.defaultProps={classNames:""},p.propTypes={};var h=p},91138:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var r=n(65793),i=n(59080);var a=n(67743),o=n(37667),s=n.n(o),d=n(69651);function c(e,t){var n=Object.create(null);return e&&o.Children.map(e,(function(e){return e})).forEach((function(e){n[e.key]=function(e){return t&&(0,o.isValidElement)(e)?t(e):e}(e)})),n}function l(e,t,n){return null!=n[t]?n[t]:e.props[t]}function u(e,t,n){var r=c(e.children),i=function(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var r,i=Object.create(null),a=[];for(var o in e)o in t?a.length&&(i[o]=a,a=[]):a.push(o);var s={};for(var d in t){if(i[d])for(r=0;r<i[d].length;r++){var c=i[d][r];s[i[d][r]]=n(c)}s[d]=n(d)}for(r=0;r<a.length;r++)s[a[r]]=n(a[r]);return s}(t,r);return Object.keys(i).forEach((function(a){var s=i[a];if((0,o.isValidElement)(s)){var d=a in t,c=a in r,u=t[a],p=(0,o.isValidElement)(u)&&!u.props.in;!c||d&&!p?c||!d||p?c&&d&&(0,o.isValidElement)(u)&&(i[a]=(0,o.cloneElement)(s,{onExited:n.bind(null,s),in:u.props.in,exit:l(s,"exit",e),enter:l(s,"enter",e)})):i[a]=(0,o.cloneElement)(s,{in:!1}):i[a]=(0,o.cloneElement)(s,{onExited:n.bind(null,s),in:!0,exit:l(s,"exit",e),enter:l(s,"enter",e)})}})),i}var p=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},h=function(e){function t(t,n){var r,i=(r=e.call(this,t,n)||this).handleExited.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(r));return r.state={contextValue:{isMounting:!0},handleExited:i,firstRender:!0},r}(0,a.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(e,t){var n,r,i=t.children,a=t.handleExited;return{children:t.firstRender?(n=e,r=a,c(n.children,(function(e){return(0,o.cloneElement)(e,{onExited:r.bind(null,e),in:!0,appear:l(e,"appear",n),enter:l(e,"enter",n),exit:l(e,"exit",n)})}))):u(e,i,a),firstRender:!1}},n.handleExited=function(e,t){var n=c(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var n=(0,i.Z)({},t.children);return delete n[e.key],{children:n}})))},n.render=function(){var e=this.props,t=e.component,n=e.childFactory,i=(0,r.Z)(e,["component","childFactory"]),a=this.state.contextValue,o=p(this.state.children).map(n);return delete i.appear,delete i.enter,delete i.exit,null===t?s().createElement(d.Z.Provider,{value:a},o):s().createElement(d.Z.Provider,{value:a},s().createElement(t,i,o))},t}(s().Component);h.propTypes={},h.defaultProps={component:"div",childFactory:function(e){return e}};var f=h},90604:function(e,t,n){var r;!function(i,a){"use strict";var o="function",s="undefined",d="object",c="string",l="major",u="model",p="name",h="type",f="vendor",m="version",v="architecture",g="console",b="mobile",y="tablet",k="smarttv",P="wearable",T="embedded",S="Amazon",w="Apple",E="ASUS",C="BlackBerry",O="Firefox",_="Google",A="Huawei",I="LG",x="Microsoft",D="Motorola",R="Opera",M="Samsung",N="Sharp",V="Sony",j="Xiaomi",L="Zebra",B="Facebook",W="Chromium OS",U="Mac OS",F=function(e){for(var t={},n=0;n<e.length;n++)t[e[n].toUpperCase()]=e[n];return t},q=function(e,t){return typeof e===c&&-1!==Z(t).indexOf(Z(e))},Z=function(e){return e.toLowerCase()},Q=function(e,t){if(typeof e===c)return e=e.replace(/^\s\s*/,""),typeof t===s?e:e.substring(0,350)},H=function(e,t){for(var n,r,i,s,c,l,u=0;u<t.length&&!c;){var p=t[u],h=t[u+1];for(n=r=0;n<p.length&&!c&&p[n];)if(c=p[n++].exec(e))for(i=0;i<h.length;i++)l=c[++r],typeof(s=h[i])===d&&s.length>0?2===s.length?typeof s[1]==o?this[s[0]]=s[1].call(this,l):this[s[0]]=s[1]:3===s.length?typeof s[1]!==o||s[1].exec&&s[1].test?this[s[0]]=l?l.replace(s[1],s[2]):a:this[s[0]]=l?s[1].call(this,l,s[2]):a:4===s.length&&(this[s[0]]=l?s[3].call(this,l.replace(s[1],s[2])):a):this[s]=l||a;u+=2}},z=function(e,t){for(var n in t)if(typeof t[n]===d&&t[n].length>0){for(var r=0;r<t[n].length;r++)if(q(t[n][r],e))return"?"===n?a:n}else if(q(t[n],e))return"?"===n?a:n;return e},Y={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},$={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[m,[p,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[m,[p,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[p,m],[/opios[\/ ]+([\w\.]+)/i],[m,[p,"Opera Mini"]],[/\bopr\/([\w\.]+)/i],[m,[p,R]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[p,m],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[m,[p,"UCBrowser"]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[m,[p,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[m,[p,"WeChat"]],[/konqueror\/([\w\.]+)/i],[m,[p,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[m,[p,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[m,[p,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[p,/(.+)/,"$1 Secure Browser"],m],[/\bfocus\/([\w\.]+)/i],[m,[p,"Firefox Focus"]],[/\bopt\/([\w\.]+)/i],[m,[p,"Opera Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[m,[p,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[m,[p,"Dolphin"]],[/coast\/([\w\.]+)/i],[m,[p,"Opera Coast"]],[/miuibrowser\/([\w\.]+)/i],[m,[p,"MIUI Browser"]],[/fxios\/([-\w\.]+)/i],[m,[p,O]],[/\bqihu|(qi?ho?o?|360)browser/i],[[p,"360 Browser"]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[p,/(.+)/,"$1 Browser"],m],[/(comodo_dragon)\/([\w\.]+)/i],[[p,/_/g," "],m],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[p,m],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[p],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[p,B],m],[/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[p,m],[/\bgsa\/([\w\.]+) .*safari\//i],[m,[p,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[m,[p,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[m,[p,"Chrome Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[p,"Chrome WebView"],m],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[m,[p,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[p,m],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[m,[p,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[m,p],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[p,[m,z,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[p,m],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[p,"Netscape"],m],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[m,[p,"Firefox Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[p,m],[/(cobalt)\/([\w\.]+)/i],[p,[m,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[v,"amd64"]],[/(ia32(?=;))/i],[[v,Z]],[/((?:i[346]|x)86)[;\)]/i],[[v,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[v,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[v,"armhf"]],[/windows (ce|mobile); ppc;/i],[[v,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[v,/ower/,"",Z]],[/(sun4\w)[;\)]/i],[[v,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[v,Z]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[u,[f,M],[h,y]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[u,[f,M],[h,b]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[u,[f,w],[h,b]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[u,[f,w],[h,y]],[/(macintosh);/i],[u,[f,w]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[u,[f,N],[h,b]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[u,[f,A],[h,y]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[u,[f,A],[h,b]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[u,/_/g," "],[f,j],[h,b]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[u,/_/g," "],[f,j],[h,y]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[u,[f,"OPPO"],[h,b]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[u,[f,"Vivo"],[h,b]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[u,[f,"Realme"],[h,b]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[u,[f,D],[h,b]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[u,[f,D],[h,y]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[u,[f,I],[h,y]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[u,[f,I],[h,b]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[u,[f,"Lenovo"],[h,y]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[u,/_/g," "],[f,"Nokia"],[h,b]],[/(pixel c)\b/i],[u,[f,_],[h,y]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[u,[f,_],[h,b]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[u,[f,V],[h,b]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[u,"Xperia Tablet"],[f,V],[h,y]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[u,[f,"OnePlus"],[h,b]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[u,[f,S],[h,y]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[u,/(.+)/g,"Fire Phone $1"],[f,S],[h,b]],[/(playbook);[-\w\),; ]+(rim)/i],[u,f,[h,y]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[u,[f,C],[h,b]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[u,[f,E],[h,y]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[u,[f,E],[h,b]],[/(nexus 9)/i],[u,[f,"HTC"],[h,y]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[f,[u,/_/g," "],[h,b]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[u,[f,"Acer"],[h,y]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[u,[f,"Meizu"],[h,b]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[f,u,[h,b]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[f,u,[h,y]],[/(surface duo)/i],[u,[f,x],[h,y]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[u,[f,"Fairphone"],[h,b]],[/(u304aa)/i],[u,[f,"AT&T"],[h,b]],[/\bsie-(\w*)/i],[u,[f,"Siemens"],[h,b]],[/\b(rct\w+) b/i],[u,[f,"RCA"],[h,y]],[/\b(venue[\d ]{2,7}) b/i],[u,[f,"Dell"],[h,y]],[/\b(q(?:mv|ta)\w+) b/i],[u,[f,"Verizon"],[h,y]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[u,[f,"Barnes & Noble"],[h,y]],[/\b(tm\d{3}\w+) b/i],[u,[f,"NuVision"],[h,y]],[/\b(k88) b/i],[u,[f,"ZTE"],[h,y]],[/\b(nx\d{3}j) b/i],[u,[f,"ZTE"],[h,b]],[/\b(gen\d{3}) b.+49h/i],[u,[f,"Swiss"],[h,b]],[/\b(zur\d{3}) b/i],[u,[f,"Swiss"],[h,y]],[/\b((zeki)?tb.*\b) b/i],[u,[f,"Zeki"],[h,y]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[f,"Dragon Touch"],u,[h,y]],[/\b(ns-?\w{0,9}) b/i],[u,[f,"Insignia"],[h,y]],[/\b((nxa|next)-?\w{0,9}) b/i],[u,[f,"NextBook"],[h,y]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[f,"Voice"],u,[h,b]],[/\b(lvtel\-)?(v1[12]) b/i],[[f,"LvTel"],u,[h,b]],[/\b(ph-1) /i],[u,[f,"Essential"],[h,b]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[u,[f,"Envizen"],[h,y]],[/\b(trio[-\w\. ]+) b/i],[u,[f,"MachSpeed"],[h,y]],[/\btu_(1491) b/i],[u,[f,"Rotor"],[h,y]],[/(shield[\w ]+) b/i],[u,[f,"Nvidia"],[h,y]],[/(sprint) (\w+)/i],[f,u,[h,b]],[/(kin\.[onetw]{3})/i],[[u,/\./g," "],[f,x],[h,b]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[u,[f,L],[h,y]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[u,[f,L],[h,b]],[/smart-tv.+(samsung)/i],[f,[h,k]],[/hbbtv.+maple;(\d+)/i],[[u,/^/,"SmartTV"],[f,M],[h,k]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[f,I],[h,k]],[/(apple) ?tv/i],[f,[u,"Apple TV"],[h,k]],[/crkey/i],[[u,"Chromecast"],[f,_],[h,k]],[/droid.+aft(\w)( bui|\))/i],[u,[f,S],[h,k]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[u,[f,N],[h,k]],[/(bravia[\w ]+)( bui|\))/i],[u,[f,V],[h,k]],[/(mitv-\w{5}) bui/i],[u,[f,j],[h,k]],[/Hbbtv.*(technisat) (.*);/i],[f,u,[h,k]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[f,Q],[u,Q],[h,k]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[h,k]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[f,u,[h,g]],[/droid.+; (shield) bui/i],[u,[f,"Nvidia"],[h,g]],[/(playstation [345portablevi]+)/i],[u,[f,V],[h,g]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[u,[f,x],[h,g]],[/((pebble))app/i],[f,u,[h,P]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[u,[f,w],[h,P]],[/droid.+; (glass) \d/i],[u,[f,_],[h,P]],[/droid.+; (wt63?0{2,3})\)/i],[u,[f,L],[h,P]],[/(quest( 2| pro)?)/i],[u,[f,B],[h,P]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[f,[h,T]],[/(aeobc)\b/i],[u,[f,S],[h,T]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[u,[h,b]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[u,[h,y]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[h,y]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[h,b]],[/(android[-\w\. ]{0,9});.+buil/i],[u,[f,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[m,[p,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[m,[p,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[p,m],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[m,p]],os:[[/microsoft (windows) (vista|xp)/i],[p,m],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[p,[m,z,Y]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[p,"Windows"],[m,z,Y]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/ios;fbsv\/([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[m,/_/g,"."],[p,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[p,U],[m,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[m,p],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[p,m],[/\(bb(10);/i],[m,[p,C]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[m,[p,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[m,[p,"Firefox OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[m,[p,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[m,[p,"watchOS"]],[/crkey\/([\d\.]+)/i],[m,[p,"Chromecast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[p,W],m],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[p,m],[/(sunos) ?([\w\.\d]*)/i],[[p,"Solaris"],m],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[p,m]]},G=function(e,t){if(typeof e===d&&(t=e,e=a),!(this instanceof G))return new G(e,t).getResult();var n=typeof i!==s&&i.navigator?i.navigator:a,r=e||(n&&n.userAgent?n.userAgent:""),l=n&&n.userAgentData?n.userAgentData:a,u=t?function(e,t){var n={};for(var r in e)t[r]&&t[r].length%2===0?n[r]=t[r].concat(e[r]):n[r]=e[r];return n}($,t):$,p=n&&n.userAgent==r;return this.getBrowser=function(){var e,t={};return t.name=a,t.version=a,H.call(t,r,u.browser),t.major=typeof(e=t.version)===c?e.replace(/[^\d\.]/g,"").split(".")[0]:a,p&&n&&n.brave&&typeof n.brave.isBrave==o&&(t.name="Brave"),t},this.getCPU=function(){var e={};return e.architecture=a,H.call(e,r,u.cpu),e},this.getDevice=function(){var e={};return e.vendor=a,e.model=a,e.type=a,H.call(e,r,u.device),p&&!e.type&&l&&l.mobile&&(e.type=b),p&&"Macintosh"==e.model&&n&&typeof n.standalone!==s&&n.maxTouchPoints&&n.maxTouchPoints>2&&(e.model="iPad",e.type=y),e},this.getEngine=function(){var e={};return e.name=a,e.version=a,H.call(e,r,u.engine),e},this.getOS=function(){var e={};return e.name=a,e.version=a,H.call(e,r,u.os),p&&!e.name&&l&&"Unknown"!=l.platform&&(e.name=l.platform.replace(/chrome os/i,W).replace(/macos/i,U)),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return r},this.setUA=function(e){return r=typeof e===c&&e.length>350?Q(e,350):e,this},this.setUA(r),this};G.VERSION="0.7.35",G.BROWSER=F([p,m,l]),G.CPU=F([v]),G.DEVICE=F([u,f,h,g,b,k,y,P,T]),G.ENGINE=G.OS=F([p,m]),typeof t!==s?(e.exports&&(t=e.exports=G),t.UAParser=G):n.amdO?(r=function(){return G}.call(t,n,t,e))===a||(e.exports=r):typeof i!==s&&(i.UAParser=G);var X=typeof i!==s&&(i.jQuery||i.Zepto);if(X&&!X.ua){var K=new G;X.ua=K.getResult(),X.ua.get=function(){return K.getUA()},X.ua.set=function(e){K.setUA(e);var t=K.getResult();for(var n in t)X.ua[n]=t[n]}}}("object"===typeof window?window:this)},72839:function(e,t,n){"use strict";n.d(t,{J:function(){return l}});var r=n(63414),i=n(31950),a=n(87948),o=n(49506),s=n(99013),d=n(76528);var c={};function l(e){var t=(0,s.x)(e.client).cache,n=function(e,t){var n=i.useRef();return n.current&&(0,a.D)(n.current.deps,t)||(n.current={value:e(),deps:t}),n.current.value}((function(){var n=e.fragment,i=e.fragmentName,a=e.from,o=e.optimistic,s=void 0===o||o,d=(0,r._T)(e,["fragment","fragmentName","from","optimistic"]);return(0,r.pi)((0,r.pi)({},d),{returnPartialData:!0,id:"string"===typeof a?a:t.identify(a),query:t.getFragmentDoc(n,i),optimistic:s})}),[e]),o=function(e){var t=i.useRef(c);return t.current===c&&(t.current=e()),t}((function(){return u(t.diff(n))})),l=i.useCallback((function(){return o.current}),[]);return(0,d.$)(i.useCallback((function(e){var i=0,s=t.watch((0,r.pi)((0,r.pi)({},n),{immediate:!0,callback:function(t){(0,a.D)(t.result,o.current.data)||(o.current=u(t),clearTimeout(i),i=setTimeout(e))}}));return function(){s(),clearTimeout(i)}}),[t,n]),l,l)}function u(e){var t={data:e.result,complete:!!e.complete};return e.missing&&(t.missing=(0,o.bw)(e.missing.map((function(e){return e.missing})))),t}},59080:function(e,t,n){"use strict";function r(){return r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}n.d(t,{Z:function(){return r}})}}]);
//# sourceMappingURL=https://kinopoisk-frontend-internal.s3.mds.yandex.net/hd-www/release/_next/static/chunks/6245-e9d21edb5d8cc93d.js.map