(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5555],{75210:function(e,n,i){"use strict";i.d(n,{d:function(){return s}});var t=i(46758),a=i(94145),d=i(54800),l=i(21727);var o=i(32031);const s=e=>{const{loading:n,error:i,compositeOffer:s}=(e=>{let{target:n,feature:i,skip:t=!1}=e;const{loading:o,data:s,error:m}=(0,a.a)(d.o,{variables:{target:n,features:[i],checkSilentInvoiceAvailability:!1},skip:t||!n}),{subscriptionCompositeOffers:r=null}=s||{};return{loading:o,error:m,compositeOffer:(0,l.C)({target:n,billingFeatureNames:[i],subscriptionCompositeOffers:r,interfaceMeta:null})}})(e),{target:m,eventSessionId:r,batchPositionId:c,resultedOfferPositionIds:u}=s;return(0,o.D)(c,u),(0,t.j)({target:m,eventSessionId:r,batchPositionId:c,resultedOfferPositionIds:u}),{loading:n,error:i,compositeOffer:s}}},733:function(e,n,i){"use strict";i.d(n,{Sr:function(){return o},ck:function(){return s},lD:function(){return l}});var t=i(37667),a=i(14761);const d=()=>a.Z,l={useSubscriptionOfferNavigated:d,useSubscriptionOfferShowed:()=>({handleVisible:a.Z}),useSubscriptionOfferSucceed:d,useTransactionOfferNavigated:d,useTransactionOfferShowed:d,useTransactionOfferSucceed:d},o=(0,t.createContext)(l);function s(){return(0,t.useContext)(o)}},16520:function(e,n,i){"use strict";i.d(n,{q:function(){return A}});var t=i(4472),a=i(37667),d=i(98656),l=i.n(d),o=i(35247),s=i.n(o),m=i(21463),r=i(90425),c=i(99489),u=i(27252),k=i(55594),f=i(85376),v=i(14761),p=i(75210);var N=i(34673);const S=()=>{const{billingFeatureName:e,target:n,shouldOpenWidgetFromQuery:i,cleanOpenWidgetQuery:t}=(0,N.J)(),d=(e=>{let{billingFeatureName:n="",target:i="",shouldSkipOffer:t,onOpenWidget:d=v.Z,onCloseWidget:l=v.Z,onEmptyOffer:o}=e;const{loading:s,compositeOffer:m}=(0,p.d)({target:i,feature:n,skip:t}),{eventSessionId:r,batchPositionId:c,offersPositionId:u}=m,{tariffOfferName:k,optionOfferNames:N}=m.names,S=!k&&!N;(0,a.useEffect)((()=>{!S||s||t||o()}),[S,s,t]);const y=(0,a.useMemo)((()=>({isTarifficator:!0,eventSessionId:r,target:i,offersBatchId:c,offersPositionIds:u,tariffOfferName:k,optionOfferNames:N,onCloseWidget:l})),[c,u,N,i,k]),F=(0,f.c)(y,void 0,d);return S?void 0:F})({billingFeatureName:e,target:n,shouldSkipOffer:!i,onEmptyOffer:t,onCloseWidget:t});return i?d:void 0};var y=i(1909),F=i.n(y),g=i(47934);const{serviceId:b}=s()().publicRuntimeConfig,O=l().bind(F());let _=null;const{paymentToolsConfig:C}=s()().publicRuntimeConfig,I=(0,m.XJ)((e=>{const n="payment-manager-overlay",{testIds:i,isVisible:t,onSuccessSubscriptionPurchase:d,onSuccess:l,widgetSubServiceName:o}=e,s=(0,r.tq)(),m=(0,u.B)(),f={widgetServiceName:C.widgetServiceName,widgetSubServiceName:o,lang:m,testIds:i.length>0?i.join():void 0,targetNodeSelector:`#${n}`,widgetType:s?"kp-android":void 0,serviceId:b,filterStreams:"false",onSuccess:l},{0:v,1:p}=(0,a.useState)((0,c.e)().isManagerInited),N=S();return(0,a.useEffect)((()=>{v&&N&&N()}),[v,N]),(0,k.v)({initOptions:f,callbackAfterInit:()=>p(!0),onSuccessSubscriptionPurchase:d}),(0,a.useEffect)((()=>{if(_)return;if(document.getElementById(n))return;const{body:e}=document;_=document.createElement("div"),_.className=O("overlay");const i=document.createElement("div");i.id=n,i.className=O("root"),_.appendChild(i),e.appendChild(_)}),[]),(0,a.useEffect)((()=>{if(!_)return;const{body:e}=document;t&&(_.classList.add(O("visible")),e.classList.add(O("no-scroll"))),t||(_.classList.remove(O("visible")),e.classList.remove(O("no-scroll")))}),[t]),(0,g.jsx)(g.Fragment,{})}));var P=i(59617),h=i(4313),T=i(18486),j=i(32604),w=i(48323);function D(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}function x(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?D(Object(i),!0).forEach((function(n){(0,t.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):D(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}const A=()=>{const e=(0,P.L)(),n=(()=>{const{refetch:e}=(0,j.O)(),n=(0,w.r)();return{onClose:v.Z,onSuccess:()=>e(),onSuccessSubscriptionPurchase:()=>{(0,T.Nn)(),n()}}})(),i=(0,h.l)();return(0,g.jsx)(I,x(x({},n),{},{testIds:i,isVisible:e}))}},8710:function(e,n,i){"use strict";i.d(n,{K:function(){return f}});i(37667);var t=i(81921),a=i(99013),d=i(35247),l=i.n(d),o=i(32200),s=i(13126),m=i(4313),r=i(27252);const{environment:c,paymentToolsConfig:u}=l()().publicRuntimeConfig;var k=i(47934);const f=e=>{let{children:n,page:i}=e;const d=(()=>{var e;const n=(0,a.x)(),i=(0,r.B)(),{puid:t}=(0,o._)(n),d=(0,m.l)();return{lang:i,environment:c,puid:"number"===typeof t?String(t):null,metrikaCounterId:String((null===(e=s.sk[s.kW.MAIN])||void 0===e?void 0:e.id)||""),serviceChannel:u.serviceChannelName,service:u.serviceName,testIds:d,triggeredTestIds:d}})();return(0,k.jsx)(t.RY,{page:i,options:d,children:n})}},48323:function(e,n,i){"use strict";i.d(n,{r:function(){return d}});var t=i(47274),a=i(35903);const d=()=>{const[e]=(0,t.t)(a.r,{fetchPolicy:"network-only",errorPolicy:"all"});return e}},54800:function(e,n,i){"use strict";i.d(n,{o:function(){return t}});const t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"CompositeOffers"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"target"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"features"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"checkSilentInvoiceAvailability"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"subscriptionCompositeOffers"},arguments:[{kind:"Argument",name:{kind:"Name",value:"features"},value:{kind:"Variable",name:{kind:"Name",value:"features"}}},{kind:"Argument",name:{kind:"Name",value:"target"},value:{kind:"Variable",name:{kind:"Name",value:"target"}}},{kind:"Argument",name:{kind:"Name",value:"checkSilentInvoiceAvailability"},value:{kind:"Variable",name:{kind:"Name",value:"checkSilentInvoiceAvailability"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"SubscriptionCompositeOffers"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"CompositeOffersPlan"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"OfferPlanUnion"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"TrialUntilPlan"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"until"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"IntroUntilPlan"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"until"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"TrialPlan"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"period"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"IntroPlan"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"period"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"CompositeOffer"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PlusCompositeOffer"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"asset"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"subscriptionName"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"positionId"}},{kind:"Field",name:{kind:"Name",value:"structureType"}},{kind:"Field",name:{kind:"Name",value:"silentInvoiceAvailable"}},{kind:"Field",name:{kind:"Name",value:"forActiveOffers"},selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PlusOptionOffer"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PlusTariffOffer"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"optionOffers"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"text"}},{kind:"Field",name:{kind:"Name",value:"additionText"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"option"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"plans"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"CompositeOffersPlan"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"tariffOffer"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"text"}},{kind:"Field",name:{kind:"Name",value:"additionText"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"tariff"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"plans"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"CompositeOffersPlan"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"invoices"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"timestamp"}},{kind:"Field",name:{kind:"Name",value:"totalPrice"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"amount"}},{kind:"Field",name:{kind:"Name",value:"currency"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"CustomPayload"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"OttCompositeOfferCustomPayload"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"overridedText"}},{kind:"Field",name:{kind:"Name",value:"overridedAdditionalText"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"SubscriptionCompositeOffers"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"SubscriptionCompositeOffers"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"batchPositionId"}},{kind:"Field",name:{kind:"Name",value:"eventSessionId"}},{kind:"Field",name:{kind:"Name",value:"offers"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"compositeOffer"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"CompositeOffer"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"customPayload"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"CustomPayload"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}}]}},1909:function(e){e.exports={root:"styles_root__a4hg9",overlay:"styles_overlay__dNA6M",visible:"styles_visible___xKFq","no-scroll":"styles_no-scroll__T8TSA"}}}]);
//# sourceMappingURL=https://kinopoisk-frontend-internal.s3.mds.yandex.net/hd-www/release/_next/static/chunks/5555-25ac001c4ab73d6f.js.map