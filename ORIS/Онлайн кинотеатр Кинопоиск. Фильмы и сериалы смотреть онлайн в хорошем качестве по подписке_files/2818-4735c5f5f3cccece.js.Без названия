(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2818],{7759:function(e,n,i){"use strict";i.d(n,{JO:function(){return a},bU:function(){return o},jd:function(){return l},rt:function(){return d}});var t=i(46211);const a=e=>{if(void 0!==e){if(function(e){return!!e&&(e.watchNextMode===t.l.TrailerCompilationDefault||e.watchNextMode===t.l.TrailerCompilation_2||e.watchNextMode===t.l.TrailerCompilation_3||e.watchNextMode===t.l.TrailerCompilation_4)}(e)){const{items:n=[]}=e;return n[0]}if(o(e)){const{itemIds:n=[]}=e;return n[0]}return l(e)||d(e)?e.watchNextId:void 0}};function l(e){return(null===e||void 0===e?void 0:e.watchNextMode)===t.l.Trailer}function o(e){return(null===e||void 0===e?void 0:e.watchNextMode)===t.l.Tinder}function d(e){return(null===e||void 0===e?void 0:e.watchNextMode)===t.l.FranchiseCover}},69171:function(e,n,i){"use strict";let t;i.d(n,{I:function(){return t}}),function(e){e.Idle="idle",e.Loading="loading",e.Done="done",e.Added="added",e.Removed="removed",e.RemoveError="removeError",e.AddError="addError"}(t||(t={}))},74429:function(e,n,i){"use strict";i.d(n,{Ci:function(){return r},Pp:function(){return m},Tu:function(){return c},ye:function(){return s}});var t=i(52269),a=i(18943),l=i(85359),o=i(69171),d=i(63403);function r(e,n){return null===e||void 0===e?void 0:e.find((e=>e.startTimeMs&&e.endTimeMs&&n>=e.startTimeMs&&n<=e.endTimeMs))}function s(){return(0,l.le)(d.a2)}function m(e,n){return"Add"===e?n===t.ne.Success?o.I.Added:o.I.AddError:n===t.ne.Success?o.I.Removed:o.I.RemoveError}const c=(e,n)=>{const i=[a.de.buffering,a.de.pause];return Boolean(!i.includes(e)||n&&e===a.de.buffering&&n!==a.de.pause)}},47159:function(e,n,i){"use strict";i.d(n,{M:function(){return m}});var t=i(4472),a=i(37667),l=i(61404),o=i(24269),d=i(47934);function r(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}function s(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?r(Object(i),!0).forEach((function(n){(0,t.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}const m=e=>{var n;let{errorMap:i,children:t}=e;const{0:r,1:m}=(0,a.useState)({name:null}),c=null===r.name?null:null!==(n=i[r.name])&&void 0!==n?n:i[l.io],u=(0,a.useMemo)((()=>({handleError:(e,n)=>{m((i=>s(s({},i),{},{name:e},n)))},cleanError:()=>{m((e=>s(s({},e),{},{name:null})))},addErrorData:e=>{m((n=>s(s({},n),e)))}})),[]);return(0,d.jsx)(o.$t.Provider,{value:u,children:(0,d.jsxs)(o.SQ.Provider,{value:r,children:[null!==c&&(0,d.jsx)(c,{}),t]})})}},22680:function(e,n,i){"use strict";i.d(n,{_:function(){return d}});var t=i(94145),a=i(4033);const l={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"MoviePlannedToWatch"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"movieId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Long"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"isAuthorized"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"movie"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"movieId"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"contentId"}},{kind:"FragmentSpread",name:{kind:"Name",value:"MovieTitle"}},{kind:"FragmentSpread",name:{kind:"Name",value:"MoviePlannedToWatch"},directives:[{kind:"Directive",name:{kind:"Name",value:"include"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"isAuthorized"}}}]}]},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"Title"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Title"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"localized"}},{kind:"Field",name:{kind:"Name",value:"original"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"MovieTitle"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Movie"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"Title"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"MoviePlannedToWatch"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Movie"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"userData"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isPlannedToWatch"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}}]};var o=i(52192);const d=e=>{var n,i,d,r;const{isAuthorized:s}=(0,a.o)(),{data:m}=(0,t.a)(l,{variables:{movieId:e,isAuthorized:s},errorPolicy:"all",skip:!e});return{isPlannedToWatch:Boolean(null===m||void 0===m||null===(n=m.movie)||void 0===n||null===(i=n.userData)||void 0===i?void 0:i.isPlannedToWatch),title:(0,o.o)(null===m||void 0===m||null===(d=m.movie)||void 0===d?void 0:d.title),contentId:null===m||void 0===m||null===(r=m.movie)||void 0===r?void 0:r.contentId}}},54765:function(e,n,i){"use strict";i.d(n,{L:function(){return c}});var t=i(7139),a=i(18451),l=i(58290),o=i(52192);function d(e){var n;return null!==(n=e.title.localized||e.title.original)&&void 0!==n?n:void 0}function r(e){var n;return null===(n=e.countries)||void 0===n?void 0:n[0]}var s=i(47894);var m=i(20768);function c(e){let{movie:n}=e;if(!n||!n.__typename)return"";const i=(0,l.l)(),c=[];return(0,o.o)(n.title)?((0,a.R)(n.__typename)?c.push(function(e){var n;const i=(0,l.l)(),t=(0,o.o)(e.title);let a=0;var d,r,s;"seasonsOnline"in e&&(a=(null!==(d=e.viewOption)&&void 0!==d&&d.isAvailableOnline?null===(r=e.seasonsOnline)||void 0===r?void 0:r.total:null===(s=e.seasonsAll)||void 0===s?void 0:s.total)||0);const m=a?i.formatMessage({id:"features.movie.d5e0155ebbc18d7992e472688ba54dc7"},{seasonsCount:a}):"",c="releaseYears"in e&&function(){let{start:e,end:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n&&e!==n?e?`${e}-${n}`:"":e?`${e}`:""}(null===(n=e.releaseYears)||void 0===n?void 0:n[0])||"";return i.formatMessage({id:"features.movie.9ea91dac982a324daeb5679bfa2850ad"},{title:t?`${t} `:"",seasonCountString:m?`, ${m}`:"",years:c?`, ${c}`:""})}(n)):"Video"!==n.__typename&&"Film"!==n.__typename||c.push(function(e){var n;let{movie:i}=e;return[d(i),i.ottProductionYear,null===(n=r(i))||void 0===n?void 0:n.name].filter(s.y).join(", ")}({movie:n})),c.push(i.formatMessage({id:"features.movie.cf630df67b3ec7f61bafe9731684c641"})),c.push((0,m.h)()),c.join(t.zV)):""}},87827:function(e,n,i){"use strict";i.d(n,{z:function(){return a}});var t=i(58290);const a=e=>(0,t.l)().formatMessage({id:"features.movie.d3a77e7204c458cb755b1dc09eb13013"},{userRating:e})},6392:function(e,n,i){"use strict";i.d(n,{C:function(){return t},s:function(){return a}});const t=2e3,a=11e3},583:function(e,n,i){"use strict";i.d(n,{t:function(){return l}});var t=i(41931),a=i(2445);const l=()=>{const{query:{[a.cG.PLAYING_CONTENT_ID]:e,[a.cG.OPENED_CHANNEL_ID]:n}}=(0,t.useRouter)();return"string"===typeof n?n:"string"===typeof e?e:""}},42555:function(e,n,i){"use strict";i.d(n,{Y:function(){return m}});var t=i(98656),a=i.n(t),l=(i(37667),i(80)),o=i(92339),d=i.n(o),r=i(47934);const s=a().bind(d()),m=e=>{const{onClick:n,children:i,isAnimated:t=!1,animationDuration:a=5,color:o=l.e.gray,withIcon:d=!1,className:m}=e;return(0,r.jsxs)("button",{className:s("button",o,m,{withIcon:d}),onClick:n,"data-tid":"BaseButton",children:[(0,r.jsx)("span",{className:s(t&&"button_animated"),style:{animationDuration:`${a}s`}}),i]})}},80:function(e,n,i){"use strict";let t;i.d(n,{e:function(){return t}}),function(e){e.orange="orange",e.gray="gray"}(t||(t={}))},41330:function(e,n,i){"use strict";i.d(n,{h:function(){return k}});var t=i(98656),a=i.n(t),l=i(37667),o=i(73342),d=i(2199),r=i(15269),s=i(93974),m=i.n(s),c=i(47934);const u=a().bind(m()),k=e=>{const{className:n,title:i,subTitle:t,logoUrl:a,logoWidth:s,logoHeight:m,titleLines:k=2,isNeedPlaceholder:v=!0,mode:p=r.I.DEFAULT,subTitleViewVariant:N=r.v.Regular,editorAnnotation:y}=e,{0:S,1:f}=(0,l.useState)(!1),g=p===r.I.WATCH_NEXT_TRAILER_COMPILATION,b=p===r.I.WATCH_NEXT_COVER,_=p===r.I.USER_VOTE,F=b||g,h=p===r.I.USER_VOTE?"placeholder-vote":"placeholder";let O=!1;s&&m&&(O=s>=m);const j=(0,c.jsx)("div",{style:{WebkitLineClamp:k},className:u(h,{"placeholder-watch-next":F}),children:i}),C=(0,l.useCallback)((()=>{f(!0)}),[]),T=v?j:void 0;return(0,c.jsxs)("div",{className:u("root",n,{visible:!a||S}),"data-tid":"Meta",children:[a?(0,c.jsx)("div",{className:u("logo"),children:(0,c.jsx)(o.E,{imageUrl:a,imageClassName:u("image",{image_horizontal:O,image_vertical:!O,image_loading:!S,"image_watch-next-trailer-compilation":g,"image_watch-next-cover":b}),placeholderResolution:d.W.FILM_LOGO,resolution:d.W.FILM_LOGO,customPlaceholder:T,isAnimationAllowed:!1,onLoaded:C,onError:C,alt:i})}):j,!_&&(0,c.jsxs)("div",{className:u("extraInfo"),children:[t&&(0,c.jsx)("div",{className:u("subtitle",{subtitle_medium:N===r.v.Medium}),children:t}),y&&(0,c.jsx)("div",{className:u("editorAnnotation"),children:y})]})]})}},15269:function(e,n,i){"use strict";let t,a;i.d(n,{I:function(){return t},v:function(){return a}}),function(e){e.DEFAULT="default",e.WATCH_NEXT_TRAILER_COMPILATION="watch-next-trailer-compilation",e.WATCH_NEXT_COVER="watch-next-cover",e.USER_VOTE="user-vote"}(t||(t={})),function(e){e[e.Regular=0]="Regular",e[e.Medium=1]="Medium"}(a||(a={}))},7995:function(e,n,i){"use strict";i.d(n,{r:function(){return d}});var t=i(4472),a=(i(37667),i(47934));function l(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}function o(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?l(Object(i),!0).forEach((function(n){(0,t.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):l(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}const d=e=>(0,a.jsx)("svg",o(o({viewBox:"0 0 36 36",fill:"#fff",xmlns:"http://www.w3.org/2000/svg"},e),{},{"data-tid":"StarIcon",children:(0,a.jsx)("path",{d:"M18 26.794 8.267 32.25l2.173-10.956-8.19-7.585 11.077-1.315L18 2.25l4.673 10.144 11.077 1.315-8.19 7.585 2.173 10.956L18 26.794Z"})}))},46211:function(e,n,i){"use strict";let t;i.d(n,{l:function(){return t}}),function(e){e.Trailer="trailer",e.FranchiseDefault="franchise_default",e.FranchiseCover="franchise_cover",e.TrailerCompilationDefault="trailer_compilation_default",e.TrailerCompilation_2="trailer_compilation_2",e.TrailerCompilation_3="trailer_compilation_3",e.TrailerCompilation_4="trailer_compilation_4",e.Tinder="tinder"}(t||(t={}))},71748:function(e,n,i){"use strict";i.d(n,{h:function(){return f},q:function(){return g}});var t=i(98656),a=i.n(t),l=i(37667),o=i(70716),d=i(94115),r=i(87827),s=i(47423),m=i(7995),c=i(62742),u=i.n(c),k=i(47934);const v=a().bind(u()),p=e=>{let{userRating:n,mode:i,removeUserRating:t}=e;const a=(0,s.k)(n||0),l=i===f.Modal;return(0,k.jsxs)("div",{className:v("user-picked-rating",l&&"modal"),"data-tid":"UserPickedRating",children:[(0,k.jsx)("div",{className:v("spacer")}),(0,k.jsxs)("div",{className:v("rating-badge",a,"animate"),children:[(0,k.jsx)(m.r,{className:v("star-icon"),"aria-hidden":!0}),(0,k.jsx)("span",{className:v("user-rating"),"aria-hidden":!0,children:n}),(0,k.jsx)(d.W,{children:(0,r.z)(n)})]}),(0,k.jsx)("div",{className:v("spacer-bottom")}),(0,k.jsx)("button",{className:v("remove-rating-button","animate"),onClick:t,children:(0,k.jsx)(o.Z,{id:"features.player.c1a13db10bc30adc58b0f26bf51c1465"})})]})};var N=i(40123),y=i.n(N);const S=a().bind(y());let f;!function(e){e.FullScreen="fullscreen",e.Modal="modal",e.WatchNext="watch-next"}(f||(f={}));const g=e=>{let{isTvSeries:n=!1,contentId:i,userRating:t,className:a,onMovieVoteChanged:o,mode:d=f.FullScreen}=e;const r=d===f.Modal,m=(0,l.useCallback)((e=>o({contentId:i,rating:e})),[i,o]),c=(0,l.useCallback)((()=>o({contentId:i,rating:0})),[i,o]);return(0,k.jsx)("div",{className:S(!r&&"post-credit-rating",a),"data-tid":"UserRatingScreen",children:t>0?(0,k.jsx)(p,{userRating:t,removeUserRating:c,mode:d}):(0,k.jsx)(s.l,{isTvSeries:n,onUserRatingChange:m,mode:d})})}},47423:function(e,n,i){"use strict";i.d(n,{l:function(){return f},k:function(){return S}});var t=i(98656),a=i.n(t),l=i(37667),o=i(34905),d=i(94115),r=i(87827),s=i(47934);const m=e=>{let{rating:n,className:i,children:t,onUserRatingChange:a,onFocus:o,onMouseOver:d}=e;const r=(0,l.useCallback)((()=>{a(n)}),[n,a]);return(0,s.jsx)("button",{className:i,onClick:r,onFocus:o,onMouseOver:d,"data-tid":"UserRatingButton",children:t})};var c=i(71748),u=i(7995);let k;!function(e){e.Positive="positive",e.Neutral="neutral",e.Negative="negative"}(k||(k={}));var v=i(89485),p=i.n(v);const N=a().bind(p()),y=new Array(10).fill(0).map(((e,n)=>n+1)),S=e=>e<5?k.Negative:e<7?k.Neutral:k.Positive,f=e=>{let{isTvSeries:n,onUserRatingChange:i,mode:t}=e;const a=t===c.h.WatchNext,k=t===c.h.Modal,{0:v,1:p}=(0,l.useState)(null),f=(()=>{const e=(0,o.Z)();return[e.formatMessage({id:"features.player.2d6111573ae860930a917e77afae76c9"}),e.formatMessage({id:"features.player.db04b2c6b8b2acf46e1f36577ccd5f24"}),e.formatMessage({id:"features.player.2f63fa9e3da884fdc879f78010505a48"}),e.formatMessage({id:"features.player.6036c6634b1e7981975de147bb17d532"}),e.formatMessage({id:"features.player.9e941406889c3924483670876cf2129e"}),e.formatMessage({id:"features.player.acab001b498ce51a32a6dabe50ee1e8f"}),e.formatMessage({id:"features.player.96dfcf5d9a4882379041072245f3bc17"}),e.formatMessage({id:"features.player.0d88ec7baa0b7632f909e220c0750f09"}),e.formatMessage({id:"features.player.3abdaad608e46210c486b0501281487b"}),e.formatMessage({id:"features.player.b03146ce4572384d098dc82ffc19cb3c"})]})(),g=(0,o.Z)(),b=n?g.formatMessage({id:"features.player.4c8967d597f89d50b6e1999be6e62c2f"}):g.formatMessage({id:"features.player.457778be5e4f4693b5a04bf30f45cd47"}),_=(0,l.useCallback)((()=>p(null)),[]),F=v||0,h=S(F),O=a?(0,s.jsx)("p",{className:N("rating-vote-text"),"data-tid":"component",children:b}):v?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:N("user-rating-mark"),"aria-hidden":!0,"data-tid":"component",children:v}),(0,s.jsx)("div",{className:N("user-rating-hint"),"aria-hidden":!0,"data-tid":"component",children:f[v-1]})]}):(0,s.jsx)("p",{className:N("rating-vote-text"),"data-tid":"component",children:b});return(0,s.jsxs)("div",{className:N("user-rating-vote",v&&h,a&&"watch-next-rating",k&&"modal"),"data-tid":"UserRatingVoteDialog",children:[(0,s.jsx)("div",{className:N("user-rating-title"),children:O}),(0,s.jsxs)("div",{className:N("user-rating-controls"),children:[(0,s.jsx)("div",{className:N("stars-set"),onMouseLeave:_,onBlur:_,children:y.map((e=>{const n=()=>p(e);return(0,s.jsxs)(m,{onMouseOver:n,onFocus:n,className:N("star",e<=F&&"hovered"),onUserRatingChange:i,rating:e,children:[(0,s.jsx)(u.r,{className:N("star-icon"),"aria-hidden":!0}),(0,s.jsx)(d.W,{children:(0,r.z)(e)}),(0,s.jsx)(d.W,{children:f[e-1]})]},`star_${e}`)}))}),a&&v&&(0,s.jsx)("div",{className:N("user-rating-mark"),"aria-hidden":!0,children:v})]})]})}},87553:function(e,n,i){"use strict";i.d(n,{W:function(){return m}});var t=i(37667),a=i(99013),l=i(73529),o=i(4033),d=i(19149),r=i(70581),s=i(13413);const m=e=>{let{ratingType:n}=e;const i=(0,d.$)({event:l.uq,eventParamsBuilder:e=>{var n;let{uiParams:{ratingType:i},callbackParams:[{uuid:t}],dependencies:{apolloClient:a}}=e;return{ratingType:i,uuid:t,title:null!==(n=(0,r.h)({apolloClient:a,movieId:t}))&&void 0!==n?n:""}},uiParams:{ratingType:n}}),m=(0,a.x)(),{isAuthorized:c}=(0,o.o)();return(0,t.useCallback)((e=>{const n=(0,s.U)(m,e,c);0===(null===n||void 0===n?void 0:n.rating)&&i({uuid:e})}),[i,m,c])}},30726:function(e,n,i){"use strict";let t,a;i.d(n,{K:function(){return t},b:function(){return a}}),function(e){e.COVER="COVER",e.TRAILER="TRAILER",e.TINDER="TINDER",e.WN_OFF="WN_OFF"}(t||(t={})),function(e){e.DEFAULT="DEFAULT",e.FRANCHISE="FRANCHISE",e.ANNOUNCE="ANNOUNCE"}(a||(a={}))},41170:function(e,n,i){"use strict";i.d(n,{X:function(){return wu}});var t=i(37667),a=i.n(t),l=i(41931),o=i.n(l),d=i(98656),r=i.n(d),s=i(1644),m=i.n(s),c=i(34905);function u(e){return(!("tabIndex"in e)||-1!==e.tabIndex)&&((!("disabled"in e)||!e.disabled)&&(!("A"===e.tagName&&!e.hasAttribute("href"))&&(!("hidden"in e)||!e.hidden)))}function k(e){if(!("focus"in e))return!1;try{e.focus()}catch{}return document.activeElement===e}function v(e){const n=(0,t.useRef)(),i=(0,t.useRef)(e),a=(0,t.useRef)(),l=(0,t.useCallback)((e=>{if(!n.current)return;if(![...e].some((e=>{let{type:n}=e;return"childList"===n})))return;if(!a.current)return;if(n.current.contains(a.current))return;const i=(t=n.current,Array.from(t.querySelectorAll("*")).filter(u));var t;!function(e,n,i){if(!e.length)return;const t=[...e];"backward"===i&&t.reverse();let a=n?t.indexOf(n):-1;if(-1===a){a=e.length;const n=document.createElement("div");t.push(n)}let l=(a+1)%t.length;for(;l!==a;){const e=t[l];if(e&&k(e))return;l=(l+1)%t.length}}(i.map((e=>({element:e,tabIndex:e.tabIndex}))).sort(((e,n)=>{let{tabIndex:i}=e,{tabIndex:t}=n;return i===t?0:0===i?1:0===t?-1:i-t})).map((e=>{let{element:n}=e;return n})),null,"forward")}),[]),o=(0,t.useRef)(null);(0,t.useEffect)((()=>{o.current=new MutationObserver(l)}),[l]);const d=()=>{var e;n.current&&(null===(e=o.current)||void 0===e||e.observe(n.current,{childList:!0,subtree:!0}))},r=(0,t.useCallback)((e=>{let{target:t}=e;i.current&&(n.current&&t&&"tabIndex"in t&&n.current.contains(t)&&(a.current=t))}),[]);(0,t.useEffect)((()=>{const{current:n}=o;return i.current=e,e?d():null===n||void 0===n||n.disconnect(),()=>null===n||void 0===n?void 0:n.disconnect()}),[e]),(0,t.useEffect)((()=>(document.addEventListener("focus",r,!0),()=>document.removeEventListener("focus",r,!0))),[r]);return(0,t.useCallback)((e=>{var t;e&&(n.current=e,i.current&&(null===(t=o.current)||void 0===t||t.disconnect(),d()))}),[])}var p=i(90425),N=i(31906),y=i(8237),S=i(34778),f=i(14761),g=i(50242),b=i(25287),_=i(73549);var F=i(87553),h=i(19077),O=i(83296),j=i(94145),C=i(46414),T=i(5113),I=i(41330),P=i(15269),w=i(47934);const x=e=>{let{title:n,subtitle:i,logoUrl:t,logoWidth:a,logoHeight:l,className:o,editorAnnotation:d,mode:r=P.I.DEFAULT}=e;const{position:s,isActive:m}=(0,C.q)();return m&&s===T.wd.TOP?null:(0,w.jsx)(I.h,{title:n,logoUrl:t,logoWidth:a,logoHeight:l,subTitle:i,className:o,editorAnnotation:d,mode:r})},D={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"FilmPlayerMeta"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"contentUuid"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"movieByContentUuid"},arguments:[{kind:"Argument",name:{kind:"Name",value:"contentUuid"},value:{kind:"Variable",name:{kind:"Name",value:"contentUuid"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"MoviePlayerMeta"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"Title"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Title"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"localized"}},{kind:"Field",name:{kind:"Name",value:"original"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"MovieTitle"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Movie"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"Title"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"MoviePlayerMeta"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Movie"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"contentId"}},{kind:"Field",name:{kind:"Name",value:"editorAnnotation"}},{kind:"FragmentSpread",name:{kind:"Name",value:"MovieTitle"}},{kind:"Field",name:{kind:"Name",value:"gallery"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"logos"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"horizontal"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"avatarsUrl"}},{kind:"Field",name:{kind:"Name",value:"origSize"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}}]};var E=i(40202);const M=e=>{const n=null===e||void 0===e?void 0:e.logos.horizontal;if(!n)return;const i=(0,E.W)(n),{width:t,height:a}=n.origSize||{};return{logoUrl:i,width:t,height:a}};var A=i(52192);const R=e=>{const{0:n,1:i}=(0,t.useState)(e);return(0,t.useEffect)((()=>{e||i(!1)}),[e]),n},B=e=>{let{movieId:n,className:i,isControlsVisible:t,mode:a=P.I.DEFAULT}=e;const{data:l,error:o,loading:d}=(0,j.a)(D,{variables:{contentUuid:n},fetchPolicy:"cache-first",errorPolicy:"all"}),r=R(t);if(d||o||!t)return null;const{title:s,gallery:m,editorAnnotation:c}=(null===l||void 0===l?void 0:l.movieByContentUuid)||{},u=m&&M(m),k=(0,A.o)(s);return(0,w.jsx)(x,{title:k||"",logoUrl:null===u||void 0===u?void 0:u.logoUrl,logoWidth:null===u||void 0===u?void 0:u.width,logoHeight:null===u||void 0===u?void 0:u.height,className:i,editorAnnotation:r&&c?c:void 0,mode:a})};var V=i(4033),L=i(54982);const U=e=>{var n,i,t,a;const{isAuthorized:l}=(0,V.o)(),{data:o}=(0,j.a)(L.P,{variables:{contendUuid:null!==e&&void 0!==e?e:"",isAuthorized:l},fetchPolicy:"cache-first",errorPolicy:"all",skip:!e}),d=null===o||void 0===o?void 0:o.movieByContentUuid;return{rating:Number(null===d||void 0===d||null===(n=d.userData)||void 0===n||null===(i=n.voting)||void 0===i?void 0:i.value)||0,kpId:null===d||void 0===d?void 0:d.id,isEnabled:(null===d||void 0===d||null===(t=d.rating)||void 0===t||null===(a=t.kinopoisk)||void 0===a?void 0:a.isActive)||!1}};var W=i(76236),Z=i(71748),H=i(15581),z=i.n(H);const q=r().bind(z()),G=(0,h.QS)({contentId:null}),K=e=>{let{onClose:n=f.Z}=e;const{contentId:i}=(0,y.l)(G),t=U(i),a=(0,W.x)(S.BH.ModalWindow);return null!==i&&t&&t.isEnabled?(0,w.jsx)(b.g,{id:b.Z.USER_VOTE,rounded:!0,colorScheme:O.u.Dark,onHideModal:n,children:(0,w.jsxs)("div",{className:q("body"),"data-tid":"UserVoteModal",children:[(0,w.jsx)(B,{movieId:i,isControlsVisible:!0,mode:P.I.USER_VOTE,className:q("meta")}),(0,w.jsx)(Z.q,{contentId:i,userRating:t.rating,onMovieVoteChanged:a,mode:Z.h.Modal,className:q("rating-container")})]})}):null},Y=e=>{let{onClose:n=f.Z}=e;const{contentId:i}=(0,y.l)(G),a=(0,F.W)({ratingType:S.BH.ModalWindow}),l=(0,t.useCallback)((()=>{a(null!==i&&void 0!==i?i:""),n()}),[n,a,i]);return(e=>{const n=(0,g.n)({ratingType:e.ratingType}),{activeModalId:i}=(0,_.O)();(0,t.useEffect)((()=>{i===b.Z.USER_VOTE&&""!==e.uuid&&n(e.uuid)}),[i,e.uuid])})({uuid:null!==i&&void 0!==i?i:"",ratingType:S.BH.ModalWindow}),(0,w.jsx)(K,{onClose:l})};var J=i(4472),X=i(34789),$=i(49295),Q=i(52680),ee=i(48582),ne=i(47285),ie=i(80224),te=i(84752);const ae={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"EpisodePlayerBaseInfo"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"contentId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"prerollsSupported"}},type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}},defaultValue:{kind:"BooleanValue",value:!1}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"content"},arguments:[{kind:"Argument",name:{kind:"Name",value:"contentId"},value:{kind:"Variable",name:{kind:"Name",value:"contentId"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Episode"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"EpisodePlayerBaseInfo"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"EpisodeBase"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Episode"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"contentId"}},{kind:"Field",name:{kind:"Name",value:"number"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"SeasonBase"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Season"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"contentId"}},{kind:"Field",name:{kind:"Name",value:"number"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"EpisodePosition"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Episode"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"EpisodeBase"}},{kind:"Field",name:{kind:"Name",value:"season"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"SeasonBase"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"EpisodeDetails"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Episode"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"EpisodePosition"}},{kind:"Field",alias:{kind:"Name",value:"episodeContentId"},name:{kind:"Name",value:"contentId"}},{kind:"Field",name:{kind:"Name",value:"tvSeries"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"contentId"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",alias:{kind:"Name",value:"episodeOtt"},name:{kind:"Name",value:"ott"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"viewOption"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"watchabilityStatus"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"EpisodeAgeRestriction"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Episode"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"tvSeries"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"contentId"}},{kind:"Field",name:{kind:"Name",value:"restriction"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"age"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"MovieStreamAudioMeta"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AudioMeta"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"audioChannelsNumber"}},{kind:"Field",name:{kind:"Name",value:"audioGroupId"}},{kind:"Field",name:{kind:"Name",value:"forAdult"}},{kind:"Field",name:{kind:"Name",value:"language"}},{kind:"Field",name:{kind:"Name",value:"languageName"}},{kind:"Field",name:{kind:"Name",value:"quality"}},{kind:"Field",name:{kind:"Name",value:"studioName"}},{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"Field",name:{kind:"Name",value:"visibleByDefault"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"MovieStreamDrmConfig"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"DrmConfig"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"drmServers"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"certificateUrl"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"processSPCPath"}},{kind:"Field",name:{kind:"Name",value:"provisioningUrl"}},{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"headers"}},{kind:"Field",name:{kind:"Name",value:"requestParams"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"MovieStreamSubtitleMeta"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"SubtitleMeta"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"forAdult"}},{kind:"Field",name:{kind:"Name",value:"languageName"}},{kind:"Field",name:{kind:"Name",value:"studio"}},{kind:"Field",name:{kind:"Name",value:"type"}},{kind:"Field",name:{kind:"Name",value:"language"}},{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"visibleByDefault"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"MovieStreamTile"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Tile"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"spriteDuration"}},{kind:"Field",name:{kind:"Name",value:"tileDuration"}},{kind:"Field",name:{kind:"Name",value:"uriTemplate"}},{kind:"Field",name:{kind:"Name",value:"tilePixelResolution"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"height"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"spriteMatrixSize"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"columns"}},{kind:"Field",name:{kind:"Name",value:"rows"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"spritePixelResolution"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"height"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"MovieStreamTiles"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"TilesContainer"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"highResolutionTiles"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"MovieStreamTile"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"lowResolutionTiles"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"MovieStreamTile"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"offset"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"MovieStreamPrerolls"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PrerollMeta"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"durationMs"}},{kind:"Field",name:{kind:"Name",value:"promotedEntityId"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"MovieStreamSkippableFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"SkippableFragment"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"startTime"}},{kind:"Field",name:{kind:"Name",value:"endTime"}},{kind:"Field",name:{kind:"Name",value:"final"}},{kind:"Field",name:{kind:"Name",value:"type"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"MovieStreamMeta"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"StreamMeta"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"audioMetas"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"MovieStreamAudioMeta"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"drmConfig"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"MovieStreamDrmConfig"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"subtitleMetas"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"MovieStreamSubtitleMeta"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"tilesContainer"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"MovieStreamTiles"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"trackings"}},{kind:"Field",name:{kind:"Name",value:"videoMetas"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"bitrate"}},{kind:"Field",name:{kind:"Name",value:"height"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"prerollsDuration"}},{kind:"Field",name:{kind:"Name",value:"prerolls"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"MovieStreamPrerolls"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"skippableFragments"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"MovieStreamSkippableFragment"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"videoToken"}},{kind:"Field",name:{kind:"Name",value:"cuesUrl"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"MovieStream"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Stream"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"streamMeta"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"MovieStreamMeta"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"MovieOnlineStreams"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"OnlineStreams"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"licenseStatus"}},{kind:"Field",name:{kind:"Name",value:"drmRequirement"}},{kind:"Field",name:{kind:"Name",value:"streams"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"MovieStream"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"sessionId"}},{kind:"Field",name:{kind:"Name",value:"concurrencyArbiterConfig"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"concurrencyArbiterRequestParams"}},{kind:"Field",name:{kind:"Name",value:"server"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"playerRestrictionConfig"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"subtitlesButtonEnable"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"monetizationModel"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"EpisodePlayerOnlineStreams"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"OttEpisode"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"onlineStreams"},arguments:[{kind:"Argument",name:{kind:"Name",value:"prerollsSupported"},value:{kind:"Variable",name:{kind:"Name",value:"prerollsSupported"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"MovieOnlineStreams"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"EpisodeSmokingFlag"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"OttEpisode"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hasSmokingScenes"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"MovieTiming"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"OttTiming"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"current"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"EpisodePlayerNextEpisode"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Episode"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"neighbourhoodInSeries"},arguments:[{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"IntValue",value:"1"}},{kind:"Argument",name:{kind:"Name",value:"filter"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"onlyOnline"},value:{kind:"BooleanValue",value:!0}}]}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"EpisodeDetails"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"MovieWatchParams"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"OttUserData"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"watchParams"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"audioLanguage"}},{kind:"Field",name:{kind:"Name",value:"subtitleLanguage"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"EpisodePlayerBaseInfo"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Episode"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",alias:{kind:"Name",value:"episodeContentId"},name:{kind:"Name",value:"contentId"}},{kind:"FragmentSpread",name:{kind:"Name",value:"EpisodeDetails"}},{kind:"FragmentSpread",name:{kind:"Name",value:"EpisodeAgeRestriction"}},{kind:"Field",alias:{kind:"Name",value:"episodeOtt"},name:{kind:"Name",value:"ott"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"EpisodePlayerOnlineStreams"}},{kind:"FragmentSpread",name:{kind:"Name",value:"EpisodeSmokingFlag"}},{kind:"Field",name:{kind:"Name",value:"timing"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"MovieTiming"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"duration"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"EpisodePlayerNextEpisode"}},{kind:"Field",name:{kind:"Name",value:"tvSeries"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"contentId"}},{kind:"Field",name:{kind:"Name",value:"ott"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"userData"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"MovieWatchParams"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}}]};function le(e){const{isDynamicPrerollEnabled:n}=(0,Q.E)();return(0,te.a)(ae,{contentId:e,prerollsSupported:n})}function oe(e){var n,i;if(e&&"Episode"===(null===(n=e.content)||void 0===n?void 0:n.__typename)&&"OttEpisode"===(null===(i=e.content.episodeOtt)||void 0===i?void 0:i.__typename))return e.content.episodeOtt}function de(e){const n=e&&oe(e);return(null===n||void 0===n?void 0:n.onlineStreams)||void 0}function re(e){var n;if("Episode"===(null===(n=e.content)||void 0===n?void 0:n.__typename))return e.content.tvSeries}var se=i(51803);const me=e=>{var n,i,t,a,l,o,d,r;let{watchParams:s,onlineStreams:m,getDefaultAudio:c}=e;const{streams:u,playerRestrictionConfig:k}=m||{};if(null===u||void 0===u||!u[0]||!k)return{textTrackLang:void 0,audioTrackLang:void 0,videoTrackLabel:void 0};const{audioLanguage:v,subtitleLanguage:p}=s||{},{subtitlesButtonEnable:N}=k||{},y=null===(n=u[0])||void 0===n||null===(i=n.streamMeta)||void 0===i||null===(t=i.audioMetas[0])||void 0===t?void 0:t.language,S=null!==(a=null===(l=u[0])||void 0===l||null===(o=l.streamMeta)||void 0===o||null===(d=o.subtitleMetas[0])||void 0===d?void 0:d.language)&&void 0!==a?a:void 0,f=null!==(r=null!==v&&void 0!==v?v:null===c||void 0===c?void 0:c(u[0]))&&void 0!==r?r:y;let g=null!==p&&void 0!==p?p:void 0;var b;!f||(0,se.ur)(f)||N||(g=null!==(b=g)&&void 0!==b?b:S);return{audioTrackLang:f,textTrackLang:g,videoTrackLabel:void 0}};function ce(e,n){const i=function(e){var n,i;const t=e&&re(e);return(null===t||void 0===t||null===(n=t.ott)||void 0===n||null===(i=n.userData)||void 0===i?void 0:i.watchParams)||void 0}(e),t=de(e);return me({watchParams:i,onlineStreams:t,getDefaultAudio:n})}function ue(e){return e.reduce(((e,n)=>(n&&e.push(n),e)),[])}var ke=i(30597);function ve(e){var n,i,t,a;const l=e&&oe(e),o=null===l||void 0===l||null===(n=l.onlineStreams)||void 0===n||null===(i=n.streams)||void 0===i||null===(t=i[0])||void 0===t||null===(a=t.streamMeta)||void 0===a?void 0:a.skippableFragments;return o?ue(o):ke.es}var pe=i(34449),Ne=i(51297),ye=i(79569);function Se(e){let{timing:n,duration:i,skippableFragments:t}=e;const a=(0,pe.n)({timing:n,duration:i,skippableFragments:t,timingsIntervalMs:(0,ye.O)()}),l=(0,Ne.D)()||!n;return a||l?0:n}function fe(e){var n;const i=ve(e),t=oe(e),a=(null===t||void 0===t||null===(n=t.timing)||void 0===n?void 0:n.current)||0;return Se({duration:(null===t||void 0===t?void 0:t.duration)||1,timing:a,skippableFragments:i})}var ge=i(99518),be=i(35247),_e=i.n(be),Fe=i(88687),he=i(24019),Oe=i(91887);const je={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"EpisodeDetails"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Episode"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"EpisodePosition"}},{kind:"Field",alias:{kind:"Name",value:"episodeContentId"},name:{kind:"Name",value:"contentId"}},{kind:"Field",name:{kind:"Name",value:"tvSeries"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"contentId"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",alias:{kind:"Name",value:"episodeOtt"},name:{kind:"Name",value:"ott"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"viewOption"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"watchabilityStatus"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"EpisodeBase"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Episode"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"contentId"}},{kind:"Field",name:{kind:"Name",value:"number"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"SeasonBase"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Season"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"contentId"}},{kind:"Field",name:{kind:"Name",value:"number"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"EpisodePosition"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Episode"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"EpisodeBase"}},{kind:"Field",name:{kind:"Name",value:"season"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"SeasonBase"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}}]};function Ce(e){return(0,he.r)({id:(0,Oe.eX)(e),fragment:je,fragmentName:"EpisodeDetails",variables:{contentId:e}})||void 0}var Te=i(18943),Ie=i(17384);const Pe=(e,n)=>{const i=(0,Q.E)();return i[n]===Ie.V[n]?e:i[n]},we=(0,h.QS)(0),xe=()=>{we(0)},De=()=>((e,n)=>{const i=(0,Q.E)();return(0,t.useCallback)((()=>i[n]!==Ie.V[n]?i[n]:e()),[i,n,e])})((()=>{const e=(new Date).getHours();return e>=2&&e<=7?"night":"day"}),"autoskipDayNight"),Ee=()=>((e,n)=>{const i=(0,Q.E)();return(0,t.useCallback)((()=>{let t=e();return i[n]!==Ie.V[n]&&(t+=i[n]),t}),[i,n,e])})((()=>we()),"autoskipWacthedTime"),Me=e=>{let{contentId:n}=e;const i=(0,Te.jj)(),a=De(),l=Ee(),o=Pe(18e3,"autoskipTimeToDisable"),d=Pe(10800,"autoskipNightTimeToDisable"),r=(0,t.useCallback)((()=>{var e;const n=l()+(null!==(e=null===i||void 0===i?void 0:i.watchedTime)&&void 0!==e?e:0);return"day"===a()?n<o:"night"===a()&&n<d}),[a,l,i,d,o]),s=(0,t.useCallback)((()=>{var e;we(we()+(null!==(e=null===i||void 0===i?void 0:i.watchedTime)&&void 0!==e?e:0)),Ve(n)}),[n,i]);return{isAutoSkipEnabled:(0,t.useMemo)((()=>r()),[r]),autoSkipHappened:s,getIsAutoSkipEnabled:r}};function Ae(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}function Re(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?Ae(Object(i),!0).forEach((function(n){(0,J.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Ae(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}const Be=(0,h.QS)([]),Ve=e=>{const n=Be(),{length:i}=n,t=n[i-1];if(i&&t&&t.contentId===e){const e=n.slice(0,-1);Be([...e,Re(Re({},t),{},{autoskipHappened:!0})])}},Le=e=>{let{contentId:n,tvSeriesContentId:i}=e;(0,t.useEffect)((()=>{((e,n)=>{var i,t;const a=Be(),{length:l}=a;""===e||l&&(null===(i=a[l-1])||void 0===i?void 0:i.contentId)===e||(Be([...a,{contentId:e,tvSeriesContentId:n,autoskipHappened:!1}]),!l||null!==(t=a[l-1])&&void 0!==t&&t.autoskipHappened||xe())})(n,i)}),[n,i])};var Ue=i(85854);function We(e){const n=le(e);return n?oe(n):void 0}var Ze=i(24477);const He=e=>{var n;const i=We(e);return(0,Ze.J)(null===i||void 0===i||null===(n=i.onlineStreams)||void 0===n?void 0:n.streams)},ze=(0,h.QS)(null),qe=()=>(0,y.l)(ze),Ge=e=>{var n,i;const a=null!==(n=null===e||void 0===e||null===(i=e.streamMeta)||void 0===i?void 0:i.prerollsDuration)&&void 0!==n?n:null;(0,t.useEffect)((()=>{null!==a&&ze(a/1e3)}),[a])};var Ke=i(91434),Ye=i(13935);const Je={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"EpisodePlayerMeta"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"contentId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"episodeByContentId"},arguments:[{kind:"Argument",name:{kind:"Name",value:"contentId"},value:{kind:"Variable",name:{kind:"Name",value:"contentId"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"contentId"}},{kind:"Field",name:{kind:"Name",value:"number"}},{kind:"Field",name:{kind:"Name",value:"season"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"contentId"}},{kind:"Field",name:{kind:"Name",value:"number"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"title"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"Title"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"tvSeries"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"MoviePlayerMeta"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"Title"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Title"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"localized"}},{kind:"Field",name:{kind:"Name",value:"original"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"MovieTitle"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Movie"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"Title"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"MoviePlayerMeta"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Movie"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"contentId"}},{kind:"Field",name:{kind:"Name",value:"editorAnnotation"}},{kind:"FragmentSpread",name:{kind:"Name",value:"MovieTitle"}},{kind:"Field",name:{kind:"Name",value:"gallery"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"logos"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"horizontal"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"avatarsUrl"}},{kind:"Field",name:{kind:"Name",value:"origSize"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}}]};function Xe(e){return e?`PT${e/1e3}S`:null}function $e(e){var n,i,t,a;const l=We(e);return(null===l||void 0===l||null===(n=l.onlineStreams)||void 0===n||null===(i=n.streams)||void 0===i||null===(t=i[0])||void 0===t||null===(a=t.streamMeta)||void 0===a?void 0:a.prerollsDuration)||0}function Qe(e){return Xe($e(e))}var en=i(50827),nn=i(19149);const tn=e=>{let{prerollDuration:n,contentId:i,eventParamsBuilder:t}=e;const a=function(e,n){return(0,nn.$)({event:en.Fv,uiParams:e,eventParamsBuilder:n})}({mainUuid:i},t);(0,Te.MQ)((e=>{if(n>0){const n=e.onContentImpression((()=>{var n;return a({vsid:null!==(n=e.vsid)&&void 0!==n?n:""})}));return()=>{n()}}}),[a])},an=e=>{var n,i,t;let{uiParams:{mainUuid:a},dependencies:{apolloClient:l},callbackParams:[{vsid:o}]}=e;const d=null!==(n=null===(i=l.readQuery({query:Je,variables:{contentId:a}}))||void 0===i||null===(t=i.episodeByContentId)||void 0===t?void 0:t.title.localized)&&void 0!==n?n:"-";return{entityType:S.d.Preroll,uuid:"preroll",title:d,vsid:o,mainUuid:a}};var ln=i(83948),on=i(58611);const dn=()=>{const e=(0,t.useRef)(void 0),n=(0,on.M)();(0,Te.CP)((()=>{e.current=new ln.n({meter:n})})),(0,Te.wn)((()=>{var n;null===(n=e.current)||void 0===n||n.commitGapOnce(ee.c.PLAYER_SEEKED)}))},rn=e=>{var n,i;let{contentId:t,psid:a}=e;const l=He(t),o=Ce(t),d=null!==(n=null===o||void 0===o||null===(i=o.tvSeries)||void 0===i?void 0:i.contentId)&&void 0!==n?n:"",{yandexMetrika:r}=_e()().publicRuntimeConfig;return((e,n)=>{var i,t,a;const l=He(e),o=null===(t=(0,Ue.E)(null===l||void 0===l||null===(i=l.streamMeta)||void 0===i?void 0:i.prerolls)[0])||void 0===t?void 0:t.promotedEntityId;(0,Ke.L)({contentId:e,additionalParams:{prerollDurationSeconds:qe()},additionalData:{prerollTargetContentId:(null===o||void 0===o?void 0:o.toString())||"",metrikaKey:n.main.toString()},streamTrackingData:(0,Ye.s)(null===l||void 0===l||null===(a=l.streamMeta)||void 0===a?void 0:a.trackings)})})(t,r),(0,Fe.i)({movieId:d,contentId:t,psid:a,manifestUrl:null===l||void 0===l?void 0:l.uri}),Le({contentId:t,tvSeriesContentId:d}),(e=>{const n=$e(e);tn({prerollDuration:n,contentId:e,eventParamsBuilder:an})})(t),dn(),null};var sn=i(9246),mn=i.n(sn),cn=i(15527),un=i(16378);const kn=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f.Z;const{0:i,1:a}=(0,t.useState)(!1),{0:l,1:o}=(0,t.useState)(!1),{0:d,1:r}=(0,t.useState)(!1),{0:s,1:m}=(0,t.useState)(!1),{0:c,1:u}=(0,t.useState)(!1),{0:k,1:v}=(0,t.useState)(!1),{0:p,1:N}=(0,t.useState)(!1),y=!s&&(l||d);(0,Te.gR)(d||k||l);const S=(0,t.useCallback)((()=>a(!0)),[]),g=(0,t.useCallback)((()=>{y&&(m(!0),r(!1),o(!1))}),[y]);(0,t.useEffect)((()=>{m(!1),r(!1),o(!1),v(!1)}),[e]);const{playingState:b}=(0,Te.Jw)(),_=b===Te.de.end;(0,t.useEffect)((()=>{a(_&&y)}),[_,y]);const F=(0,t.useCallback)((()=>{_||!l&&!d?n():g()}),[g,d,_,l,n]);return(0,t.useLayoutEffect)((()=>{const e=e=>{e.code===un.yX.Escape&&y&&(e.preventDefault(),F())};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)}),[y,F]),{isPlayerHidden:i,isPlayerExpanded:s,isTrailerOpened:l,isCoverOpened:d,isTinderOpened:k,isTinderFadeOpened:c,isRatingScreenEnabled:p,hidePlayer:S,setIsPlayerExpanded:m,setIsTrailerOpened:o,setIsCoverOpened:r,setIsTinderOpened:v,setIsTinderFadeOpened:u,expandPlayer:g,setIsRatingScreenEnabled:N,onCloseWatchNext:F}};var vn=i(49249),pn=i(99013),Nn=i(47274),yn=i(52347),Sn=i(18451);const fn=e=>{let n,i,t,a=!1,l=!1;if(e){if("WatchNextItem"===e.__typename){const{videoContentId:m,entity:c}=e||{};var o,d,r,s;if(t=m||"","Film"===(null===c||void 0===c?void 0:c.__typename)||"Video"===(null===c||void 0===c?void 0:c.__typename))n=c.contentId||void 0,a=Boolean(null===(o=c.userData)||void 0===o?void 0:o.isPlannedToWatch);if("Episode"===(null===c||void 0===c?void 0:c.__typename))n=(null===(d=c.tvSeries)||void 0===d?void 0:d.contentId)||void 0,i=c.contentId||void 0,a=Boolean(null===(r=c.tvSeries)||void 0===r||null===(s=r.userData)||void 0===s?void 0:s.isPlannedToWatch),l=!0}if("AnnounceWatchNextItem"===e.__typename){var m,c,u,k;const{entity:i}=e||{},{contentGroupUuid:o}=(null===(m=i.ott)||void 0===m||null===(c=m.trailers)||void 0===c||null===(u=c.items)||void 0===u?void 0:u[0])||{};t=o||"",n=i.contentId||void 0,a=Boolean(null===(k=i.userData)||void 0===k?void 0:k.isPlannedToWatch),(0,Sn.R)(i.__typename)&&(l=!0)}}return{watchNextId:n,watchNextEpisodeId:i,isFavorite:a,isTvSeries:l,watchNextTrailerId:t}};var gn=i(30726);const bn=e=>{switch(e){case"WatchNext":return gn.b.DEFAULT;case"FranchiseWatchNext":return gn.b.FRANCHISE;case"AnnounceWatchNext":return gn.b.ANNOUNCE;default:return}};function _n(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}const Fn=e=>{var n;return function(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?_n(Object(i),!0).forEach((function(n){(0,J.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):_n(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}({watchNextType:bn(null===e||void 0===e||null===(n=e.watchNext)||void 0===n?void 0:n.__typename)},null!==e&&void 0!==e&&e.watchNext&&"items"in e.watchNext?fn(e.watchNext.items[0]):{})};var hn=i(46211);function On(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}function jn(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?On(Object(i),!0).forEach((function(n){(0,J.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):On(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}const Cn=(e,n,i)=>{switch(e){case gn.K.COVER:return jn({watchNextMode:hn.l.FranchiseCover,isLoadedOrError:Boolean(n||i)},(e=>{const{watchNextId:n,watchNextEpisodeId:i,isFavorite:t,isTvSeries:a,watchNextType:l}=Fn(e);return{watchNextId:n,watchNextEpisodeId:i,isFavorite:t,isTvSeries:a,watchNextType:l}})(n));case gn.K.TRAILER:return jn({watchNextMode:hn.l.Trailer,isLoadedOrError:Boolean(n||i)},Fn(n));case gn.K.TINDER:{var t;const e=bn(null===n||void 0===n||null===(t=n.watchNext)||void 0===t?void 0:t.__typename),a=(e=>null!==e&&void 0!==e&&e.watchNext&&"items"in e.watchNext?e.watchNext.items.map((e=>fn(e))):[])(n).filter((e=>Boolean(e.watchNextId&&e.watchNextTrailerId))),l=a.length>1?a:[];return{watchNextMode:hn.l.Tinder,isLoadedOrError:Boolean(n||i),itemIds:l.map((e=>{let{watchNextId:n}=e;return n})),items:l,watchNextType:e}}case gn.K.WN_OFF:default:return null}},Tn={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"WatchNext"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"contentId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"supportedTypes"}},type:{kind:"ListType",type:{kind:"NamedType",name:{kind:"Name",value:"WatchNextType"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"isAuthorized"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"watchNext"},arguments:[{kind:"Argument",name:{kind:"Name",value:"watchedContentId"},value:{kind:"Variable",name:{kind:"Name",value:"contentId"}}},{kind:"Argument",name:{kind:"Name",value:"supportedTypes"},value:{kind:"Variable",name:{kind:"Name",value:"supportedTypes"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"WatchNext"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"WatchNextItem"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"FranchiseWatchNext"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"WatchNextItem"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AnnounceWatchNext"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"WatchNextAnnounceItem"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"Title"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Title"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"localized"}},{kind:"Field",name:{kind:"Name",value:"original"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"MovieTitle"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Movie"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"Title"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"Image"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Image"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"avatarsUrl"}},{kind:"Field",name:{kind:"Name",value:"fallbackUrl"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"MovieVerticalPoster"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"MoviePosters"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"vertical"},arguments:[{kind:"Argument",name:{kind:"Name",value:"override"},value:{kind:"EnumValue",value:"OTT_WHEN_EXISTS"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"Image"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"verticalWithRightholderLogo"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"Image"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"ImageSize"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ImageSize"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"MovieHorizontalLogo"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"MovieLogos"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"horizontal"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"avatarsUrl"}},{kind:"Field",name:{kind:"Name",value:"origSize"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ImageSize"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"SkippableFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"SkippableFragment"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"type"}},{kind:"Field",name:{kind:"Name",value:"startTime"}},{kind:"Field",name:{kind:"Name",value:"endTime"}},{kind:"Field",name:{kind:"Name",value:"final"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"WatchNextMovie"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Movie"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"contentId"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"shortDescription"}},{kind:"FragmentSpread",name:{kind:"Name",value:"MovieTitle"}},{kind:"Field",name:{kind:"Name",value:"gallery"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"posters"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"horizontal"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"avatarsUrl"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"MovieVerticalPoster"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"covers"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"horizontal"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"avatarsUrl"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"logos"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"MovieHorizontalLogo"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"ott"},selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Ott_AbstractVideo"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"skippableFragments"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"SkippableFragment"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"preview"},selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"OttPreview_AbstractVideo"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"duration"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"userData"},directives:[{kind:"Directive",name:{kind:"Name",value:"include"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"isAuthorized"}}}]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isPlannedToWatch"}},{kind:"Field",name:{kind:"Name",value:"voting"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"value"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"restriction"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"age"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"WatchNextEpisode"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Episode"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"contentId"}},{kind:"Field",name:{kind:"Name",value:"number"}},{kind:"Field",name:{kind:"Name",value:"season"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"contentId"}},{kind:"Field",name:{kind:"Name",value:"number"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"tvSeries"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"WatchNextMovie"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"WatchNextItem"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"WatchNextItem"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"videoContentId"}},{kind:"Field",name:{kind:"Name",value:"videoUrl"}},{kind:"Field",name:{kind:"Name",value:"entity"},selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Film"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"WatchNextMovie"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Video"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"WatchNextMovie"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"WatchNextEpisode"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"WatchNextAnnounceItem"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AnnounceWatchNextItem"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"entity"},selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Movie"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"ott"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"trailers"},arguments:[{kind:"Argument",name:{kind:"Name",value:"onlyPromo"},value:{kind:"BooleanValue",value:!0}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"IntValue",value:"1"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"contentGroupUuid"}},{kind:"Field",name:{kind:"Name",value:"streamUrl"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"WatchNextMovie"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}}]};var In=i(7759),Pn=i(51104),wn=i(51574),xn=i(77466);let Dn;function En(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}function Mn(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?En(Object(i),!0).forEach((function(n){(0,J.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):En(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}!function(e){e.Intro="intro",e.CompoundCredits="compoundCredits",e.Credits="credits",e.Recap="recap"}(Dn||(Dn={}));const An=(0,Pn.Z)(((e,n)=>JSON.stringify(e)+n),(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0;return e.map((e=>{const i=e.type===xn.I.credits,t=(0,wn.b)(e.endTime,n);return i&&!t?Mn(Mn({},e),{},{type:Dn.CompoundCredits}):e}))}));var Rn=i(27303);function Bn(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}function Vn(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?Bn(Object(i),!0).forEach((function(n){(0,J.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Bn(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}const Ln=(0,Rn.ZP)((()=>Promise.all([i.e(7167),i.e(5752)]).then(i.bind(i,53982)))),Un=e=>(0,w.jsx)(t.Suspense,{fallback:null,children:(0,w.jsx)(Ln,Vn({},e))}),Wn=e=>{let{watchNextParams:n,mainPlayerPause:i,mainPlayerPlay:a,mainPlayerClose:l,mainPlayerHide:o,onWatchNext:d,onBookmarkFilm:r,isDefaultPageLayout:s,isPlaybackFinished:m,blockKeyboardControl:c,setIsWatchNextTrailerCompilation:u,setIsWatchNextTrailerVisible:k,setIsWatchNextCoverVisible:v,setIsRatingVoteEnabledByWatchNext:p,setIsWatchNextTinderFadeShow:N,setIsWatchNextTinderVisible:y,hasNextEpisode:S,contentSkippableFragments:f,isTvSeries:g,onFetchWatchNext:b,filmId:_,isPlayerExpanded:F,watchNextView:h,isMuted:O,updateWatchNextData:j,isTimeForFetchWatchNext:C,isTimeForShowWatchNext:T,onVoteChange:I,userRating:P,posterUrl:x}=e;const{0:D,1:E}=(0,t.useState)(!1),M=(0,In.JO)(n),{0:A,1:R}=(0,t.useState)(!1),B=!g||!S;return(0,t.useEffect)((()=>{B&&!A&&C&&_&&(b({filmId:_}),R(!0))}),[_,S,M,b,C,B,A]),(0,t.useEffect)((()=>{const e=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,t=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;if(a===gn.K.WN_OFF)return!0;const l=n.some((e=>{let{type:n}=e;return n===Dn.Credits}));if(i&&t)return!0;if(!l)return!0;if(null!==e&&void 0!==e&&e.isLoadedOrError){const n=(0,In.JO)(e);return!(a===gn.K.TINDER||n)}return!1}(n,f,F,m,h);p(e)}),[n,f,F,m,h,p]),(0,t.useEffect)((()=>{T&&Boolean(M)&&B?E(!0):E(!1)}),[M,T,B]),(0,w.jsx)(Un,{watchNextParams:n,mainPlayerPause:i,mainPlayerPlay:a,onWatchNext:d,onBookmarkFilm:r,isPlaybackFinished:m,mainPlayerClose:l,mainPlayerHide:o,blockKeyboardControl:c,setIsWatchNextTrailerCompilation:u,setIsWatchNextTrailerVisible:k,setIsWatchNextCoverVisible:v,isWatchNextVisible:D,isDefaultPageLayout:s,isPlayerExpanded:F,watchNextView:h,isMuted:O,setIsWatchNextTinderFadeShow:N,setIsWatchNextTinderVisible:y,updateWatchNextData:j,isTvSeries:g,isLastEpisode:B,onVoteChange:I,filmId:_,userRating:P,posterUrl:x})};var Zn=i(52269);const Hn={[gn.b.DEFAULT]:Zn.bQ.Default,[gn.b.FRANCHISE]:Zn.bQ.Franchise,[gn.b.ANNOUNCE]:Zn.bQ.Announce};var zn=i(89442);const qn={[gn.b.DEFAULT]:gn.K.TRAILER,[gn.b.FRANCHISE]:gn.K.COVER,[gn.b.ANNOUNCE]:gn.K.TRAILER},Gn={[gn.b.DEFAULT]:[gn.K.TRAILER,gn.K.COVER,gn.K.TINDER,gn.K.WN_OFF],[gn.b.FRANCHISE]:[gn.K.TRAILER,gn.K.COVER,gn.K.WN_OFF],[gn.b.ANNOUNCE]:[gn.K.TRAILER,gn.K.WN_OFF]};var Kn=i(36813);const Yn=()=>{const{watchNextIdMap:e}=(0,Q.E)(),n=(0,Kn.x)().watch_next_type_to_view_maps,i=0===e?qn:null===n||void 0===n?void 0:n[e];return(0,t.useEffect)((()=>{var n;i||zn.H({message:(n=e,`invalid watchNextIdMap="${n}". Can't find map in the config`)})}),[i,e]),i||qn},Jn=(e,n)=>`invalid WN-view="${e}" to WN-type="${n}"`,Xn=e=>{const n=bn(e),i=Yn(),a=n?i[n]:void 0,l=((e,n)=>!(!e||!n)&&Gn[e].some((e=>e===n)))(n,a);return(0,t.useEffect)((()=>{n&&a&&!l&&zn.H({message:Jn(a,n)})}),[l,n,a]),l?a:void 0};var $n=i(36464);var Qn=i(27305),ei=i(11699),ni=i(69159);const ii={[hn.l.Trailer]:ni._X.WATCH_NEXT_TRAILER,[hn.l.TrailerCompilationDefault]:ni._X.WATCH_NEXT_BUTTON,[hn.l.TrailerCompilation_2]:ni._X.WATCH_NEXT_BUTTON,[hn.l.TrailerCompilation_3]:ni._X.WATCH_NEXT_BUTTON,[hn.l.TrailerCompilation_4]:ni._X.WATCH_NEXT_BUTTON,[hn.l.FranchiseDefault]:ni._X.WATCH_NEXT_TRAILER,[hn.l.FranchiseCover]:ni._X.WATCH_NEXT_COVER,[hn.l.Tinder]:ni._X.WATCH_NEXT_TINDER};var ti=i(2445),ai=i(13001),li=i(67337),oi=i(81417),di=i(61831),ri=i(37734),si=i(67894),mi=i(63420);var ci=i(24955);function ui(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}function ki(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?ui(Object(i),!0).forEach((function(n){(0,J.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ui(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}const vi=e=>{var n;const{filmId:i}=e,a=(0,pn.x)(),l=(0,Qn.v)(),o=(0,yn.u)(),d=(r=o.current,(e,n,i)=>{if(!n)return;i?(0,ai.d)(r,oi.S.WATCH_NEXT_EPISODE_START_DELAY):(0,li.q)(r,oi.S.WATCH_NEXT_FILM_START_DELAY);const t=ii[e];(0,di.B)({queryParams:{[ti.cG.REDIRECT_TO_FILM_PAGE]:n,[ti.cG.WATCH_NEXT]:"1",[ti.cG.PLAYING_CONTENT_ID]:n}}),i?((0,si.K)(i,ri.Z.EPISODE),(0,mi.s)({fromBlockAction:t})):((0,si.K)(n,ri.Z.FILM),(0,mi.s)({fromBlockAction:t}))});var r;const s=Object.values(gn.b).map((e=>Hn[e])),{isAuthorized:m}=(0,V.o)(),[c,{data:u,error:k}]=(0,Nn.t)(Tn,{variables:{contentId:i,supportedTypes:s,isAuthorized:m},fetchPolicy:"network-only",nextFetchPolicy:"cache-first",errorPolicy:"all"}),v=(0,t.useCallback)((()=>c()),[c]),p=Xn(null===u||void 0===u||null===(n=u.watchNext)||void 0===n?void 0:n.__typename),N=(0,t.useMemo)((()=>Cn(p,u,k)),[p,u,k]),y=(()=>{const e=(0,pn.x)(),{isAuthorized:n}=(0,V.o)();return(0,t.useCallback)((i=>{let{filmId:t,watchNextView:a}=i;a!==gn.K.COVER&&a!==gn.K.TRAILER||e.query({query:$n.q,errorPolicy:"all",variables:{contentUuid:t,isAuthorized:n}})}),[e,n])})();(0,t.useEffect)((()=>{if(null===N||void 0===N||!N.isLoadedOrError)return;const e=[];var n,i,t,a,l,o,d,r;N.watchNextMode===hn.l.Tinder?e.push({watchNextId:null===(n=N.items)||void 0===n||null===(i=n[0])||void 0===i?void 0:i.watchNextId,isTvSeries:null===(t=N.items)||void 0===t||null===(a=t[0])||void 0===a?void 0:a.isTvSeries},{watchNextId:null===(l=N.items)||void 0===l||null===(o=l[1])||void 0===o?void 0:o.watchNextId,isTvSeries:null===(d=N.items)||void 0===d||null===(r=d[1])||void 0===r?void 0:r.isTvSeries}):"watchNextId"in N&&e.push({watchNextId:N.watchNextId,isTvSeries:N.isTvSeries});p&&e.every((e=>null===e||void 0===e?void 0:e.watchNextId))&&e.forEach((e=>{let{watchNextId:n,isTvSeries:i}=e;n&&y({filmId:n,watchNextView:p,isTvSeries:i})}))}),[y,N,p]);return(0,w.jsx)(Wn,ki(ki({},e),{},{onBookmarkFilm:e=>{let{filmId:n,currentFavouriteState:i}=e;const t=(0,ci.W)(a,n);t&&l({movieId:t,contentId:n,isFavorite:i,toastViewVariant:ei.c.Top})},onWatchNext:d,onFetchWatchNext:v,watchNextView:p,watchNextParams:N,updateWatchNextData:y}))};var pi=i(72839);const Ni={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"MovieWithVerticalPoster"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Movie"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"gallery"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"posters"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"MovieVerticalPoster"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"Image"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Image"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"avatarsUrl"}},{kind:"Field",name:{kind:"Name",value:"fallbackUrl"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"MovieVerticalPoster"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"MoviePosters"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"vertical"},arguments:[{kind:"Argument",name:{kind:"Name",value:"override"},value:{kind:"EnumValue",value:"OTT_WHEN_EXISTS"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"Image"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"verticalWithRightholderLogo"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"Image"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}}]};var yi=i(75900);var Si=i(76994);const fi=e=>{var n;let{movieId:i,contentId:a,hasNextEpisode:l=!1,isTvSeries:o=!1,isPlayerExpanded:d,contentSkippableFragments:r,onTrailerOpen:s,onCoverOpen:m,ontTinderFadeOpen:c,ontTinderOpen:u,setIsRatingScreenEnabled:k=f.Z,onClose:v,onHidePlayer:p}=e;const{play:N,pause:y}=(0,Te.wh)(),{playingState:g}=(0,Te.Jw)(),b=U(i),_=function(e){const{data:n,complete:i}=(0,pi.J)({from:(0,Oe.wY)(e),fragment:Ni,fragmentName:"MovieWithVerticalPoster"});return i&&(0,yi.Z)(n)||""}(i),{isTimeForFetchWatchNext:F,isTimeForShowWatchNext:h}=(e=>{const n=(0,t.useMemo)((()=>{var n;return null===e||void 0===e||null===(n=e.find((e=>e.type===Dn.Credits)))||void 0===n?void 0:n.startTime}),[e]),{0:i,1:a}=(0,t.useState)(!1),{0:l,1:o}=(0,t.useState)(!1),d=(0,t.useCallback)((e=>{n&&(a(e>=n-100),o((i=>i||e>=n+15)))}),[n]),r=(0,t.useCallback)((e=>{void 0!==e&&o((n=>n||e===Te.de.end))}),[]);return(0,Te.O8)(d,1e3),(0,Te.$N)(r),{isTimeForFetchWatchNext:i,isTimeForShowWatchNext:l}})(r),O=(0,W.x)(S.BH.WN),j=(0,t.useCallback)((e=>{let{rating:n,filmId:i}=e;return O({rating:n,contentId:i})}),[O]);return r?(0,w.jsx)(vn.y,{value:Si.$.WatchNext,children:(0,w.jsx)(vi,{mainPlayerPause:y,mainPlayerPlay:N,isPlaybackFinished:g===Te.de.end,mainPlayerClose:v,mainPlayerHide:p,blockKeyboardControl:f.Z,setIsWatchNextTrailerCompilation:f.Z,setIsRatingVoteEnabledByWatchNext:k,setIsWatchNextTrailerVisible:s,setIsWatchNextCoverVisible:m,setIsWatchNextTinderFadeShow:c,setIsWatchNextTinderVisible:u,hasNextEpisode:l,filmId:i,isDefaultPageLayout:!0,isMuted:!1,isTvSeries:o,isPlayerExpanded:d,contentSkippableFragments:r,isTimeForFetchWatchNext:F,isTimeForShowWatchNext:h,onVoteChange:j,contentId:a,userRating:null!==(n=null===b||void 0===b?void 0:b.rating)&&void 0!==n?n:0,posterUrl:_})}):null},gi={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"EpisodePlayerNextEpisode"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Episode"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"neighbourhoodInSeries"},arguments:[{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"IntValue",value:"1"}},{kind:"Argument",name:{kind:"Name",value:"filter"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"onlyOnline"},value:{kind:"BooleanValue",value:!0}}]}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"EpisodeDetails"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"EpisodeBase"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Episode"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"contentId"}},{kind:"Field",name:{kind:"Name",value:"number"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"SeasonBase"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Season"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"contentId"}},{kind:"Field",name:{kind:"Name",value:"number"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"EpisodePosition"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Episode"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"EpisodeBase"}},{kind:"Field",name:{kind:"Name",value:"season"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"SeasonBase"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"EpisodeDetails"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Episode"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"EpisodePosition"}},{kind:"Field",alias:{kind:"Name",value:"episodeContentId"},name:{kind:"Name",value:"contentId"}},{kind:"Field",name:{kind:"Name",value:"tvSeries"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"contentId"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",alias:{kind:"Name",value:"episodeOtt"},name:{kind:"Name",value:"ott"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"viewOption"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"watchabilityStatus"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}}]};function bi(e){var n,i,t,a;const l=(0,he.r)({id:(0,Oe.eX)(e),fragment:gi,fragmentName:"EpisodePlayerNextEpisode",variables:{contentId:e}}),o=null===l||void 0===l||null===(n=l.neighbourhoodInSeries)||void 0===n||null===(i=n.items)||void 0===i?void 0:i[0];if((null===o||void 0===o||null===(t=o.episodeOtt)||void 0===t||null===(a=t.viewOption)||void 0===a?void 0:a.watchabilityStatus)===Zn.cV.Watchable)return o||void 0}function _i(e){var n,i,t,a,l;const o=We(e);return(null===o||void 0===o||null===(n=o.onlineStreams)||void 0===n||null===(i=n.streams)||void 0===i||null===(t=i[0])||void 0===t||null===(a=t.streamMeta)||void 0===a||null===(l=a.skippableFragments)||void 0===l?void 0:l.filter(Boolean))||ke.es}var Fi=i(88755);var hi=i(91597);const Oi=e=>{var n;const{data:i}=(0,pi.J)({from:(0,Oe.eX)(e),fragment:hi.q,fragmentName:"EpisodeSeries",variables:{contentId:e}});return null===i||void 0===i||null===(n=i.tvSeries)||void 0===n?void 0:n.contentId},ji=["contentId"];function Ci(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}function Ti(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?Ci(Object(i),!0).forEach((function(n){(0,J.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Ci(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}const Ii=e=>{let{contentId:n}=e,i=(0,X.Z)(e,ji);const a=Oi(n),l=(e=>{const n=(0,Te.YO)(),i=(0,Fi.N)(_i(e));return(0,t.useMemo)((()=>n?An(i,n):void 0),[n,i])})(n),o=!!bi(n);return a?(0,w.jsx)(fi,Ti(Ti({},i),{},{isTvSeries:!0,contentId:n,movieId:a,hasNextEpisode:o,contentSkippableFragments:l})):null};var Pi=i(97742),wi=i(98922);const xi=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";const{0:n,1:i}=(0,t.useState)(e);return{checkIsStageCurrent:(0,t.useCallback)((function(){for(var e=arguments.length,i=new Array(e),t=0;t<e;t++)i[t]=arguments[t];return i.includes(n)}),[n]),switchToDefaultStage:(0,t.useCallback)((()=>i("default")),[]),switchToFullSizeDeepDiveStage:(0,t.useCallback)((()=>i("fullSizeDeepDive")),[]),switchToRatingScreenStage:(0,t.useCallback)((()=>i("ratingScreen")),[]),switchToGraceCommunicationStage:(0,t.useCallback)((()=>i("graceCommunication")),[]),switchToPrerollStage:(0,t.useCallback)((()=>i("preroll")),[])}};var Di=i(965);function Ei(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}function Mi(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?Ei(Object(i),!0).forEach((function(n){(0,J.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Ei(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}const Ai=e=>{let{contentId:n,isTvSeries:i,className:a,onOpen:l,onClose:o}=e;const{rating:d,isEnabled:r}=U(n),s=(0,W.x)(S.BH.FullScreen);return(0,t.useEffect)((()=>{if(r)return null===l||void 0===l||l(),o}),[l,o,d,r]),r?(0,w.jsx)(Z.q,{contentId:n,userRating:null!==d&&void 0!==d?d:0,onMovieVoteChanged:s,isTvSeries:i,className:a}):null},Ri=["contentId"];function Bi(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}const Vi=function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),t=1;t<n;t++)i[t-1]=arguments[t];const a=n=>{const{playingState:t}=(0,Te.Jw)();return t&&i.includes(t)?(0,w.jsx)(e,Mi({},n)):null},l=e.displayName||e.name||"Component";return a.displayName=`${l}WithPlayingStateCheck`,a}((e=>{let{contentId:n}=e,i=(0,X.Z)(e,Ri);const a=(0,g.n)({ratingType:S.BH.FullScreen}),l=(0,F.W)({ratingType:S.BH.FullScreen});return(0,t.useEffect)((()=>(a(n),()=>{l(n)})),[n]),(0,w.jsx)(Ai,function(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?Bi(Object(i),!0).forEach((function(n){(0,J.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Bi(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}({contentId:n},i))}),Te.de.end),Li=["contentId"];function Ui(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}const Wi=e=>{var n,i;let{contentId:t}=e,a=(0,X.Z)(e,Li);const l=null===(n=Ce(t))||void 0===n||null===(i=n.tvSeries)||void 0===i?void 0:i.contentId;return!!bi(t)||!l?null:(0,w.jsx)(Vi,function(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?Ui(Object(i),!0).forEach((function(n){(0,J.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Ui(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}({contentId:l},a))};var Zi=i(92035),Hi=i(15570),zi=i(17028),qi=i(88474),Gi=i(11899),Ki=i(82115),Yi=i(70716),Ji=i(63346),Xi=i(52621);const $i=(0,h.QS)(!1);var Qi=i(91733),et=i(54069),nt=i.n(et);const it=r().bind(nt()),tt=e=>{let{isPlaying:n,className:i,visibilityRef:a,play:l,pause:o,onOpen:d=f.Z,onClose:r=f.Z,onNavigated:s=f.Z}=e;const m=$i(),{0:c,1:u}=(0,t.useState)(!m),k=(0,t.useCallback)((()=>{l(),u(!1),$i(!0),r()}),[l,r]);return(0,t.useEffect)((()=>{n&&c&&o()}),[n,c,o]),(0,t.useEffect)((()=>{c&&d()}),[c,d]),c?(0,w.jsx)("div",{className:it("root",i),ref:a,"data-tid":"GracePlayerCommunication",children:(0,w.jsxs)("div",{className:it("container"),children:[(0,w.jsx)("p",{className:it("text"),children:(0,w.jsx)(Yi.Z,{id:"features.grace.121497ec049276f720660c343be18bd1"})}),(0,w.jsx)("a",{className:it("primary-button"),href:Qi.Z,target:"_blank",rel:"noreferrer",onClick:s,children:(0,w.jsx)(Yi.Z,{id:"features.grace.custom-id.grace-player-communication"})}),(0,w.jsx)(Ji.z,{className:it("secondary-button"),buttonType:Xi.L.Primary,size:Xi.q.size52,colorScheme:O.u.Dark,onClick:k,children:(0,w.jsx)(Yi.Z,{id:"features.grace.2dc6b2797c41b1b715c1e09427e6b590"})})]})}):null},at=["onClose","hideGraceNotification"];function lt(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}function ot(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?lt(Object(i),!0).forEach((function(n){(0,J.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):lt(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}const dt=e=>{let{onClose:n,hideGraceNotification:i}=e,t=(0,X.Z)(e,at);const a=(0,c.Z)(),l={communicationFormat:S.iN.FullscreenPlayer,causeText:a.formatMessage({id:"features.grace.custom-id.subscription-payment-failed"})},o=(0,Ki.u)(l),d=(0,qi.s)(ot(ot({},l),{},{entityType:S.MH.RejectButton})),r=(0,Gi.a)(l);return(0,w.jsx)(tt,ot(ot({},t),{},{visibilityRef:o,onClose:()=>{n&&n(),d()},onNavigated:()=>{i(),r()}}))},rt=e=>{let{play:n,pause:i,isPlaying:t,onOpen:a,onClose:l,className:o}=e;const{hideGraceNotification:d}=(0,zi.n)();return(0,w.jsx)(dt,{play:n,pause:i,isPlaying:t,onOpen:a,onClose:l,hideGraceNotification:d,className:o})};var st=i(79788);const mt=()=>{const{togglePlay:e,play:n,pause:i}=(0,Te.wh)(),{showPlay:a,showPause:l}=(0,st.O)();return{togglePlay:(0,t.useCallback)((()=>{const n=e();return n===Te.de.play&&a(),n===Te.de.pause&&l(),n}),[e,l,a]),play:(0,t.useCallback)((()=>{n(),a()}),[n,a]),pause:(0,t.useCallback)((()=>{i(),l()}),[i,l])}},ct=e=>{let{className:n,onOpen:i,onClose:t}=e;const{hasGraceAlert:a}=(0,Hi.Z)(),{play:l,pause:o}=mt(),{playingState:d}=(0,Te.Jw)();return a?(0,w.jsx)(rt,{play:l,pause:o,isPlaying:d===Te.de.play,onClose:t,onOpen:i,className:n}):null};var ut=i(21171),kt=i.n(ut);const vt=e=>{let{className:n}=e;const i=(0,st.c)(),{clearIndicator:a}=(0,st.O)(),l=(0,t.useRef)(null);if((0,t.useLayoutEffect)((()=>{const e=l.current;if(e)return e.addEventListener("animationend",a),()=>e.removeEventListener("animationend",a)}),[a,i]),!i)return null;const o="seekBackward"===i||"seekForward"===i;return(0,w.jsx)("div",{className:mn()(kt().root,n),dir:"ltr","data-tid":"UserActionIndicatorView",children:(0,w.jsx)("div",{ref:l,className:mn()(kt().indicator,{[kt().play]:"play"===i,[kt().pause]:"pause"===i,[kt().seekForward]:"seekForward"===i,[kt().seekBackward]:"seekBackward"===i}),children:o&&(0,w.jsx)("div",{className:kt().seekInterval,children:ke.L8})})})};var pt=i(98847);const Nt=()=>{const{seekToTime:e}=(()=>{const{seekToTime:e,seekForward:n,seekBackward:i}=(0,Te.uX)(),{showSeekForward:a,showSeekBackward:l}=(0,st.O)(),o=(0,t.useCallback)((e=>{a(),n(e)}),[n,a]);return{seekBackward:(0,t.useCallback)((e=>{l(),i(e)}),[i,l]),seekForward:o,seekToTime:(0,Te.Kg)(((n,i)=>{n&&void 0!==n.currentTime&&(n.currentTime<i?a():l(),e(i))}))}})();return{seekBackward:(0,Te.Kg)((n=>{var i;if(!n||void 0===n.currentTime)return;const t=n.currentTime-ke.L8,a=null!==(i=n.dvrStartTime)&&void 0!==i?i:0;e(Math.max(t,a,0))}),[0]),seekForward:(0,Te.Kg)((n=>{var i;if(!n||void 0===n.currentTime)return;const t=n.currentTime+ke.L8,a=null!==(i=n.dvrEndTime)&&void 0!==i?i:Number.MAX_SAFE_INTEGER;e(Math.min(t,a))}),[]),seekToTime:e}};var yt;!function(e){e.Backward="backward",e.Forward="forward",e.None="none"}(yt||(yt={}));var St=i(70021),ft=i(66617),gt=i(71754);function bt(e,n){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return(0,t.useCallback)(i?(0,gt.P)(n,e):e,[e,n,i])}var _t=i(27020),Ft=i(38967);const ht=e=>{let{isMovieActionsBlocked:n,onClose:i}=e;const{startBackward:a,startForward:l,stopRewind:o}=(()=>{const e=(0,Te.YY)(),{seekBackward:n,seekForward:i}=Nt(),a=(0,Te.YO)(),{seekToTime:l}=(0,Te.uX)(),{0:o,1:d}=(0,t.useState)(0),{0:r,1:s}=(0,t.useState)(0),{0:m,1:c}=(0,t.useState)(yt.None),{0:u,1:k}=(0,t.useState)(!1),{0:v,1:p}=(0,t.useState)(void 0),N=(0,t.useCallback)((()=>{m!==yt.None&&(u?(m===yt.Backward?n():m===yt.Forward&&i(),k(!1),v&&clearTimeout(v)):r>0?l(Math.min(o+r,a)):r<0&&l(Math.max(o+r,0)),c(yt.None),s(0))}),[m,u,r,v,n,i,l,o,a]),y=parseFloat((a/ke.EM).toFixed(2));return(0,t.useEffect)((()=>{let e;if(m===yt.None||u)clearInterval(e);else{const n=m===yt.Backward?-1:1;e=setInterval((()=>{if(r+o<=0||r+o>=a)return null;s((e=>e+y*n))}),ke.tO)}return()=>{clearInterval(e),clearTimeout(v)}}),[m,o,a,r,l,y,u,v]),(0,t.useEffect)((()=>{(0,pt.p)({rewindDuration:r,startTime:o})}),[o,r]),{startBackward:()=>{d(e),c(yt.Backward),k(!0);const n=setTimeout((()=>{k(!1)}),ke.UO);p(n)},startForward:()=>{d(e),c(yt.Forward),k(!0);const n=setTimeout((()=>{k(!1)}),ke.UO);p(n)},stopRewind:N}})(),d=(e=>{let{onClose:n,startBackward:i,startForward:a,isNewRewindMethodEnabled:l}=e;const{togglePlay:o}=mt(),{seekBackward:d,seekForward:r}=Nt(),{changeVolumeByStep:s}=(0,Te.ST)(),{toggleFullscreen:m}=(0,_t.O)(),{isMuted:c,toggleMute:u}=(0,Te.l)(),k=(0,t.useCallback)((()=>{u(),(0,Ft.w)(!c)}),[c,u]),v=(0,St.B)(),{isPlayerKeyboardThrottlingDisabled:p}=(0,Q.E)(),N=bt(o,500,!p),y=bt(d,500),S=bt(r,500);return(0,t.useCallback)((e=>{const{Space:t,Escape:o,ArrowDown:d,ArrowLeft:r,ArrowRight:c,ArrowUp:u,KeyF:p,KeyJ:f,KeyK:g,KeyL:b,KeyM:_}=un.yX,{code:F,repeat:h}=e;if((0,ft.N)(F)&&v(F)&&!(l&&h&&!un.p1.includes(F)||!l&&h&&!un.p1.includes(F)&&!un.ld.includes(F)))switch(e.code){case t:case g:N();break;case c:case b:l?a():S();break;case r:case f:l?i():y();break;case u:s(ke.c9);break;case d:s(-ke.c9);break;case p:e.metaKey&&e.ctrlKey||m();break;case _:k();break;case o:n()}}),[s,v,l,n,i,a,y,S,N,m,k])})({onClose:i,startBackward:a,startForward:l,isNewRewindMethodEnabled:true}),r=(e=>{let{stopRewind:n,isNewRewindMethodEnabled:i}=e;const{ArrowLeft:a,ArrowRight:l,KeyJ:o,KeyL:d}=un.yX,r=(0,St.B)();return(0,t.useCallback)((e=>{const{code:t}=e;if(i&&(0,ft.N)(t)&&r(t))switch(e.code){case a:case l:case o:case d:n()}}),[a,l,o,d,r,i,n])})({stopRewind:o,isNewRewindMethodEnabled:true}),s=(0,t.useCallback)((e=>{const{Escape:i}=un.yX;e.code!==i&&n||(un.FC.some((n=>n===e.code))&&e.preventDefault(),d(e))}),[n,d]);(0,t.useLayoutEffect)((()=>(document.addEventListener("keydown",s),document.addEventListener("keyup",r),()=>{document.removeEventListener("keydown",s),document.removeEventListener("keyup",r)})),[s,r])},Ot=e=>{let{isMovieActionsBlocked:n=!1,onClose:i}=e;return ht({isMovieActionsBlocked:n,onClose:i}),null};var jt=i(24456);const Ct=e=>{let{children:n}=e;const{0:i,1:a}=(0,t.useState)(null),l=(0,t.useMemo)((()=>({showPlay:()=>a("play"),showPause:()=>a("pause"),showSeekForward:()=>a("seekForward"),showSeekBackward:()=>a("seekBackward"),clearIndicator:()=>a(null)})),[]);return(0,w.jsx)(jt.b.Provider,{value:i,children:(0,w.jsx)(jt.q.Provider,{value:l,children:n})})};var Tt=i(89429);function It(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}const Pt=e=>{const{toggleFullscreen:n}=(0,_t.O)(),{togglePlay:i}=mt();return(0,w.jsx)(Tt.y,function(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?It(Object(i),!0).forEach((function(n){(0,J.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):It(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}({onClick:i,onDoubleClick:n},e))};var wt=i(58290);class xt extends a().Component{constructor(e){super(e),this.state={error:null}}static getDerivedStateFromError(e){return{error:e}}componentDidCatch(e,n){const{onError:i}=this.props;zn.H({message:e.message,level:"error",type:"error-boundary",additional:n,block:"PlayerSkin"},e),i&&i(e,n)}render(){const{error:e}=this.state,{fallback:n,children:i}=this.props;return null!==e?n?(0,w.jsx)(n,{}):null:i}}function Dt(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}function Et(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?Dt(Object(i),!0).forEach((function(n){(0,J.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Dt(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}const Mt=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=e.displayName||e.name||"Unknown",t=i=>(0,w.jsx)(xt,Et(Et({},n),{},{children:(0,w.jsx)(e,Et({},i))}));return t.displayName=`withControlErrorBoundary(${i})`,t}((e=>{var n;let{contentId:i,className:t,isControlsVisible:a}=e;const{data:l,error:o,loading:d}=(0,j.a)(Je,{variables:{contentId:i},fetchPolicy:"cache-first",errorPolicy:"all"}),r=R(a);if(d||o||!a)return null;const{title:s,gallery:m,editorAnnotation:c}=(null===l||void 0===l||null===(n=l.episodeByContentId)||void 0===n?void 0:n.tvSeries)||{},u=null!==l&&void 0!==l&&l.episodeByContentId?(e=>{const{number:n,season:i,title:t}=e||{},{number:a}=i||{};if(void 0===n||void 0===a)return"";const l=(0,A.o)(t),o=(0,wt.l)();return l?o.formatMessage({id:"features.episode-player.b0d49f3657afc3e9fa3e876c454e066c"},{seasonNumber:a,seriesNumber:n,finalTitle:l}):o.formatMessage({id:"features.episode-player.cb90fe5968426117327aa2796b05681c"},{seasonNumber:a,seriesNumber:n})})(l.episodeByContentId):void 0,k=m&&M(m),v=(0,A.o)(s);return(0,w.jsx)(x,{title:v||"",subtitle:u,logoUrl:null===k||void 0===k?void 0:k.logoUrl,logoWidth:null===k||void 0===k?void 0:k.width,logoHeight:null===k||void 0===k?void 0:k.height,className:t,editorAnnotation:r&&c?c:void 0})}));function At(e){const{0:n,1:i}=(0,t.useState)(),a=(0,t.useCallback)((n=>{i(null===e||void 0===e?void 0:e.find((e=>((e,n)=>{let{startTime:i,endTime:t}=e;return i<n&&n<t})(e,n))))}),[e]);return(0,Te.O8)(a,1e3),n}var Rt=i(80),Bt=i(42555),Vt=i(67957),Lt=i.n(Vt);const Ut=e=>{let{skipButtonText:n,renderSkipButtonIcon:i,cancelButtonText:t,renderCancelButtonIcon:a,className:l,autoSkipTime:o,onSkipClick:d,onCancelClick:r,hideCancelButton:s=!1,onSkipButtonShow:m}=e;return(0,w.jsxs)("div",{className:mn()(Lt().root,l),ref:m,"data-tid":"SkipButtonGroup",children:[!s&&(0,w.jsxs)(Bt.Y,{onClick:r,className:Lt().button,children:[null===a||void 0===a?void 0:a(Lt().icon),t||(0,w.jsx)(Yi.Z,{id:"features.player.d7c16cec0a559220916286d356f995f6"})]}),(0,w.jsxs)(Bt.Y,{onClick:d,className:Lt().button,color:Rt.e.orange,isAnimated:!!o,animationDuration:o,children:[null===i||void 0===i?void 0:i(Lt().icon),n||(0,w.jsx)(Yi.Z,{id:"features.player.03ee826ab16eba9b9d3671e5e371100a"})]})]})};var Wt=i(87609),Zt=i(68713);const Ht={[Zn.IZ.Preroll]:S.GI.Preroll,[Zn.IZ.Credits]:S.GI.Credits,[Zn.IZ.Intro]:S.GI.Intro,[Zn.IZ.Recap]:S.GI.Recap,[Zn.IZ.Unknown]:S.GI.Credits},zt=e=>{var n;let{uiParams:{instance:i},callbackParams:[{skipSource:t,skippableFragmentType:a}]}=e;return{vsid:null!==(n=null===i||void 0===i?void 0:i.vsid)&&void 0!==n?n:"",orientation:(0,Wt.T)(),remoteMode:S.PX.Disabled,activation:a,type:t}},qt=()=>{const e=(0,Te.jj)(),n=(0,t.useMemo)((()=>({instance:e})),[e]);return(0,nn.$)({event:en.Cp,eventParamsBuilder:zt,uiParams:n})},Gt=e=>{const n=(e=>{var n;const i=Ce(e),a=bi(e),l=null===i||void 0===i||null===(n=i.tvSeries)||void 0===n?void 0:n.contentId,{episodeContentId:o,number:d}=a||{};return(0,t.useCallback)((function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];let[t]=n;l&&o&&void 0!==d&&((0,Zt.u)({isPlayingFromBeginning:!0}),(0,si.K)(o,ri.Z.EPISODE),(0,mi.s)({fromBlockAction:t}))}),[l,o,d])})(e),i=qt(),a=(0,t.useCallback)((function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];const[l]=t,o=t[1];n(...t),o&&i({skipSource:Ht[o],skippableFragmentType:l===ni._X.NEXT_EPISODE_AUTO_SKIP?S.Be.ByTimer:S.Be.ByUser})}),[i,n]);return a};function Kt(e,n){const i=(0,yn.u)();return(0,t.useCallback)((function(){(0,ai.d)(i.current,n);for(var t=arguments.length,a=new Array(t),l=0;l<t;l++)a[l]=arguments[l];return null===e||void 0===e?void 0:e(...a)}),[e,n,i])}const Yt=e=>{let{skip:n,skippableFragment:i,isAutoSkipDisabled:a,onCurrentTimeChangedExtra:l}=e;const o=(e=>{let{startTime:n,endTime:i}=e;const{0:a,1:l}=(0,t.useState)(null);return(0,Te.O8)((0,Te.Kg)(((e,t)=>{const o=null===e||void 0===e?void 0:e.playingState,d=t>=n&&t<=i;o&&o!==Te.de.pause&&(null===a||d)?null===a&&d&&l(t):l(null)}),[n,i,a]),1e3),(0,Te.$N)((0,t.useCallback)((e=>{e&&e!==Te.de.pause||l(null)}),[])),a})(i),d=(0,t.useRef)(!1),r=(0,t.useCallback)((e=>{if(null===o)return;Math.abs(e-(o+4.5))<=.11&&!a&&!d.current&&(d.current=!0,n())}),[o,a,n]);return(0,Te.O8)((0,t.useCallback)((e=>{r(e),null===l||void 0===l||l(e)}),[l,r])),a||null===o?void 0:5};function Jt(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}function Xt(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?Jt(Object(i),!0).forEach((function(n){(0,J.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Jt(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}const $t=e=>{const n=qt(),i=(0,t.useCallback)((()=>{var i;n({skipSource:Ht[null!==(i=e.currentFragment.type)&&void 0!==i?i:Zn.IZ.Unknown],skippableFragmentType:S.Be.ByTimer})}),[n,e.currentFragment.type]);return(e=>{let{isAutoSkipEnabled:n,currentFragment:i,onAutoSkip:a}=e;const{seekToTime:l}=(0,Te.uX)(),o=(0,t.useCallback)((()=>{l(i.endTime),null===a||void 0===a||a()}),[i.endTime,a,l]);return Yt({skip:o,skippableFragment:i,isAutoSkipDisabled:!n})})(Xt(Xt({},e),{},{onAutoSkip:i}))},Qt=(0,h.QS)(null),ea=()=>Qt(null),na=e=>{let{contentId:n}=e;return{isAutoSkipEnabled:(0,y.l)(Qt)===n,enableAutoSkip:(0,t.useCallback)((()=>{(e=>{Qt(e)})(n)}),[n]),disableAutoSkip:ea}},ia=e=>{let{callbackParams:[{vsid:n,type:i}]}=e;return{vsid:n,orientation:(0,Wt.T)(),remoteMode:S.PX.Disabled,type:i}},ta=e=>{var n;return Ht[null!==(n=null===e||void 0===e?void 0:e.type)&&void 0!==n?n:Zn.IZ.Unknown]},aa=["skip"];function la(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}function oa(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?la(Object(i),!0).forEach((function(n){(0,J.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):la(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}const da=e=>{const n=(e=>{const{0:n,1:i}=(0,t.useState)(!1);(0,t.useEffect)((()=>{i(!1)}),[e]);const{seekToTime:a}=(0,Te.uX)(),l=(0,t.useCallback)((()=>(null===e||void 0===e?void 0:e.endTime)&&a(e.endTime)),[e,a]),o=(0,t.useCallback)((()=>i(!0)),[]);return{isSkipEnabled:e&&!n,skip:l,cancel:o,fragmentEndTime:null===e||void 0===e?void 0:e.endTime}})(e),{skip:i}=n,a=(0,X.Z)(n,aa),{skipWithAnalytics:l,onSkipButtonShow:o}=((e,n)=>{const i=qt(),a=(0,nn.$)({event:en.NX,eventParamsBuilder:ia,uiParams:{}}),l=(0,Te.Kg)(((e,i)=>{const{vsid:t}=e||{};i&&t&&null!==n&&void 0!==n&&n.type&&a({vsid:t,type:Ht[n.type]})}),[]);return{skipWithAnalytics:(0,t.useCallback)((()=>{n&&(i({skipSource:ta(n),skippableFragmentType:S.Be.ByUser}),e())}),[n,i,e]),onSkipButtonShow:l}})(i,e);return oa(oa({},a),{},{skip:l,onSkipButtonShow:o})},ra=()=>{const e=(0,c.Z)();return(0,t.useMemo)((()=>({intro:e.formatMessage({id:"features.player.aefbf08d812e7f0ecf51eeae014f7e3b"}),recap:e.formatMessage({id:"features.player.a2acc4b5ca758b7e8229456b4769da5a"}),compoundCredits:e.formatMessage({id:"components.PlayerSkin.custom-id.keep-compound-credits"}),credits:e.formatMessage({id:"features.player.c55f49ffa9a1742318b750752bfd6372"})})),[e])},sa=e=>{let{currentFragment:n,className:i,contentId:t}=e;const{isSkipEnabled:a,skip:l,cancel:o,onSkipButtonShow:d}=da(n),r=ra(),{isAutoSkipEnabled:s,enableAutoSkip:m,disableAutoSkip:c}=na({contentId:t}),u=$t({isAutoSkipEnabled:s,currentFragment:n});return a?(0,w.jsx)(Ut,{cancelButtonText:r.intro,onSkipClick:()=>{l(),m()},onCancelClick:()=>{o(),c()},className:i,autoSkipTime:u,onSkipButtonShow:d}):null};sa.displayName="IntroSkipButtonGroupContainer";const ma=["currentFragment"];function ca(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}const ua=e=>{let{currentFragment:n}=e,i=(0,X.Z)(e,ma);return n&&(null===n||void 0===n?void 0:n.type)===Zn.IZ.Intro?(0,w.jsx)(sa,function(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?ca(Object(i),!0).forEach((function(n){(0,J.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ca(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}({currentFragment:n},i)):null},ka=["contentId"];function va(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}const pa=e=>{var n;let{contentId:i}=e,a=(0,X.Z)(e,ka);const l=Ce(i),o=(0,t.useMemo)((()=>{var e,n;return null!==(e=null===l||void 0===l||null===(n=l.tvSeries)||void 0===n?void 0:n.contentId)&&void 0!==e?e:""}),[null===l||void 0===l||null===(n=l.tvSeries)||void 0===n?void 0:n.contentId]);return(0,w.jsx)(ua,function(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?va(Object(i),!0).forEach((function(n){(0,J.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):va(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}({contentId:o},a))},Na=e=>{let{currentFragment:n,className:i}=e;const{isSkipEnabled:t,skip:a,cancel:l,onSkipButtonShow:o}=da(n),d=ra();return t?(0,w.jsx)(Ut,{cancelButtonText:d.recap,onSkipClick:a,onCancelClick:l,className:i,onSkipButtonShow:o}):null},ya=["currentFragment"];function Sa(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}const fa=e=>{let{currentFragment:n}=e,i=(0,X.Z)(e,ya);return(null===n||void 0===n?void 0:n.type)===Zn.IZ.Recap?(0,w.jsx)(Na,function(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?Sa(Object(i),!0).forEach((function(n){(0,J.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Sa(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}({currentFragment:n},i)):null},ga=e=>{let{currentFragment:n,className:i}=e;const{isSkipEnabled:t,skip:a,cancel:l,onSkipButtonShow:o}=da(n),d=(0,c.Z)();return t?(0,w.jsx)(Ut,{cancelButtonText:d.formatMessage({id:"features.player.custom-id.show-credits"}),onSkipClick:a,onCancelClick:l,className:i,onSkipButtonShow:o}):null},ba=(e,n)=>Math.abs(n-e)<=5,_a=["currentFragment"];function Fa(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}const ha=e=>{let{currentFragment:n}=e,i=(0,X.Z)(e,_a);const t=(0,Te.YO)();return(null===n||void 0===n?void 0:n.type)!==Zn.IZ.Credits||ba(n.endTime,t)?null:(0,w.jsx)(ga,function(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?Fa(Object(i),!0).forEach((function(n){(0,J.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Fa(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}({currentFragment:n},i))};function Oa(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}function ja(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?Oa(Object(i),!0).forEach((function(n){(0,J.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Oa(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}var Ca=i(52028),Ta=i.n(Ca);const Ia=e=>{let{contentId:n,currentFragment:i,className:a}=e;const l=ra(),{isSkipEnabled:o,skip:d,cancel:r,onSkipButtonShow:s}=((e,n)=>{const i=Kt(Gt(e),ee.c.NEXT_EPISODE_START_DELAY),a=(0,t.useCallback)((()=>{var e;i(ni._X.NEXT_EPISODE_SELECT_SKIP,null!==(e=null===n||void 0===n?void 0:n.type)&&void 0!==e?e:Zn.IZ.Unknown)}),[null===n||void 0===n?void 0:n.type,i]);return ja(ja({},da(n)),{},{skip:a})})(n,i),{duration:m,stopAutoSkip:u,dismissSkipEnabled:k}=(e=>{let{contentId:n,currentFragment:i}=e;const{0:a,1:l}=(0,t.useState)(!1),{0:o,1:d}=(0,t.useState)(!0),{isAutoSkipEnabled:r,autoSkipHappened:s}=Me({contentId:n}),m=Kt(Gt(n),ee.c.AUTOPLAY_NEXT_EPISODE_START_DELAY),c=(0,t.useCallback)((()=>{var e;s(),m(ni._X.NEXT_EPISODE_AUTO_SKIP,null!==(e=i.type)&&void 0!==e?e:Zn.IZ.Unknown)}),[s,i.type,m]),u=(0,Te.Kg)((e=>null===e||void 0===e?void 0:e.pause())),k=(0,t.useCallback)((e=>{e>i.endTime-1&&!r&&(u(),d(!1))}),[i.endTime,r,u]);return{duration:Yt({skip:c,skippableFragment:i,isAutoSkipDisabled:!r||a,onCurrentTimeChangedExtra:k}),stopAutoSkip:(0,t.useCallback)((()=>{l(!0)}),[]),dismissSkipEnabled:o}})({contentId:n,currentFragment:i}),v=(0,c.Z)();return o?(0,w.jsx)(Ut,{cancelButtonText:l.compoundCredits,skipButtonText:v.formatMessage({id:"features.player.0b24cde332da89fc3490c65f31dab0f9"}),onSkipClick:()=>{d()},renderSkipButtonIcon:e=>(0,w.jsx)("span",{className:mn()(Ta().icon,e),"data-tid":"component"}),onCancelClick:()=>{r(),u()},className:a,autoSkipTime:m,hideCancelButton:!k,onSkipButtonShow:s}):null},Pa=["currentFragment","contentId"];function wa(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}const xa=e=>{let{currentFragment:n,contentId:i}=e,t=(0,X.Z)(e,Pa);const a=(0,Te.YO)(),l=!!bi(i);return n&&(null===n||void 0===n?void 0:n.type)===Zn.IZ.Credits&&ba(n.endTime,a)&&l?(0,w.jsx)(Ia,function(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?wa(Object(i),!0).forEach((function(n){(0,J.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):wa(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}({currentFragment:n,contentId:i},t)):null},Da=e=>{let{currentFragment:n,className:i}=e;const{isSkipEnabled:t,skip:a,cancel:l}=da(n);return t?(0,w.jsx)(Ut,{onSkipClick:a,onCancelClick:l,className:i,hideCancelButton:!0}):null},Ea=["currentFragment"];function Ma(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}const Aa=e=>{let{currentFragment:n}=e,i=(0,X.Z)(e,Ea);return(null===n||void 0===n?void 0:n.type)!==Zn.IZ.Preroll?null:(0,w.jsx)(Da,function(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?Ma(Object(i),!0).forEach((function(n){(0,J.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Ma(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}({currentFragment:n},i))},Ra=e=>{let{contentId:n,className:i}=e;const t=At(_i(n));return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(Aa,{currentFragment:t,className:i}),(0,w.jsx)(pa,{contentId:n,currentFragment:t,className:i}),(0,w.jsx)(fa,{currentFragment:t,className:i}),(0,w.jsx)(ha,{currentFragment:t,className:i}),(0,w.jsx)(xa,{contentId:n,currentFragment:t,className:i})]})};var Ba=i(75053);const Va=e=>{let{className:n}=e;const i=(0,Te.RR)(),{togglePlay:t}=mt();return i&&(0,w.jsx)(Ba.J,{className:n,onClick:t})};var La=i(66189),Ua=i(24936),Wa=i(8130);const Za=e=>{const n=(0,c.Z)();switch(e){case"catchup":return n.formatMessage({id:"features.player.d1bfeb2d2a195dc4a399099264d18515"});case"film":return n.formatMessage({id:"features.player.992872a6a070783800faf636f8862fb8"});case"episode":return n.formatMessage({id:"features.player.a04be2df2b65b40f9a77f82ee27b599f"});default:return""}},Ha=e=>{var n;let{contentId:i}=e;const t=function(e){var n,i,t;const a=le(e);if("Episode"!==(null===a||void 0===a||null===(n=a.content)||void 0===n?void 0:n.__typename))return;const l=null===(i=a.content.tvSeries)||void 0===i||null===(t=i.restriction)||void 0===t?void 0:t.age;return l?(0,Wa.oW)(l):void 0}(i),a=He(i),l=We(i),o=null!==(n=null===l||void 0===l?void 0:l.hasSmokingScenes)&&void 0!==n?n:void 0,d=Za("episode"),{videoHeight:r,videoWidth:s}=(0,La.C)(a);return(0,w.jsx)(Ua.J,{age:t,videoHeight:r,videoWidth:s,smokingWarningText:o?d:void 0})};var za=i(67120),qa=i(95904),Ga=i(97040);function Ka(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}function Ya(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?Ka(Object(i),!0).forEach((function(n){(0,J.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Ka(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}function Ja(e,n){return function(e,n){if(e.status===n.status)return 0;if("offline"===e.status)return 1;return-1}(e,n)||function(e,n){return String.prototype.localeCompare.call(e.name,n.name)}(e,n)}const Xa={status:"error"},$a={async requestCachedExternalPlayerList(){let e;try{const n=await fetch("https://cloud-api.yandex.ru/videoplayer/v1/personality/profile/yandex_io/devices/",{method:"GET",credentials:"include"});e=await n.json()}catch{e=Xa}return e},async requestExternalPlayerList(e){var n;let i;try{const n=await fetch(`https://${e}/devices_online_stats`,{method:"GET",credentials:"include"});i=await n.json()}catch{i=Xa}return((null===(n=i)||void 0===n?void 0:n.items)||[]).filter((e=>e.screen_capable)).map((e=>({id:e.id,name:e.name,status:e.online?"idle":"offline",platform:e.platform}))).sort(Ja)},async getUserDevices(e,n){if(0===e){var i;const e=await this.requestCachedExternalPlayerList();if(null===e||void 0===e||null===(i=e.items)||void 0===i||!i.length)return[]}return await this.requestExternalPlayerList(n)},async requestExternalPlay(e){const n=await this.loadCsrfToken();if(n){const t={msg:Ya(Ya({},e.config),{},{start_at:e.startPosition}),device:e.externalPlayerId};let a;try{const e=await fetch("https://yandex.ru/video/station",{method:"POST",headers:{"X-CSRF-TOKEN":n},body:JSON.stringify(t),credentials:"include"});a=await e.json()}catch{a=Xa}var i;if("play"!==a.status)throw new Error(`ExternalPlaybackError: ${null===(i=a)||void 0===i?void 0:i.msg}`)}},loadCsrfToken:async()=>{try{const e=await fetch("https://frontend.vh.yandex.ru/csrf_token",{method:"GET",credentials:"include"});return await e.text()}catch(e){return null}}};var Qa=i(72822),el=i(57867),nl=i(38122),il=i(34730),tl=i(65072),al=i.n(tl);function ll(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}function ol(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?ll(Object(i),!0).forEach((function(n){(0,J.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ll(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}const dl=r().bind(al()),rl=e=>{const{onClick:n,children:i,className:t,external:a=!1,url:l="",size:o=Xi.q.size40}=e,d=a?{href:l,target:"_blank"}:{onClick:n};return(0,w.jsx)(Ji.z,ol(ol({className:dl("root",t),buttonType:Xi.L.Secondary,colorScheme:O.u.Dark,size:o},d),{},{children:i}))};var sl=i(62114),ml=i(74883),cl=i(9397),ul=i(35499),kl=i.n(ul);const vl=r().bind(kl()),pl={station:{streaming:sl.T.StationStreaming,idle:sl.T.Station},module:{streaming:sl.T.ModuleStreaming,idle:sl.T.Module},tv:{streaming:sl.T.TV,idle:sl.T.TV}},Nl=e=>{let{id:n,name:i,status:a,onStartStreaming:l,type:o}=e;const{0:d,1:r}=(0,t.useState)(!1),s=(0,c.Z)(),m=a===il.I.PLAYING,u=a!==il.I.OFFLINE&&!d;let k="";const v=(0,t.useCallback)((()=>{r(!0),l(n)}),[n,l]);(0,t.useEffect)((()=>{a===il.I.PLAYING&&d&&r(!1)}),[a,d]),m?k=s.formatMessage({id:"features.player.cb79f276cab6ab20aa015973c8e69a61"}):a===il.I.OFFLINE?k=s.formatMessage({id:"features.player.c8ef9d0bdd777afe0aeddb8efa4d43f8"}):a===il.I.IDLE&&(k=s.formatMessage({id:"features.player.68b4d0adc7ed4c65eaf957ff632da77d"}));const p=m?pl[o].streaming:pl[o].idle;return(0,w.jsxs)("div",{className:vl("root"),"data-tid":"ExternalDevice",children:[(0,w.jsxs)("div",{className:vl("device"),children:[(0,w.jsx)(ml.J,{className:vl("icon"),type:p,size:sl.J.Device}),(0,w.jsxs)("div",{className:vl("description"),children:[(0,w.jsx)("div",{className:vl("name"),children:i}),(0,w.jsx)("div",{className:vl("state"),children:k})]})]}),u&&(0,w.jsx)(rl,{className:vl("button"),size:Xi.q.size44,onClick:v,children:(0,w.jsx)(Yi.Z,{id:"features.player.6da0f0ae044012e784cdb53ab72a16f1"})}),d&&(0,w.jsx)("div",{className:vl("spinner"),children:(0,w.jsx)(cl.$,{size:nl.E.SMALL})})]})};var yl=i(44876);const Sl=e=>e.formatMessage({id:"features.player.e3f98d0d0a7a4a28e589d7e6f9dad117"}),fl="ott",gl="https://plus.yandex.ru/module?utm_source=kinopoisk&utm_medium=pleer-web&utm_campaign=MSCAMP-24-module";let bl;!function(e){e.LIST="list",e.LIST_ERROR="list-error",e.STREAMING="streaming",e.STREAMING_REQUESTED="streaming-requested",e.STREAMING_ERROR="streaming-error",e.LOADING="loading"}(bl||(bl={}));var _l=i(45884),Fl=i.n(_l);let hl;!function(e){e.Station="station",e.Module="module",e.TV="tv"}(hl||(hl={}));const Ol=e=>{let{platform:n}=e;return n.includes("module")?hl.Module:n.includes("_tv_")||["goya","magritte","monet"].includes(n)?hl.TV:hl.Station},jl=r().bind(Fl()),Cl=e=>{let{playerApi:n,contentId:i}=e;const{0:a,1:l}=(0,t.useState)(),{toggleResize:o}=(0,yl.o)(),{0:d,1:r}=(0,t.useState)(bl.LOADING),{0:s,1:m}=(0,t.useState)(!1),u=(0,c.Z)(),k=d===bl.LOADING,v=Boolean(d===bl.LIST&&a&&a.length),p=Boolean(d===bl.LIST&&a&&!a.length),N=d===bl.LIST_ERROR,y=d===bl.STREAMING_ERROR,S=N||y||p;let f="",g="";const b=u.formatMessage({id:"features.player.6910910e4610ca36fe7e02b28a15ad03"});p&&(g=u.formatMessage({id:"features.player.9a5c4bece80bf01f486b54505cb8f092"}),f=u.formatMessage({id:"features.player.416024405d47602674f9c53d12fe4799"})),y&&(g=u.formatMessage({id:"features.player.540bfe73153e3c8ffd2d24cfca129e1f"}),f=b),N&&(g=u.formatMessage({id:"features.player.b708bd383ea1c28103db0fcb1f76b30c"}),f=b);const _=(0,t.useCallback)((()=>{m((e=>!e))}),[]),F=(0,t.useCallback)((()=>{r(bl.LOADING),_()}),[_]),h=(0,t.useCallback)((()=>{N&&F(),y&&r(bl.LIST)}),[n,N,y,F]),O=(0,t.useCallback)((e=>{n&&n.requestExternalPlay({externalPlayerId:e,startPosition:(0,el.my)(n.getCurrentTime()||0),config:{player_id:fl,provider_item_id:i}}).then((()=>{_(),n&&n.pause()})).catch((()=>{r(bl.STREAMING_ERROR)}))}),[n,F,_]);return(0,t.useEffect)((()=>{null===n||void 0===n||n.requestExternalPlayerList({currentPlayerListLength:1}).then((e=>{l(e),r(bl.LIST)})).catch((()=>{r(bl.LIST_ERROR)}))}),[s,n]),(0,t.useEffect)((()=>{_()}),[]),(0,t.useLayoutEffect)((()=>{o()}),[v]),(0,w.jsxs)("div",{className:jl("root",{root_loading:k,root_result:S}),"data-tid":"Streaming",children:[(0,w.jsx)("h1",{className:jl("header"),children:Sl(u)}),k&&(0,w.jsx)("div",{className:jl("spinner"),children:(0,w.jsx)(cl.$,{size:nl.E.MEDIUM})}),v&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("ul",{className:jl("devices"),children:a.map((e=>{const{id:n,name:i,status:t,platform:a}=e;return(0,w.jsx)("li",{"data-tid":"component",children:(0,w.jsx)(Nl,{id:n,name:i,status:t,onStartStreaming:O,type:Ol({platform:a})})},n)}))}),(0,w.jsxs)("button",{onClick:F,className:jl("retry"),children:[(0,w.jsx)(ml.J,{className:jl("retry-icon"),type:sl.T.Retry,size:sl.J.Device}),(0,w.jsx)(Yi.Z,{id:"features.player.1506b595a90d65d9be2b04f3849b29c7"})]})]}),S&&(0,w.jsxs)("div",{className:jl("result"),children:[(0,w.jsx)("div",{className:jl("result-message"),children:g}),(0,w.jsx)("div",{className:jl("result-button"),children:(0,w.jsx)(rl,{className:jl("button"),size:Xi.q.size48,onClick:h,url:gl,external:p,children:f})})]})]})};var Tl=i(54928),Il=i.n(Tl);const Pl=e=>{let{contentId:n,className:i,onClick:a=f.Z}=e;const l=(0,Te.jj)(),o=(0,t.useRef)(null),{0:d,1:r}=(0,t.useState)(!1),{0:s,1:m}=(0,t.useState)(!1),{handleClick:u}=(0,Ga.w)({isOpen:s,setIsOpen:m,onClick:a}),k=(()=>{const{isTestCastingEnabled:e}=(0,Q.E)();return e?"testing.quasar.yandex.ru":"quasar.yandex.ru"})(),v=(0,t.useMemo)((()=>l?{requestExternalPlayerList:e=>{let{currentPlayerListLength:n}=e;return $a.getUserDevices(n,k)},requestExternalPlay:$a.requestExternalPlay.bind($a),getCurrentTime:()=>l.currentTime,pause:l.pause.bind(l)}:void 0),[l,k]),p=(0,c.Z)();return v?(0,w.jsxs)("div",{onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),ref:o,className:mn()(Il().root,i),"data-tid":"StreamingPopupButton",children:[(0,w.jsx)("button",{onClick:u,className:Il().settingsIcon,"aria-label":Sl(p),"aria-expanded":s}),(0,w.jsx)(Qa.G,{targetHovered:d,lockTargetHover:m,visible:s,targetRef:o,placement:"top",enableSeamlessResize:!0,children:(0,w.jsx)(Cl,{playerApi:v,contentId:n})})]}):null};var wl=i(97600),xl=i(21463);const Dl={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"PlayerSerialStructure"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"contentUuid"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"seasonContentId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"episodesLimit"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"episodesOffset"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"withUserData"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"movieByContentUuid"},arguments:[{kind:"Argument",name:{kind:"Name",value:"contentUuid"},value:{kind:"Variable",name:{kind:"Name",value:"contentUuid"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"contentId"}},{kind:"FragmentSpread",name:{kind:"Name",value:"SerialStructure"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"seasonByContentId"},arguments:[{kind:"Argument",name:{kind:"Name",value:"contentId"},value:{kind:"Variable",name:{kind:"Name",value:"seasonContentId"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"contentId"}},{kind:"Field",name:{kind:"Name",value:"number"}},{kind:"Field",name:{kind:"Name",value:"episodes"},arguments:[{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"episodesLimit"}}},{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"Variable",name:{kind:"Name",value:"episodesOffset"}}},{kind:"Argument",name:{kind:"Name",value:"isOnlyOnline"},value:{kind:"BooleanValue",value:!0}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"total"}},{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"SerialStructureEpisode"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"EpisodeBase"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Episode"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"contentId"}},{kind:"Field",name:{kind:"Name",value:"number"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"Title"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Title"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"localized"}},{kind:"Field",name:{kind:"Name",value:"original"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"SeasonBase"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Season"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"contentId"}},{kind:"Field",name:{kind:"Name",value:"number"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"SerialStructureEpisode"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Episode"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"EpisodeBase"}},{kind:"Field",name:{kind:"Name",value:"synopsis"},arguments:[{kind:"Argument",name:{kind:"Name",value:"override"},value:{kind:"EnumValue",value:"OTT_WHEN_EXISTS"}}]},{kind:"Field",name:{kind:"Name",value:"title"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"Title"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"season"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"SeasonBase"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"cover"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"avatarsUrl"}},{kind:"Field",name:{kind:"Name",value:"fallbackUrl"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"ott"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"duration"}},{kind:"Field",name:{kind:"Name",value:"editorAnnotation"}},{kind:"Field",name:{kind:"Name",value:"plannedAvailabilityDate"}},{kind:"Field",name:{kind:"Name",value:"viewOption"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"availabilityStatus"}},{kind:"Field",name:{kind:"Name",value:"availabilityEndDate"}},{kind:"Field",name:{kind:"Name",value:"watchabilityStatus"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"timing"},directives:[{kind:"Directive",name:{kind:"Name",value:"include"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"withUserData"}}}]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"current"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"SerialStructure"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Series"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"seasons"},arguments:[{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"IntValue",value:"10000"}},{kind:"Argument",name:{kind:"Name",value:"isOnlyOnline"},value:{kind:"BooleanValue",value:!0}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"contentId"}},{kind:"Field",name:{kind:"Name",value:"number"}},{kind:"Field",name:{kind:"Name",value:"episodes"},arguments:[{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"IntValue",value:"1"}},{kind:"Argument",name:{kind:"Name",value:"isOnlyOnline"},value:{kind:"BooleanValue",value:!0}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"SerialStructureEpisode"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"total"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"episodeGroupings"},arguments:[{kind:"Argument",name:{kind:"Name",value:"filter"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"onlyOnline"},value:{kind:"BooleanValue",value:!0}}]}},{kind:"Argument",name:{kind:"Name",value:"capacity"},value:{kind:"IntValue",value:"20"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"from"}},{kind:"Field",name:{kind:"Name",value:"to"}},{kind:"Field",name:{kind:"Name",value:"offset"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}}]};var El=i(18799),Ml=i(23131),Al=i.n(Ml);function Rl(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}function Bl(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?Rl(Object(i),!0).forEach((function(n){(0,J.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Rl(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}const Vl=(0,Rn.ZP)((()=>Promise.all([i.e(7928),i.e(7616)]).then(i.bind(i,17616)))),Ll=e=>(0,w.jsx)("div",{className:Al().root,"data-tid":"PlayerSeriesNavigatorLoader",children:(0,w.jsx)(t.Suspense,{fallback:null,children:(0,w.jsx)(Vl,Bl({},e))})});var Ul=i(89330);const Wl=e=>{var n,i,a,l;let{currentEpisodeId:o,onSelectEpisode:d}=e;const r=le(o);let s,m;var c,u,k,v;"Episode"===(null===r||void 0===r||null===(n=r.content)||void 0===n?void 0:n.__typename)&&(s=null===r||void 0===r||null===(c=r.content)||void 0===c||null===(u=c.tvSeries)||void 0===u?void 0:u.contentId,m=null===r||void 0===r||null===(k=r.content)||void 0===k||null===(v=k.season)||void 0===v?void 0:v.contentId);const p=(0,Ul.N)(s),{data:N,loading:y}=(0,j.a)(Dl,{variables:{contentUuid:null!==(i=s)&&void 0!==i?i:"",seasonContentId:null!==(a=m)&&void 0!==a?a:"",episodesLimit:20,episodesOffset:0,withUserData:p},errorPolicy:"all",fetchPolicy:"cache-first",skip:!s||!m}),S=null!==N&&void 0!==N&&N.movieByContentUuid&&"seasons"in N.movieByContentUuid?(0,El.V)(null===N||void 0===N?void 0:N.movieByContentUuid):[],{0:f,1:g}=(0,t.useState)(m);return"Episode"===(null===r||void 0===r||null===(l=r.content)||void 0===l?void 0:l.__typename)&&s&&m&&f?(0,w.jsx)(Ll,{tvSeriesId:s,currentSeasonId:f,onSelectSeason:g,seasons:S,loading:y,currentEpisodeId:o,onSelectEpisode:d},f):null};var Zl=i(39933),Hl=i.n(Zl);const zl=e=>{let{contentId:n,className:i,onClick:a=f.Z,onSelectEpisode:l=f.Z}=e;const o=(0,t.useRef)(null),{0:d,1:r}=(0,t.useState)(!1),{0:s,1:m}=(0,t.useState)(!1),{handleClick:c}=(0,Ga.w)({isOpen:s,setIsOpen:m,onClick:a}),u=(0,t.useCallback)((()=>{m(!1),l()}),[l,m]);return(0,w.jsxs)("div",{onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),ref:o,className:mn()(Hl().root,i),"data-tid":"EpisodeNavigatorPopupButton",children:[(0,w.jsx)("button",{onClick:c,className:Hl().episodeNavigatorButton,"aria-expanded":s,children:(0,w.jsx)(Yi.Z,{id:"features.player.1ccfe0c6ae3676fb5dec1f87697de192"})}),(0,w.jsx)(Qa.G,{targetHovered:d,lockTargetHover:m,visible:s,targetRef:o,placement:"top",enableSeamlessResize:!0,children:(0,w.jsx)(Wl,{currentEpisodeId:n,onSelectEpisode:u})})]})};var ql=i(3522);function Gl(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}function Kl(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?Gl(Object(i),!0).forEach((function(n){(0,J.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Gl(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}const Yl=e=>{var n;const{contentId:i,onSelectEpisode:a,psid:l}=e,{vsid:o}=(0,Te.jj)()||{},d=Oi(i),{isDynamicPrerollEnabled:r}=(0,Q.E)(),s=null===(n=He(i))||void 0===n?void 0:n.uri,m=(0,t.useMemo)((()=>({vsid:null!==o&&void 0!==o?o:"",psid:null!==l&&void 0!==l?l:"",filmId:null!==d&&void 0!==d?d:"",contentId:null!==i&&void 0!==i?i:"",manifestUrl:null!==s&&void 0!==s?s:""})),[o,l,d,i,s]),c=(0,ql.j)(m),u=(0,t.useCallback)((()=>c({vsid:null!==o&&void 0!==o?o:"",isDynamicPrerollEnabled:r})),[c,o,r]),k=(0,xl.rK)([u,a]);return(0,w.jsx)(zl,Kl(Kl({},e),{},{onSelectEpisode:k}))};var Jl=i(63855),Xl=i(59145),$l=i(97279),Ql=i(64888),eo=i(40180);const no={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"SetWatchParams"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"WatchParamsInputInput"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"watchParams"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"save"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"error"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"status"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}}]}}]},io=e=>{const[n]=(0,$l.D)(no,{onCompleted(e){var n,i;const t=null===e||void 0===e||null===(n=e.watchParams)||void 0===n||null===(i=n.save)||void 0===i?void 0:i.error;t&&(0,zn.H)({message:(0,Ql.B)((0,eo.b)(no),t)})}}),i=(0,Te.AW)(),t=(0,Te.U5)(),a=null===i||void 0===i?void 0:i.lang,l=null===t||void 0===t?void 0:t.lang,{ottId:o}=(0,Xl.j)(),d=null!==o&&void 0!==o?o:void 0;return{onAudioLangChange:(0,Te.Kg)(((i,t)=>{t&&i&&(i.setAudioTrack(t),n({variables:{input:{audioLanguage:t.lang,subtitleLanguage:null!==a&&void 0!==a?a:null,contentId:e}}}))}),[e,a,d]),onSubtitlesLangChange:(0,Te.Kg)(((i,t)=>{var a;l&&i&&(i.setTextTrack(t),n({variables:{input:{audioLanguage:l,subtitleLanguage:null!==(a=null===t||void 0===t?void 0:t.lang)&&void 0!==a?a:null,contentId:e}}}))}),[l,e,d])}},to=["contentId"];function ao(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}const lo=e=>{let{contentId:n}=e,i=(0,X.Z)(e,to);const{onAudioLangChange:t,onSubtitlesLangChange:a}=io(n);return(0,w.jsx)(Jl.Z,function(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?ao(Object(i),!0).forEach((function(n){(0,J.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ao(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}({contentId:n,onSelectAudioTrack:t,onSelectTextTrack:a},i))};var oo=i(51593);var ro=i(19058);const so=["contentId"];function mo(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}const co=e=>{let{contentId:n}=e,i=(0,X.Z)(e,so);const{subtitles:t,forceSubtitle:a}=function(e){var n,i,t,a,l,o;const d=We(e);return{subtitles:(0,oo.G)((null===d||void 0===d||null===(n=d.onlineStreams)||void 0===n||null===(i=n.streams)||void 0===i||null===(t=i[0])||void 0===t||null===(a=t.streamMeta)||void 0===a?void 0:a.subtitleMetas)||[]),forceSubtitle:!(null!==d&&void 0!==d&&null!==(l=d.onlineStreams)&&void 0!==l&&null!==(o=l.playerRestrictionConfig)&&void 0!==o&&o.subtitlesButtonEnable)}}(n),l=function(e){const n=We(e);var i,t,a,l;if(n)return(0,ro.q)((null===(i=n.onlineStreams)||void 0===i||null===(t=i.streams)||void 0===t||null===(a=t[0])||void 0===a||null===(l=a.streamMeta)||void 0===l?void 0:l.audioMetas)||[])}(n);return(0,w.jsx)(lo,function(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?mo(Object(i),!0).forEach((function(n){(0,J.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):mo(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}({contentId:n,audioTracks:l,subtitles:t||[],forceSubtitle:a},i))};var uo=i(7962),ko=i(78597),vo=i.n(ko);const po=e=>{let{preview:n,time:i}=e;return(0,w.jsxs)("div",{className:vo().root,"data-tid":"TimelinePreview",children:[n&&(0,w.jsx)("div",{className:vo().preview,style:n}),(0,w.jsx)("span",{className:vo().time,children:(0,uo.m)(Math.floor(i.visibleTime),60)[0]})]})},No=e=>{let{spriteDuration:n,tileDuration:i,uriTemplate:t,tilePixelResolution:a,spriteMatrixSize:l,spritePixelResolution:o}=e;return{spriteDuration:n,tileDuration:i,uriTemplate:t,resolution:o,tileSize:a,tiles:l}},yo=(e,n,i)=>{const{tiles:{rows:t,columns:a},uriTemplate:l,tileDuration:o}=n,d=t*a,r=Math.floor(e/o),s=r%d,m=Math.floor(s/a),c=s%a,u=Math.floor(r/d),k=l.replace("$Number$",String(u)),v=i?n.tileSize.width/2:n.tileSize.width,p=i?n.tileSize.height/2:n.tileSize.height,N=n.tileSize.height*n.tiles.rows,y=i?N/2:N;return{backgroundPosition:`-${c*v}px -${m*p}px`,backgroundSize:`${v*n.tiles.columns}px ${y}px`,spriteUrl:k,width:v,height:p}},So=e=>{let{time:n,config:i,isMetaFromStreams:a}=e;const{0:l,1:o}=(0,t.useState)(new Set),d=[];let r=null;if(null!==n&&i){const{modifiedTime:e,tile:t}=(e=>{var n,i;let{time:t,tiles:a}=e;const l=null!==(n=a.sort(((e,n)=>{var i,t;return(null!==(i=n.offset)&&void 0!==i?i:0)-(null!==(t=e.offset)&&void 0!==t?t:0)})).find((e=>{var n;return t>=(null!==(n=e.offset)&&void 0!==n?n:0)/1e3})))&&void 0!==n?n:null;return{modifiedTime:t-(null!==(i=null===l||void 0===l?void 0:l.offset)&&void 0!==i?i:0)/1e3,tile:l}})({time:n,tiles:i});if(t){const n=[t.lowRes,t.highRes];for(let i=0;i<n.length;i+=1){const t=n[i];if(!t)break;{const n=1===i&&a,{spriteUrl:o,backgroundPosition:s,backgroundSize:m,width:c,height:u}=yo(e,t,n);d.push(o),l.has(o)&&(r={background:`url(${o}) no-repeat ${s} / ${m}`,width:c,height:u})}}}}return(0,t.useEffect)((()=>{let e=!0;return d.forEach((n=>{const i=new Image,t=()=>{e&&o((e=>e.has(n)?e:new Set([...e,n])))};i.decode?(i.src=n,i.decode().then(t).catch(f.Z)):(i.onload=t,i.src=n)})),()=>{e=!1}}),[d.join("")]),r},fo=e=>{let{contentId:n,time:i}=e;const t=(e=>{var n,i,t,a,l;const o=We(e);return(null===o||void 0===o||null===(n=o.onlineStreams)||void 0===n||null===(i=n.streams)||void 0===i||null===(t=i[0])||void 0===t||null===(a=t.streamMeta)||void 0===a||null===(l=a.tilesContainer)||void 0===l?void 0:l.reduce(((e,n)=>(n&&e.push({highRes:No(n.highResolutionTiles),lowRes:No(n.lowResolutionTiles),offset:n.offset}),e)),[]))||void 0})(n),a=So({time:i.streamTime,config:t||null,isMetaFromStreams:!0});return(0,w.jsx)(po,{time:i,preview:a||void 0})};var go=i(41725),bo=i(10115);function _o(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}const Fo=e=>{const{seekBackward:n,seekForward:i}=Nt();return(0,w.jsx)(bo.R,function(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?_o(Object(i),!0).forEach((function(n){(0,J.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):_o(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}({seekForward:i,seekBackward:n},e))};var ho=i(39526),Oo=i(25837),jo=i(89291);function Co(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}const To=e=>{const{togglePlay:n}=mt();return(0,w.jsx)(jo._,function(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?Co(Object(i),!0).forEach((function(n){(0,J.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Co(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}({onClick:n},e))};var Io=i(80324),Po=i(21990),wo=i(94830),xo=i.n(wo);function Do(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}function Eo(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?Do(Object(i),!0).forEach((function(n){(0,J.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Do(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}var Mo=e=>{let{contentId:n,className:i,onPopupToggle:a,renderTimelineCursor:l,renderLeftControls:o=(()=>null),renderRightControls:d=(()=>null)}=e;const{0:r,1:s}=(0,t.useState)(!0);return(0,w.jsxs)("div",{className:mn()(xo().root,i),"data-tid":"MoviePlayerControlPanel",children:[(0,w.jsx)(go.T,{className:mn()(xo().timeline,{[xo().hidden]:!r}),renderActiveBar:e=>(0,w.jsx)(Io.Q,Eo(Eo({},e),{},{renderCursor:l}))}),(0,w.jsx)("div",{className:xo().controls,children:(0,w.jsxs)(Po.x,{onPopupToggle:a,children:[(0,w.jsxs)("div",{className:xo().leftControls,children:[(0,w.jsx)(To,{name:wi.Y.PLAY,contentId:n}),o(),(0,w.jsx)(Fo,{name:wi.Y.BACKWARD,type:"backward",contentId:n,className:xo().backwardSeekButton}),(0,w.jsx)(Fo,{name:wi.Y.FORWARD,type:"forward",contentId:n,className:xo().forwardSeekButton}),(0,w.jsx)(Oo.y,{onEnlargementChanged:e=>s(!e),className:xo().volumeControl})]}),(0,w.jsxs)("div",{className:xo().rightControls,children:[d(),(0,w.jsx)(ho.P,{name:wi.Y.FULLSCREEN,contentId:n})]})]})})]})},Ao=i(45802),Ro=i.n(Ao);const Bo=e=>{let{className:n,onClick:i=f.Z}=e;const t=(0,c.Z)();return(0,w.jsx)("button",{"aria-label":t.formatMessage({id:"features.player.4e9f01c7c9b9d609862ebbd23f0d4895"}),onClick:()=>i(),className:mn()(Ro().root,n),"data-tid":"NextEpisodeButton"})},Vo=e=>{let{contentId:n,className:i}=e;const a=bi(n),l=Kt(Gt(n),ee.c.NEXT_EPISODE_START_DELAY),o=(0,t.useCallback)((()=>{l(ni._X.NEXT_EPISODE_BUTTON)}),[l]);return a?(0,w.jsx)("div",{className:i,"data-tid":"NextEpisodeControlContainer",children:(0,w.jsx)(Bo,{contentId:n,name:wi.Y.NEXT_EPISODE,onClick:o})}):null};var Lo=e=>{let{contentId:n,className:i,psid:a,setIsHidingControlsBlocked:l,onSelectEpisode:o=f.Z}=e;const{0:d,1:r}=(0,t.useState)(!1),s=(0,wl.j)(),m=(0,t.useCallback)((e=>{l(e),s(e)}),[l,s]);return(0,w.jsx)(Mo,{contentId:n,className:i,onPopupToggle:m,renderTimelineCursor:n?e=>(0,w.jsx)(fo,{time:e,contentId:n}):void 0,renderLeftControls:()=>(0,w.jsx)(Vo,{contentId:n}),renderRightControls:()=>(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(Yl,{contentId:n,name:wi.Y.EPISODE_LIST,psid:a,onSelectEpisode:o}),(0,w.jsx)(co,{contentId:n,name:wi.Y.AUDIO_SUBS_LIST,onSubtitleSizeSettingsClick:()=>r(!0)}),(0,w.jsx)(qa.x,{name:wi.Y.ADJUSTMENT,contentId:n,contentType:ri.Z.EPISODE,isSubtitleSizeSettingsForceOpened:d,setIsSubtitleSizeSettingsForceOpened:r}),(0,w.jsx)(Pl,{name:wi.Y.STREAMING,contentId:n})]})})},Uo=i(46892);var Wo=i(3414),Zo=i(64995),Ho=i(6482),zo=i(77225),qo=i.n(zo);const Go=r().bind(qo()),Ko=e=>{let{prerollDuration:n,className:i,currentFragment:t,isInFavorites:a,movieId:l,isAnimated:o,onBookmarkClick:d}=e;const{skip:r,onSkipButtonShow:s}=da(t);return(0,w.jsxs)("div",{className:Go("container",i),ref:s,"data-tid":"MoviePrerollView",children:[l&&null!==a?(0,w.jsx)(Wo.e,{isInFavorites:a,buttonType:Xi.L.Accent,size:Xi.q.size48,colorScheme:O.u.Light,iconLeft:a?(0,w.jsx)(Ho.Z,{fill:"#FFF"}):(0,w.jsx)(Zo.Z,{fill:"#FFF"}),hasText:!0,className:Go("buttonGroup"),onClick:d}):null,(0,w.jsx)(Bt.Y,{color:Rt.e.gray,isAnimated:o,animationDuration:n,onClick:r,className:Go("buttonGroup"),children:(0,w.jsx)(Yi.Z,{id:"features.player.03ee826ab16eba9b9d3671e5e371100a"})})]})},Yo=e=>{let{className:n,skippableFragments:i,onStart:a,onClose:l,checkStage:o,movieId:d,isPlannedToWatch:r,onBookmarkClick:s}=e;const m=At(i),c=qe();(e=>{let{onStart:n,onClose:i}=e;const a=qe(),l=(0,t.useCallback)((e=>{a&&(e<a?n():i())}),[i,n,a]);(0,Te.O8)(l,250)})({onStart:a,onClose:l});const u=(0,Te.Z3)(),k=(()=>{const{0:e,1:n}=(0,t.useState)(!1),{0:i,1:a}=(0,t.useState)(!1),{0:l,1:o}=(0,t.useState)(!1);(0,Te.CP)((()=>a(!0)));const d="pause"===(0,Te.Jw)().playingState;return(0,t.useEffect)((()=>{d&&o(!0)}),[d]),(0,t.useEffect)((()=>{n(!i&&!l)}),[e,l,i]),e})();return u&&o("preroll")&&(null===m||void 0===m?void 0:m.type)===Zn.IZ.Preroll?(0,w.jsx)(Ko,{prerollDuration:(null!==c&&void 0!==c?c:0)+3,className:n,currentFragment:m,isInFavorites:r,movieId:d,isAnimated:k,onBookmarkClick:s}):null};var Jo=i(22680);const Xo=e=>{let{uiParams:{mainUuid:n,promotedMovieTitle:i},callbackParams:[{vsid:t,markType:a,uuid:l}]}=e;return{markType:a,entityType:S.d.Preroll,uuid:l,title:i||"-",vsid:t,mainUuid:n||"-"}},$o=e=>{const{isPlannedToWatch:n,seriesId:i,promotedMovieId:t,promotedContentId:a,promotedMovieTitle:l}=e,o=(d={mainUuid:i,promotedMovieTitle:l},(0,nn.$)({event:en.$W,uiParams:d,eventParamsBuilder:Xo}));var d;const r=(0,Qn.v)();return(0,Te.Kg)((e=>{o({vsid:(null===e||void 0===e?void 0:e.vsid)||"",markType:n?S.lb.Unbookmarked:S.lb.Bookmarked,uuid:t.toString()}),r({contentId:a,movieId:t,isFavorite:Boolean(n),toastViewVariant:ei.c.Top})}),[t,n])},Qo=["contentId"];function ed(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}const nd=e=>{var n,i;let{contentId:t}=e,a=(0,X.Z)(e,Qo);const l=_i(t),o=He(t),d=(null===(i=(0,Ue.E)(null===o||void 0===o||null===(n=o.streamMeta)||void 0===n?void 0:n.prerolls)[0])||void 0===i?void 0:i.promotedEntityId)||0,{isPlannedToWatch:r,title:s,contentId:m}=(0,Jo._)(d),c=Oi(t),u=$o({seriesId:c,isPlannedToWatch:Boolean(r),promotedContentId:m,promotedMovieId:d,promotedMovieTitle:s});return m?(0,w.jsx)(Yo,function(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?ed(Object(i),!0).forEach((function(n){(0,J.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ed(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}({skippableFragments:l,movieId:d,isPlannedToWatch:Boolean(r),onBookmarkClick:u},a)):null};var id=i(85359),td=i(75279),ad=i(95222),ld=i.n(ad),od=i(6392);const dd=r().bind(ld()),rd=e=>{let{onHideMusicOnboardingToast:n,subscribeOnCurrentTimeChanged:i,className:a,musicDeepDiveData:l}=e;const{0:o,1:d}=(0,t.useState)(!1),r="pause"===(0,Te.Jw)().playingState,s=(0,t.useCallback)((0,gt.D)(od.s,null!==n&&void 0!==n?n:f.Z),[n]),m=(0,t.useCallback)((0,gt.P)(od.C,!0,(e=>{const n=Math.round(1e3*e);(null===l||void 0===l?void 0:l.find((e=>n>=e.startTimeMs&&n<=(null===e||void 0===e?void 0:e.endTimeMs))))?d(!0):o&&d(!1)})),[l,o]);return(0,t.useEffect)((()=>{if(o&&s(),o&&r)return null===n||void 0===n||n(),()=>s.cancel()}),[r,o]),(0,t.useEffect)((()=>i(m)),[m,i]),o?(0,w.jsxs)(td.F,{className:dd("wrapper",a),children:[(0,w.jsx)("div",{className:dd("music-deep-dive-logo"),"data-tid":"MusicDeepDiveOnboardingComponent"}),(0,w.jsx)("span",{className:dd("text"),"data-test-id":"music-deep-dive-onboarding_text","data-tid":"MusicDeepDiveOnboardingComponent",children:(0,w.jsx)(Yi.Z,{id:"features.music-deep-dive-onboarding.a1573811084112989231aa91013eb23a"})})]}):null},sd=e=>{let{onHideMusicOnboardingToast:n,subscribeOnCurrentTimeChanged:i,musicDeepDiveData:t,className:a,isMusicOnboardingToastAvailable:l}=e;return l?(0,w.jsx)(rd,{onHideMusicOnboardingToast:n,musicDeepDiveData:t,subscribeOnCurrentTimeChanged:i,className:a}):null},md=e=>{let{className:n,deepDiveMusicData:i}=e;const{0:a,1:l}=(0,t.useState)((0,id.le)("music_toast_showed")),o=Boolean(i&&!a),d=(0,Te.Kg)(((e,n)=>null===e||void 0===e?void 0:e.onCurrentTimeChange((i=>e.isStarted&&n(i))))),r=(0,t.useCallback)((()=>{(0,id.D$)("music_toast_showed","1"),l("1")}),[]);return(0,w.jsx)(sd,{subscribeOnCurrentTimeChanged:d,className:n,isMusicOnboardingToastAvailable:o,musicDeepDiveData:i,onHideMusicOnboardingToast:r})},cd={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"EpisodePlayerMusicRecognitionData"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"contentId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"prerollsDurations"}},type:{kind:"NamedType",name:{kind:"Name",value:"Duration"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"videoToken"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"langCode"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"content"},arguments:[{kind:"Argument",name:{kind:"Name",value:"contentId"},value:{kind:"Variable",name:{kind:"Name",value:"contentId"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Episode"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"contentId"}},{kind:"Field",name:{kind:"Name",value:"ott"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"recognition"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"MovieMusicRecognition"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"MovieMusicItemData"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"MusicRecognitionFragment"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"endTimeMs"}},{kind:"Field",name:{kind:"Name",value:"startTimeMs"}},{kind:"Field",name:{kind:"Name",value:"track"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"Field",name:{kind:"Name",value:"artistNames"}},{kind:"Field",name:{kind:"Name",value:"album"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"Field",name:{kind:"Name",value:"year"}},{kind:"Field",name:{kind:"Name",value:"type"}},{kind:"Field",name:{kind:"Name",value:"cover"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"avatarsUrl"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"MovieMusicRecognition"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Recognition"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"music"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},arguments:[{kind:"Argument",name:{kind:"Name",value:"query"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"videoToken"},value:{kind:"Variable",name:{kind:"Name",value:"videoToken"}}},{kind:"ObjectField",name:{kind:"Name",value:"langCode"},value:{kind:"Variable",name:{kind:"Name",value:"langCode"}}},{kind:"ObjectField",name:{kind:"Name",value:"prerollsDuration"},value:{kind:"Variable",name:{kind:"Name",value:"prerollsDurations"}}}]}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"MovieMusicItemData"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}}]},ud=e=>{var n;if(e&&null!==(n=e.music)&&void 0!==n&&n.data){const n=e.music.data.items;return(null===n||void 0===n?void 0:n.reduce(((e,n)=>(n&&e.push(n),e)),[]))||null}return null};function kd(e){var n,i,t,a;const l=null===(n=We(e))||void 0===n||null===(i=n.onlineStreams)||void 0===i?void 0:i.streams;return null===(t=(0,Ze.J)(l))||void 0===t||null===(a=t.streamMeta)||void 0===a?void 0:a.videoToken}const vd={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"EpisodePlayerRecognitionFlags"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"contentId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"videoToken"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"content"},arguments:[{kind:"Argument",name:{kind:"Name",value:"contentId"},value:{kind:"Variable",name:{kind:"Name",value:"contentId"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Episode"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"contentId"}},{kind:"Field",name:{kind:"Name",value:"ott"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"recognition"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"MovieRecognitionFlags"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"MovieRecognitionFlags"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Recognition"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"actors"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"status"},arguments:[{kind:"Argument",name:{kind:"Name",value:"query"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"videoToken"},value:{kind:"Variable",name:{kind:"Name",value:"videoToken"}}}]}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"exists"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"music"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"status"},arguments:[{kind:"Argument",name:{kind:"Name",value:"query"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"videoToken"},value:{kind:"Variable",name:{kind:"Name",value:"videoToken"}}}]}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"exists"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}}]};function pd(e){const n=kd(e)||"",{data:i}=(0,j.a)(vd,{variables:{contentId:e,videoToken:n},skip:""===n}),t=i&&(null===i||void 0===i?void 0:i.content);let a=!1,l=!1;var o,d,r,s,m,c,u,k;t&&"Episode"===t.__typename&&(a=(null===t||void 0===t||null===(o=t.ott)||void 0===o||null===(d=o.recognition)||void 0===d||null===(r=d.actors)||void 0===r||null===(s=r.status)||void 0===s?void 0:s.exists)||!1,l=(null===t||void 0===t||null===(m=t.ott)||void 0===m||null===(c=m.recognition)||void 0===c||null===(u=c.music)||void 0===u||null===(k=u.status)||void 0===k?void 0:k.exists)||!1);return{isActorsRecognitionEnabled:a,isMusicRecognitionEnabled:l}}function Nd(e){var n;const{isMusicRecognitionEnabled:i}=pd(e),t=Qe(e),a=kd(e),l=null===(n=(0,Te.U5)())||void 0===n?void 0:n.lang,{data:o}=(0,j.a)(cd,{variables:{contentId:e,videoToken:a||"",prerollsDurations:t,langCode:l||""},skip:!i||!a||!l}),d=(e=>{var n,i;return"Episode"===(null===e||void 0===e||null===(n=e.content)||void 0===n?void 0:n.__typename)&&null!==(i=e.content.ott)&&void 0!==i&&i.recognition?e.content.ott.recognition:null})(o);return ud(d)}const yd=e=>{let{contentId:n,className:i}=e;const t=Nd(n);return t?(0,w.jsx)(md,{className:i,deepDiveMusicData:t}):null};function Sd(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}const fd=(e,n)=>{const i=i=>{const{playingState:t,previousPlayingState:a}=(0,Te.Jw)();return!t||null!==n&&void 0!==n&&n(t,a)?null:(0,w.jsx)(e,function(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?Sd(Object(i),!0).forEach((function(n){(0,J.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Sd(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}({},i))},t=e.displayName||e.name||"Component";return i.displayName=`${t}WithConditionCheck`,i};var gd=i(50954),bd=i.n(gd);function _d(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}function Fd(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?_d(Object(i),!0).forEach((function(n){(0,J.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):_d(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}const hd=(0,Rn.ZP)((()=>i.e(1747).then(i.bind(i,31747)))),Od=e=>(0,w.jsx)(t.Suspense,{fallback:null,children:(0,w.jsx)(hd,Fd({},e))}),jd=e=>{let{onOpenActorDetails:n,onCloseActorDetails:i,deepDiveActorsData:a,deepDiveMusicData:l,className:o}=e;const{0:d,1:r}=(0,t.useState)(null),{playingState:s}=(0,Te.Jw)(),m=(0,Te.yK)(),u=(0,t.useCallback)((e=>{r(e),null===n||void 0===n||n()}),[n]),k=(0,t.useCallback)((()=>{r(null),null===i||void 0===i||i()}),[i]),v=(0,c.Z)();return(0,w.jsxs)("div",{className:mn()(bd().root,o,{[bd().withActiveActor]:d}),"data-tid":"DeepDive",children:[d&&(0,w.jsx)("button",{onClick:k,className:bd().backButton,"aria-label":v.formatMessage({id:"features.deep-dive.2b0b0225a86bb67048840d3da9b899bc"})}),(0,w.jsx)(Od,{deepDiveActorsData:a,deepDiveMusicData:l,isActorDeepDiveFeatureEnabled:!0,selectedActorId:d,onSelectActorId:u,onEmptySpaceClick:k,onBackClick:k,playingState:s&&Te.h$[s],videoWidth:null===m||void 0===m?void 0:m.width,videoHeigth:null===m||void 0===m?void 0:m.height,classNames:{boxes:mn()(bd().boxes,{[bd().boxesInactive]:!d}),compactCardsLayout:bd().compactCardsLayout,compactCardsBlock:bd().compactCardsBlock,cardsLabel:bd().cardsLabel,fullCard:bd().fullCard}})]})};function Cd(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}const Td=e=>{let{callbackParams:[{vsid:n,activated:i}]}=e;return{vsid:n,remoteMode:S.PX.Disabled,orientation:(0,Wt.T)(),type:i?S.nm.Activated:S.nm.Deactivated}},Id=e=>{const n=(0,nn.$)({event:en.GR,eventParamsBuilder:Td,uiParams:{}}),{deepDiveActorsData:i}=e;return(0,Te.MQ)((e=>{const{vsid:t}=e||{};if(t&&i&&i.length>0)return n({vsid:t,activated:!0}),()=>n({vsid:t,activated:!1})}),[n,null===i||void 0===i?void 0:i.length]),(0,w.jsx)(jd,function(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?Cd(Object(i),!0).forEach((function(n){(0,J.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Cd(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}({},e))};var Pd=i(74429);const wd={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"EpisodePlayerActorsRecognitionData"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"contentId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"prerollsDurations"}},type:{kind:"NamedType",name:{kind:"Name",value:"Duration"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"videoToken"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"timeMs"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"content"},arguments:[{kind:"Argument",name:{kind:"Name",value:"contentId"},value:{kind:"Variable",name:{kind:"Name",value:"contentId"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Episode"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"contentId"}},{kind:"Field",name:{kind:"Name",value:"ott"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"recognition"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"MovieActorsRecognition"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"MovieRecognitionPerson"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Person"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"originalName"}},{kind:"Field",name:{kind:"Name",value:"poster"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"avatarsUrl"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"filmographyRelations"},arguments:[{kind:"Argument",name:{kind:"Name",value:"isOnline"},value:{kind:"BooleanValue",value:!0}},{kind:"Argument",name:{kind:"Name",value:"roleSlugs"},value:{kind:"ListValue",values:[{kind:"StringValue",value:"ACTOR",block:!1}]}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"IntValue",value:"15"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"movie"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"contentId"}},{kind:"Field",name:{kind:"Name",value:"title"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"localized"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"MovieRecognitionActorBoundingBox"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ActorBoundingBox"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"person"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"MovieRecognitionPerson"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"characterDescription"}},{kind:"Field",name:{kind:"Name",value:"roleDetails"}},{kind:"Field",name:{kind:"Name",value:"height"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"x"}},{kind:"Field",name:{kind:"Name",value:"y"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"MovieActorsRecognition"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Recognition"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"actors"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},arguments:[{kind:"Argument",name:{kind:"Name",value:"query"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"timeMs"},value:{kind:"Variable",name:{kind:"Name",value:"timeMs"}}},{kind:"ObjectField",name:{kind:"Name",value:"prerollsDuration"},value:{kind:"Variable",name:{kind:"Name",value:"prerollsDurations"}}},{kind:"ObjectField",name:{kind:"Name",value:"videoToken"},value:{kind:"Variable",name:{kind:"Name",value:"videoToken"}}}]}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"MovieRecognitionActorBoundingBox"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}}]},xd=e=>{var n;if(e&&null!==(n=e.actors)&&void 0!==n&&n.data){const n=e.actors.data.items;return(null===n||void 0===n?void 0:n.reduce(((e,n)=>(n&&e.push(n),e)),[]))||null}return null};const Dd=["contentId"];function Ed(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}function Md(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?Ed(Object(i),!0).forEach((function(n){(0,J.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Ed(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}const Ad=fd((e=>{let{contentId:n}=e,i=(0,X.Z)(e,Dd);const{isActorsRecognitionEnabled:a,isMusicRecognitionEnabled:l}=pd(n),{getCurrentActorsDeepDiveData:o,deepDiveActorsData:d}=function(e){const{isActorsRecognitionEnabled:n}=pd(e),i=kd(e),a=Qe(e),[l,{data:o}]=(0,Nn.t)(wd),d=(e=>{var n,i;return"Episode"===(null===e||void 0===e||null===(n=e.content)||void 0===n?void 0:n.__typename)&&null!==(i=e.content.ott)&&void 0!==i&&i.recognition?e.content.ott.recognition:null})(o),r=xd(d);return{getCurrentActorsDeepDiveData:(0,t.useCallback)((t=>{n&&i&&l({variables:{contentId:e,videoToken:i,prerollsDurations:a,timeMs:t}})}),[e,l,n,a,i]),deepDiveActorsData:r}}(n),r=Nd(n),s=(0,Te.ho)(),m=(0,t.useCallback)((e=>{o(Math.round(1e3*(e||0)))}),[o]);(0,Te.O8)(m);return!s&&(a||l)?(0,w.jsx)(Id,Md(Md({},i),{},{deepDiveActorsData:d,deepDiveMusicData:r})):null}),Pd.Tu);var Rd=i(31877),Bd=i.n(Rd);const Vd=r().bind(Bd()),Ld=e=>{let{onHideMusicOnboardingToast:n,className:i}=e;const a="pause"===(0,Te.Jw)().playingState;return(0,t.useEffect)((()=>{const e=setTimeout((()=>{n()}),11e3);return a&&(null===n||void 0===n||n()),()=>clearTimeout(e)}),[a,n]),(0,w.jsxs)(td.F,{className:Vd("wrapper",i),children:[(0,w.jsx)("div",{className:Vd("music-deep-dive-logo"),"data-tid":"MusicDeepDiveToast"}),(0,w.jsx)("span",{className:Vd("text"),"data-tid":"MusicDeepDiveToast",children:(0,w.jsx)(Yi.Z,{id:"features.player.1f5f367e8a4fa6715f074e73362ed735"})})]})},Ud=e=>{let{onHideMusicOnboardingToast:n,className:i,isControlsVisible:a,skipableFragments:l}=e;const{0:o,1:d}=(0,t.useState)(!1),r=(0,Te.Jw)().playingState,s=(0,Te.YY)(),m=(0,t.useRef)(0);return(0,t.useEffect)((()=>{var e;if(a&&m.current)return clearTimeout(m.current),void(m.current=0);if(a||m.current)return;(0!==(null===(e=l[0])||void 0===e?void 0:e.startTime)||s>l[0].endTime&&"play"===r)&&(m.current=window.setTimeout((()=>d(!0)),13e3))}),[l,s,r,a]),o?(0,w.jsx)(Ld,{onHideMusicOnboardingToast:n,className:i}):null},Wd=(0,h.QS)(null),Zd=e=>{let{contentId:n,className:i,isControlsVisible:a}=e;const{isMusicRecognitionEnabled:l}=pd(n),{0:o,1:d}=(0,t.useState)(null),r=ve(le(n)),s=Oi(n),m=s===(0,y.l)(Wd),c=(0,t.useCallback)((()=>{d(!0),Wd(s)}),[s]);return!l||o||m?null:(0,w.jsx)(Ud,{className:i,onHideMusicOnboardingToast:c,isControlsVisible:a,skipableFragments:r})};var Hd=i(45450),zd=i(41601),qd=i.n(zd);const Gd=r().bind(qd()),Kd=e=>{let{className:n}=e;return(0,w.jsxs)(td.F,{className:Gd("wrapper",n),children:[(0,w.jsx)("div",{className:Gd("image"),"data-tid":"TrialDaysPromoCodeToast"}),(0,w.jsx)("span",{className:Gd("text"),"data-tid":"TrialDaysPromoCodeToast",children:(0,w.jsx)(Yi.Z,{id:"features.player.05c9ba1c131201d740bae04dcd5c5262"})})]})},Yd=e=>{let{className:n}=e;const{0:i,1:a}=(0,t.useState)((0,Hd.x)()),l="pause"===(0,Te.Jw)().playingState,o=(0,t.useRef)(0);return(0,t.useEffect)((()=>{if(i&&((0,Hd.x)(!1),l&&(a(!1),clearTimeout(o.current)),!o.current))return o.current=window.setTimeout((()=>a(!1)),6e3),()=>clearTimeout(o.current)}),[i,l]),i?(0,w.jsx)(Kd,{className:n}):null};var Jd=i(23741),Xd=i.n(Jd);const $d=(0,Rn.ZP)((()=>i.e(6467).then(i.bind(i,76467)))),Qd=e=>{let{contentId:n,psid:i,onClose:a=f.Z,onSelectEpisode:l,isRatingScreenEnabled:o,className:d,rootContainerRef:r}=e;(e=>{Ge(He(e))})(n);const{checkIsStageCurrent:s,switchToPrerollStage:m,switchToDefaultStage:c,switchToFullSizeDeepDiveStage:u,switchToGraceCommunicationStage:k,switchToRatingScreenStage:v}=xi();return(0,w.jsx)(Di.t,{children:(0,w.jsx)(za.H,{children:(0,w.jsxs)(Ct,{children:[(0,w.jsx)(Ot,{isMovieActionsBlocked:s("fullSizeDeepDive","graceCommunication","ratingScreen"),onClose:a}),(0,w.jsx)(Pt,{className:mn()(Xd().layout,d),renderTopControls:s("default","ratingScreen","graceCommunication","preroll")?()=>(0,w.jsx)(Pi.m,{name:wi.Y.CLOSE,onClick:a,className:Xd().closeButton,contentId:n}):void 0,renderBottomControls:s("default")||s("preroll")?e=>{let{setIsHidingControlsBlocked:t}=e;return(0,w.jsx)("div",{className:Xd().controlPanelContainer,"data-tid":"component",children:(0,w.jsx)(Lo,{contentId:n,setIsHidingControlsBlocked:t,psid:i,onSelectEpisode:l})})}:void 0,renderControls:e=>{let{isControlsVisible:i}=e;return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(vt,{}),(0,w.jsx)(t.Suspense,{fallback:null,children:(0,w.jsx)($d,{rootContainerRef:r})}),s("default")&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(yd,{contentId:n,className:Xd().toast}),(0,w.jsx)(Zd,{className:Xd().toast,isControlsVisible:i,contentId:n}),(0,w.jsx)(Yd,{className:Xd().toast}),(0,w.jsx)(Uo.j,{isControlsVisible:i}),(0,w.jsx)(Va,{className:Xd().playButton}),!i&&(0,w.jsx)(Ha,{contentId:n}),(0,w.jsx)(Ra,{contentId:n,className:Xd().skipButtonGroup})]}),!s("preroll")&&(0,w.jsx)(Ad,{contentId:n,onOpenActorDetails:u,onCloseActorDetails:c,className:Xd().deepDive}),o&&(0,w.jsx)(Wi,{contentId:n,className:Xd().ratingScreen,onOpen:v,onClose:c}),!s("preroll")&&(0,w.jsx)(Mt,{contentId:n,className:Xd().meta,isControlsVisible:i}),(0,w.jsx)(nd,{contentId:n,onStart:m,onClose:c,checkStage:s,className:Xd().prerollView}),r&&(0,w.jsx)(Zi.X,{rootContainerRef:r}),s("preroll","default","graceCommunication")&&(0,w.jsx)(ct,{className:Xd().graceCommunication,onOpen:k,onClose:c})]})}})]})})})};var er=i(10128),nr=i.n(er);const ir=e=>{let{onClose:n=f.Z,onSelectEpisode:i,contentId:a,psid:l}=e;const{isPlayerHidden:o,isPlayerExpanded:d,isTrailerOpened:r,isCoverOpened:s,isRatingScreenEnabled:m,hidePlayer:c,setIsTrailerOpened:u,setIsCoverOpened:k,setIsTinderOpened:v,setIsTinderFadeOpened:p,expandPlayer:N,setIsRatingScreenEnabled:y}=kn(a,n),S=(0,t.useRef)(null),g=!r&&!s;return(0,w.jsxs)("div",{ref:S,className:nr().playerContainer,"data-tid":"EpisodePlayerView",children:[(0,w.jsx)(cn.q,{className:mn()(nr().root,{[nr().hidden]:o,[nr().minimized]:s||r,[nr().shiftedToRight]:s,[nr().shiftedToLeft]:r}),onClick:N,children:g&&(0,w.jsx)(Qd,{contentId:a,psid:l,className:nr().skin,onClose:n,onSelectEpisode:i,rootContainerRef:S,isRatingScreenEnabled:m})}),(0,w.jsx)(Ii,{isPlayerExpanded:d,contentId:a,onClose:n,onTrailerOpen:u,onCoverOpen:k,ontTinderFadeOpen:p,ontTinderOpen:v,setIsRatingScreenEnabled:y,onHidePlayer:c},a)]})};let tr,ar,lr;!function(e){e.initial="initial",e.inactive="inactive",e.starting="starting",e.started="started",e.finished="finished",e.error="error"}(tr||(tr={})),function(e){e.init="init",e.sendStart="sendStart",e.scheduleHeartbeat="scheduleHeartbeat",e.retryStart="retryStart",e.retryHeartbeat="retryHeartbeat",e.sendHeartbeat="sendHeartbeat",e.sendFinish="sendFinish",e.reportError="reportError"}(ar||(ar={})),function(e){e.start="start",e.finish="finish",e.heartbeat="heartbeat"}(lr||(lr={}));const or=e=>200===(null===e||void 0===e?void 0:e.status),dr=e=>2**e*1e3;class rr{constructor(e){let{heartbeatDelta:n,makeArbiterRequest:i}=e;(0,J.Z)(this,"heartbeatDelta",.05),(0,J.Z)(this,"state",tr.initial),(0,J.Z)(this,"heartbeatTimerId",null),(0,J.Z)(this,"retryTimerId",null),(0,J.Z)(this,"retryCounter",0),(0,J.Z)(this,"makeArbiterRequest",void 0),(0,J.Z)(this,"onUnload",(()=>{var e;(this.cleanUp(),this.state!==tr.inactive&&this.state!==tr.finished)&&(null===(e=this.makeArbiterRequest)||void 0===e||e.call(this,lr.finish,{isUnloadEvent:!0}))})),this.setHeartbeatDelta(n),this.makeArbiterRequest=i,window.addEventListener("unload",this.onUnload),this.performAction(ar.init)}onSourceChanged(){this.performAction(ar.sendFinish),this.state=tr.initial,this.performAction(ar.init)}destroy(){window.removeEventListener("unload",this.onUnload),this.onUnload()}onPlayingStateChange(e){e===Te.de.end&&this.performAction(ar.sendFinish),e===Te.de.play&&this.state===tr.finished&&(this.state=tr.initial,this.performAction(ar.init))}setHeartbeatDelta(e){this.heartbeatDelta=!e||e<0||e>1?this.heartbeatDelta||.05:e}performAction(e,n){switch(e){case ar.init:this.performInit();break;case ar.sendStart:this.performSendStart();break;case ar.sendHeartbeat:this.performSendHeartbeat();break;case ar.retryStart:this.performRetryStart();break;case ar.scheduleHeartbeat:this.performScheduleHeartbeat(n);break;case ar.retryHeartbeat:this.performRetryHeartbeat();break;case ar.sendFinish:this.performSendFinish();break;case ar.reportError:this.performReportError()}}performInit(){[tr.initial,tr.finished].includes(this.state)&&(this.makeArbiterRequest?this.performAction(ar.sendStart):this.state=tr.inactive)}performSendStart(){var e,n;const{state:i}=this;i!==tr.initial&&i!==tr.starting||(this.state=tr.starting,null===(e=this.makeArbiterRequest)||void 0===e||null===(n=e.call(this,lr.start))||void 0===n||n.then((e=>{if(or(e)){var n;this.resetRetryCounter(),this.performAction(ar.scheduleHeartbeat,null===(n=e.data)||void 0===n?void 0:n.heartbeat)}else{const n=sr(e);!n.isFatal&&this.retryCounter<3?this.performAction(ar.retryStart):this.performAction(ar.reportError,n)}})))}performSendHeartbeat(){var e,n;const{state:i}=this;i===tr.started&&(null===(e=this.makeArbiterRequest)||void 0===e||null===(n=e.call(this,lr.heartbeat))||void 0===n||n.then((e=>{if(or(e)){var n;this.resetRetryCounter(),this.performAction(ar.scheduleHeartbeat,null===(n=e.data)||void 0===n?void 0:n.heartbeat)}else{const n=sr(e);!n.isFatal&&this.retryCounter<3?this.performAction(ar.retryHeartbeat):this.performAction(ar.reportError,n)}})))}performScheduleHeartbeat(e){const{state:n}=this;if(n!==tr.starting&&n!==tr.started)return;const i=1e3*(e-e*this.heartbeatDelta);this.state=tr.started,this.heartbeatTimerId&&clearTimeout(this.heartbeatTimerId),this.heartbeatTimerId=window.setTimeout((()=>{this.performAction(ar.sendHeartbeat)}),i)}performRetryStart(){const{state:e}=this;e===tr.starting&&(this.retryTimerId=window.setTimeout((()=>{this.performAction(ar.sendStart)}),dr(this.retryCounter)),this.retryCounter+=1)}performRetryHeartbeat(){const{state:e}=this;e===tr.started&&(this.retryTimerId=window.setTimeout((()=>{this.performAction(ar.sendHeartbeat)}),dr(this.retryCounter)),this.retryCounter+=1)}performSendFinish(){var e;const{state:n}=this;n!==tr.inactive&&n!==tr.error&&n!==tr.finished&&(this.cleanUp(),this.state=tr.finished,this.resetRetryCounter(),null===(e=this.makeArbiterRequest)||void 0===e||e.call(this,lr.finish))}performReportError(){this.state=tr.error,this.cleanUp()}cleanUp(){this.heartbeatTimerId&&clearTimeout(this.heartbeatTimerId),this.retryTimerId&&clearTimeout(this.retryTimerId),this.resetRetryCounter()}resetRetryCounter(){this.retryCounter=0}}function sr(e){const{data:n,status:i}=e;if("object"===typeof n&&null!==n){const{isFatal:e,code:i}=n;return{isFatal:e,code:i}}return{isFatal:!1,code:String(i)}}var mr=i(52099);const{environment:cr}=_e()().publicRuntimeConfig,ur=e=>{let{config:n}=e;const{requestParams:i,server:a,enforcedHeartbeat:l,heartbeatDelta:o}=n,{0:d,1:r}=(0,t.useState)();return(0,Te.MQ)((e=>{const n=new rr({heartbeatDelta:o,makeArbiterRequest:(e,n)=>((e,n)=>{let{requestParams:i,server:t,envName:a,enforcedHeartbeat:l,useBeaconInWrapper:o=!0,isUnloadEvent:d}=n;const r=i&&JSON.stringify(i),s=new URLSearchParams;null!==i&&void 0!==i&&i.watchSessionId&&s.append("wsid",i.watchSessionId),l&&a!==mr.qA.Production&&s.append("customHeartbeat",l.toString());const m=`${t}/${e}?${s}`;if(!(d&&o&&navigator.sendBeacon&&window.Blob))return fetch(m,{body:r,credentials:"include",headers:{"Content-Type":"application/json"},method:"POST"}).then((e=>200===e.status?e.json().then((n=>({status:e.status,data:n}))):{status:e.status})).catch((e=>({status:e.status,data:e})));try{const e=r&&new Blob([r],{type:"application/json"});navigator.sendBeacon(m,e)}catch(c){}})(e,{isUnloadEvent:!(null===n||void 0===n||!n.isUnloadEvent),envName:cr,requestParams:i,server:a,enforcedHeartbeat:l})});r(n),e.onPlayingStateChange((e=>{n.onPlayingStateChange(e)}))})),(0,t.useEffect)((()=>()=>null===d||void 0===d?void 0:d.destroy()),[d]),(0,t.useEffect)((()=>{null===d||void 0===d||d.setHeartbeatDelta(o)}),[d,o]),(0,Te.FV)((null===d||void 0===d?void 0:d.onSourceChanged.bind(d))||f.Z),null};var kr=i(73708),vr=i(87196),pr=i(21641),Nr=i(76505);const yr={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"TimingsUserCredentials"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"userProfile"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"UserId"}},{kind:"Field",name:{kind:"Name",value:"userProfileCredentials"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"timingsAuthToken"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"UserId"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"UserProfileInterface"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"ottId"}},{kind:"Field",name:{kind:"Name",value:"kpId"}},{kind:"Field",name:{kind:"Name",value:"puid"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}}]};let Sr;!function(e){e[e.UNAUTHORIZED=401]="UNAUTHORIZED",e[e.FORBIDDEN=403]="FORBIDDEN",e[e.NOT_FOUND=404]="NOT_FOUND",e[e.CONFLICT=409]="CONFLICT",e[e.EXPECTATION_FAILED=417]="EXPECTATION_FAILED",e[e.INTERNAL_SERVER_ERROR=500]="INTERNAL_SERVER_ERROR"}(Sr||(Sr={}));const fr=["authorizationToken"],{timingApiHost:gr}=_e()().publicRuntimeConfig,br=`${gr}timings`;var _r=i(13014);const Fr=2e4;function hr(e){let{contentId:n,tvSeriesId:i,timingsInterval:a=Fr}=e;const l=(0,t.useRef)(!1),o=(0,t.useRef)(),d=(0,t.useCallback)((()=>{l.current=!0}),[]),{authorizationToken:r,profileId:s,refetchToken:m}=function(e){var n,i,a;const{data:l,refetch:o}=(0,j.a)(yr,{errorPolicy:"all",onCompleted:e}),d=(0,t.useCallback)((()=>{o().then(e)}),[e,o]);return{authorizationToken:null===l||void 0===l||null===(n=l.userProfile)||void 0===n||null===(i=n.userProfileCredentials)||void 0===i?void 0:i.timingsAuthToken,profileId:null===l||void 0===l||null===(a=l.userProfile)||void 0===a?void 0:a.id.ottId,refetchToken:d}}(d),c=(0,Te.Kg)(((e,t)=>{const d=void 0===o.current||Math.abs(t-o.current)>(0,_r.F)(a);var c;s&&r&&l.current&&d&&(null===e||void 0===e?void 0:e.playingState)!==Te.de.end&&(o.current=t,null===(c=function(e){let{authorizationToken:n}=e,i=(0,X.Z)(e,fr);const t=JSON.stringify(i),a={"Content-Type":"application/json"};return n&&(a["X-Timing-Token"]=n),fetch(br,{body:t,headers:a,method:"POST"}).then((e=>({status:e.status}))).catch((e=>({status:e.status,data:e})))}({contentGroupUuid:n,profileId:s,time:t,serialContentGroupUuid:i,authorizationToken:r}))||void 0===c||c.then((e=>{e.status===Sr.UNAUTHORIZED&&(l.current=!1,m())})))}),[a,s,r,n,i,m]);(0,Te.O8)(c)}var Or=i(50597),jr=i(39178);const Cr=e=>{let{contentId:n,tvSeriesId:i,timingsInterval:a,onSourceChanged:l=f.Z,onContentImpression:o,onFinish:d,onError:r,onWatchedTimeChanged:s}=e;const{play:m}=(0,Te.wh)(),c=(0,t.useCallback)((e=>{l(e),m()}),[l,m]);return(0,Te.FV)(c),(0,Te.ae)(o),(0,jr.h)(r),(0,Te.Cj)(d),(0,Te.PW)(s),(0,pr.q)(),(0,Te.Bk)(Nr.o),(0,Or.Y)(),(0,Te.VL)(!1),hr({contentId:n,tvSeriesId:n!==i?i:void 0,timingsInterval:a}),(0,Ft.I)(),null},Tr=(0,h.QS)(null),Ir=["onFinish","onClose","contentId","tvSeriesId"];function Pr(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}const wr=e=>{let{onFinish:n,onClose:i,contentId:a,tvSeriesId:l}=e,o=(0,X.Z)(e,Ir);const{onFinish:d}=(e=>{let{contentId:n}=e;const i=!!bi(n),{getIsAutoSkipEnabled:a,autoSkipHappened:l}=Me({contentId:n}),o=Kt(Gt(n),ee.c.AUTOPLAY_NEXT_EPISODE_START_DELAY);return{onFinish:(0,t.useCallback)((()=>{i&&a()&&(l(),o(ni._X.NEXT_EPISODE_AFTER_CREDITS))}),[l,a,i,o])}})({contentId:a}),r=((e,n,i)=>{const{rating:a}=U(n),l=Boolean(bi(e));return(0,t.useCallback)((()=>{a>0&&!l&&(null===i||void 0===i||i())}),[l,i,a])})(a,l,i),s=(0,t.useCallback)((()=>{d(),null===n||void 0===n||n(),r()}),[r,n,d]);return(()=>{const e=(0,t.useCallback)((e=>{e&&Tr(e)}),[]),n=(0,Te.Kg)((e=>{const n=Tr();n&&(null===e||void 0===e||e.setPlaybackRate(n))}),[]);(0,Te.x2)(e),(0,Te.Bk)(n)})(),(0,w.jsx)(Cr,function(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?Pr(Object(i),!0).forEach((function(n){(0,J.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Pr(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}({contentId:a,onFinish:s},o))};var xr=i(24129);const Dr=e=>{let{contentId:n,tvSeriesContentId:i,playerConfig:t,psid:a,onError:l,onSourceChanged:o,onContentImpression:d,onFinish:r,onClose:s,onSelectEpisode:m,onWatchedTimeChanged:c,concurrencyArbiterConfig:u}=e;const k=(0,xr.J)();return(0,w.jsx)(vr.J,{config:t,type:"episode",children:(0,w.jsxs)(ge.F,{children:[(0,w.jsx)(wr,{tvSeriesId:i,timingsInterval:(0,ye.O)(),contentId:n,onContentImpression:d,onFinish:r,onError:l,onClose:s,onSourceChanged:o,onWatchedTimeChanged:c}),(0,w.jsx)(rn,{contentId:n,psid:a}),k?(0,w.jsx)(kr.h,{onClose:s}):(0,w.jsx)(ir,{contentId:n,onClose:s,onSelectEpisode:m,psid:a}),u&&(0,w.jsx)(ur,{config:u})]})})};function Er(e){return{server:e.server||"",requestParams:e.concurrencyArbiterRequestParams}}const Mr=e=>{var n,i;const t=le(e);return null!==(n=t&&(null===(i=re(t))||void 0===i?void 0:i.contentId))&&void 0!==n?n:""};var Ar=i(14152),Rr=i(88261),Br=i(67721);const Vr=()=>{(0,Ne.u)(!1),(0,Br.b)(0),(0,Rr.O)(null)};var Lr=i(17446),Ur=i(51877),Wr=i(5494);const Zr=[ti.cG.PROMO,ti.cG.CONTINUE_WATCHING,ti.cG.WATCH_NEXT],Hr=()=>{(0,Lr.N)(null),(0,Ur.I)(ri.Z.UNKNOWN),$i(!1),(()=>{const e=o().query,n=Zr.filter((n=>e[n])),i=[ti.cG.WATCH,ti.cG.SEASON_NUMBER,ti.cG.EPISODE_NUMBER,ti.cG.PLAYING_CONTENT_ID,...n];n.length>0&&i.push(ti.cG.REDIRECT_TO_FILM_PAGE),(0,Wr.j)({queryParams:i})})()};var zr=i(26346);var qr=i(17093);var Gr=i(39107),Kr=i(6543);const Yr=(0,Gr.f)({startMarks:[ee.c.FILM_FIRST_IMPRESSION],endMarks:Kr.T})((e=>{let{contentId:n,onClose:i,onInitStart:a,onStart:l,onSourceChange:o}=e;const{handleClose:d,handleWatchedTimeChange:r}=(e=>{let{contentId:n,onClose:i}=e;const a=(0,Ar.P)(),l=Mr(n);return{handleClose:(0,t.useCallback)((()=>{xe(),l&&(null===i||void 0===i||i(),Vr(),Hr(),(0,zr.R)())}),[i,l]),handleWatchedTimeChange:a}})({contentId:n,onClose:i}),s=(e=>{const n=le(e);return(0,ie.h)({contentId:e,preferredTracks:ce(n),onlineStreams:de(n),startPosition:fe(n),telemetry:{from_block:ne.wi.Series,stream_block:ne.uH.Episode}})})(null!==n&&void 0!==n?n:"");(0,qr.c)((e=>{var n;const i=We(e);return null===i||void 0===i||null===(n=i.onlineStreams)||void 0===n?void 0:n.streams})(n));const m=(e=>{var n;const i=le(e),t=i&&oe(i),a=null===t||void 0===t||null===(n=t.onlineStreams)||void 0===n?void 0:n.concurrencyArbiterConfig;return a?Er(a):void 0})(null!==n&&void 0!==n?n:""),c=Mr(null!==n&&void 0!==n?n:"");return(e=>e.source.streams.length>=1)(s)?(0,w.jsx)(ne.J5,{contentId:n,playerConfig:s,onBeforeInit:a,onClose:d,onStart:l,renderPlayer:e=>{let{contentId:n,onStartCallback:i,handleError:t,handleFinish:a,psid:l,onClose:d}=e;return(0,w.jsx)(Dr,{contentId:n,tvSeriesContentId:c,playerConfig:s,onContentImpression:i,onFinish:a,onError:t,onClose:d,onSourceChanged:o,psid:l,onWatchedTimeChanged:r,concurrencyArbiterConfig:m})}}):null})),Jr={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"FilmPlayerBaseInfo"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"contentId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"prerollsSupported"}},type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}},defaultValue:{kind:"BooleanValue",value:!1}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"content"},arguments:[{kind:"Argument",name:{kind:"Name",value:"contentId"},value:{kind:"Variable",name:{kind:"Name",value:"contentId"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"VideoInterface"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"FilmPlayerBaseInfo"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"MovieStreamAudioMeta"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AudioMeta"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"audioChannelsNumber"}},{kind:"Field",name:{kind:"Name",value:"audioGroupId"}},{kind:"Field",name:{kind:"Name",value:"forAdult"}},{kind:"Field",name:{kind:"Name",value:"language"}},{kind:"Field",name:{kind:"Name",value:"languageName"}},{kind:"Field",name:{kind:"Name",value:"quality"}},{kind:"Field",name:{kind:"Name",value:"studioName"}},{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"Field",name:{kind:"Name",value:"visibleByDefault"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"MovieStreamDrmConfig"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"DrmConfig"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"drmServers"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"certificateUrl"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"processSPCPath"}},{kind:"Field",name:{kind:"Name",value:"provisioningUrl"}},{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"headers"}},{kind:"Field",name:{kind:"Name",value:"requestParams"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"MovieStreamSubtitleMeta"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"SubtitleMeta"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"forAdult"}},{kind:"Field",name:{kind:"Name",value:"languageName"}},{kind:"Field",name:{kind:"Name",value:"studio"}},{kind:"Field",name:{kind:"Name",value:"type"}},{kind:"Field",name:{kind:"Name",value:"language"}},{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"visibleByDefault"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"MovieStreamTile"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Tile"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"spriteDuration"}},{kind:"Field",name:{kind:"Name",value:"tileDuration"}},{kind:"Field",name:{kind:"Name",value:"uriTemplate"}},{kind:"Field",name:{kind:"Name",value:"tilePixelResolution"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"height"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"spriteMatrixSize"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"columns"}},{kind:"Field",name:{kind:"Name",value:"rows"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"spritePixelResolution"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"height"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"MovieStreamTiles"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"TilesContainer"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"highResolutionTiles"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"MovieStreamTile"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"lowResolutionTiles"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"MovieStreamTile"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"offset"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"MovieStreamPrerolls"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PrerollMeta"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"durationMs"}},{kind:"Field",name:{kind:"Name",value:"promotedEntityId"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"MovieStreamSkippableFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"SkippableFragment"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"startTime"}},{kind:"Field",name:{kind:"Name",value:"endTime"}},{kind:"Field",name:{kind:"Name",value:"final"}},{kind:"Field",name:{kind:"Name",value:"type"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"MovieStreamMeta"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"StreamMeta"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"audioMetas"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"MovieStreamAudioMeta"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"drmConfig"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"MovieStreamDrmConfig"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"subtitleMetas"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"MovieStreamSubtitleMeta"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"tilesContainer"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"MovieStreamTiles"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"trackings"}},{kind:"Field",name:{kind:"Name",value:"videoMetas"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"bitrate"}},{kind:"Field",name:{kind:"Name",value:"height"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"prerollsDuration"}},{kind:"Field",name:{kind:"Name",value:"prerolls"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"MovieStreamPrerolls"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"skippableFragments"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"MovieStreamSkippableFragment"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"videoToken"}},{kind:"Field",name:{kind:"Name",value:"cuesUrl"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"MovieStream"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Stream"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"streamMeta"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"MovieStreamMeta"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"MovieOnlineStreams"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"OnlineStreams"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"licenseStatus"}},{kind:"Field",name:{kind:"Name",value:"drmRequirement"}},{kind:"Field",name:{kind:"Name",value:"streams"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"MovieStream"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"sessionId"}},{kind:"Field",name:{kind:"Name",value:"concurrencyArbiterConfig"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"concurrencyArbiterRequestParams"}},{kind:"Field",name:{kind:"Name",value:"server"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"playerRestrictionConfig"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"subtitlesButtonEnable"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"monetizationModel"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"FilmPlayerOnlineStreams"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Ott"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Ott_AbstractVideo"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"onlineStreams"},arguments:[{kind:"Argument",name:{kind:"Name",value:"prerollsSupported"},value:{kind:"Variable",name:{kind:"Name",value:"prerollsSupported"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"MovieOnlineStreams"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"SmokingFilmFlag"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Ott"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Ott_AbstractVideo"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hasSmokingScenes"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"MovieTiming"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"OttTiming"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"current"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"FilmOttPreview"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Ott_AbstractVideo"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"preview"},selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"OttPreview_AbstractVideo"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"timing"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"MovieTiming"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"duration"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"MovieWatchParams"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"OttUserData"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"watchParams"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"audioLanguage"}},{kind:"Field",name:{kind:"Name",value:"subtitleLanguage"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"FilmAgeRestriction"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"VideoInterface"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"restriction"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"age"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"FilmPlayerBaseInfo"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"VideoInterface"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"filmContentId"},name:{kind:"Name",value:"contentId"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",alias:{kind:"Name",value:"filmOtt"},name:{kind:"Name",value:"ott"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"FilmPlayerOnlineStreams"}},{kind:"FragmentSpread",name:{kind:"Name",value:"SmokingFilmFlag"}},{kind:"FragmentSpread",name:{kind:"Name",value:"FilmOttPreview"}},{kind:"Field",name:{kind:"Name",value:"userData"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"MovieWatchParams"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"FilmAgeRestriction"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}}]},Xr=e=>(0,te.a)(Jr,{contentId:e,prerollsSupported:(0,Q.E)().isDynamicPrerollEnabled});function $r(e){var n,i,t;if(("Film"===(null===e||void 0===e||null===(n=e.content)||void 0===n?void 0:n.__typename)||"Video"===(null===e||void 0===e||null===(i=e.content)||void 0===i?void 0:i.__typename))&&"Ott_AbstractVideo"===(null===(t=e.content.filmOtt)||void 0===t?void 0:t.__typename))return e.content.filmOtt}function Qr(e){var n;return e&&(null===(n=$r(e))||void 0===n?void 0:n.onlineStreams)||void 0}function es(e,n){const i=function(e){var n;const i=e&&$r(e);return(null===i||void 0===i||null===(n=i.userData)||void 0===n?void 0:n.watchParams)||void 0}(e),t=Qr(e);return me({watchParams:i,onlineStreams:t,getDefaultAudio:n})}function ns(e){var n,i,t,a;const l=e&&$r(e),o=null===l||void 0===l||null===(n=l.onlineStreams)||void 0===n||null===(i=n.streams)||void 0===i||null===(t=i[0])||void 0===t||null===(a=t.streamMeta)||void 0===a?void 0:a.skippableFragments;return o?ue(o):ke.es}function is(e){const n=ns(e),i=function(e){var n;const i=e&&(null===(n=$r(e))||void 0===n?void 0:n.preview);if("OttPreview_AbstractVideo"===(null===i||void 0===i?void 0:i.__typename))return i||void 0}(e);let t=0,a=1;var l,o;"OttPreview_AbstractVideo"===(null===i||void 0===i?void 0:i.__typename)&&(i.duration&&(a=i.duration),null!==(l=i.timing)&&void 0!==l&&l.current&&(t=null===(o=i.timing)||void 0===o?void 0:o.current));return Se({duration:a,timing:t,skippableFragments:n})}function ts(e){const n=Xr(e);return n?$r(n):void 0}function as(e){var n,i,t,a,l;const o=ts(e);return(null===o||void 0===o||null===(n=o.onlineStreams)||void 0===n||null===(i=n.streams)||void 0===i||null===(t=i[0])||void 0===t||null===(a=t.streamMeta)||void 0===a||null===(l=a.skippableFragments)||void 0===l?void 0:l.filter(Boolean))||ke.es}const ls=e=>{let{contentId:n,className:i}=e;const t=At(as(n));return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(Aa,{currentFragment:t,className:i}),(0,w.jsx)(ua,{contentId:n,currentFragment:t,className:i}),(0,w.jsx)(fa,{currentFragment:t,className:i}),(0,w.jsx)(ha,{currentFragment:t,className:i})]})},os={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"FilmAgeRestriction"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"VideoInterface"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"restriction"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"age"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}}]};const ds=e=>{var n;const i=ts(e);return(0,Ze.J)(null===i||void 0===i||null===(n=i.onlineStreams)||void 0===n?void 0:n.streams)},rs=e=>{var n;let{contentId:i}=e;const t=function(e){var n,i;const t=null===(n=(0,he.r)({id:(0,Oe.wY)(e),fragment:os,variables:{contentId:e}}))||void 0===n||null===(i=n.restriction)||void 0===i?void 0:i.age;return t?(0,Wa.oW)(t):void 0}(i),a=ds(i),l=ts(i),o=null!==(n=null===l||void 0===l?void 0:l.hasSmokingScenes)&&void 0!==n?n:void 0,d=Za("film"),{videoHeight:r,videoWidth:s}=(0,La.C)(a);return(0,w.jsx)(Ua.J,{age:t,videoHeight:r,videoWidth:s,smokingWarningText:o?d:void 0})};const ss=["contentId"];function ms(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}const cs=e=>{let{contentId:n}=e,i=(0,X.Z)(e,ss);const{subtitles:t,forceSubtitle:a}=function(e){var n,i,t,a,l,o,d;const r=ts(e),s=!(null!==r&&void 0!==r&&null!==(n=r.onlineStreams)&&void 0!==n&&null!==(i=n.playerRestrictionConfig)&&void 0!==i&&i.subtitlesButtonEnable),m=null===r||void 0===r||null===(t=r.onlineStreams)||void 0===t||null===(a=t.streams)||void 0===a||null===(l=a[0])||void 0===l||null===(o=l.streamMeta)||void 0===o||null===(d=o.subtitleMetas)||void 0===d?void 0:d.reduce(((e,n)=>(n&&e.push(n),e)),[]);return{subtitles:(0,oo.G)(m||[]),forceSubtitle:s}}(n),l=function(e){var n,i,t,a,l;const o=ts(e),d=null===o||void 0===o||null===(n=o.onlineStreams)||void 0===n||null===(i=n.streams)||void 0===i||null===(t=i[0])||void 0===t||null===(a=t.streamMeta)||void 0===a||null===(l=a.audioMetas)||void 0===l?void 0:l.reduce(((e,n)=>(n&&e.push(n),e)),[]);return(0,ro.q)(d||[])}(n);return(0,w.jsx)(lo,function(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?ms(Object(i),!0).forEach((function(n){(0,J.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ms(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}({contentId:n,audioTracks:l,subtitles:t||[],forceSubtitle:a},i))},us=e=>{let{contentId:n,time:i}=e;const t=(e=>{var n,i,t,a,l;const o=ts(e);return(null===o||void 0===o||null===(n=o.onlineStreams)||void 0===n||null===(i=n.streams)||void 0===i||null===(t=i[0])||void 0===t||null===(a=t.streamMeta)||void 0===a||null===(l=a.tilesContainer)||void 0===l?void 0:l.reduce(((e,n)=>(n&&e.push({highRes:No(n.highResolutionTiles),lowRes:No(n.lowResolutionTiles),offset:n.offset}),e)),[]))||void 0})(n),a=So({time:i.streamTime,config:t||null,isMetaFromStreams:!0});return(0,w.jsx)(po,{time:i,preview:a||void 0})};var ks=e=>{let{contentId:n,className:i,setIsHidingControlsBlocked:a}=e;const{0:l,1:o}=(0,t.useState)(!1),d=(0,wl.j)(),r=(0,t.useCallback)((e=>{a(e),d(e)}),[a,d]);return(0,w.jsx)(Mo,{contentId:n,className:i,onPopupToggle:r,renderTimelineCursor:n?e=>(0,w.jsx)(us,{time:e,contentId:n}):void 0,renderRightControls:()=>(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(cs,{contentId:n,name:wi.Y.AUDIO_SUBS_LIST,onSubtitleSizeSettingsClick:()=>o(!0)}),(0,w.jsx)(qa.x,{name:wi.Y.ADJUSTMENT,contentId:n,contentType:ri.Z.FILM,isSubtitleSizeSettingsForceOpened:l,setIsSubtitleSizeSettingsForceOpened:o}),(0,w.jsx)(Pl,{name:wi.Y.STREAMING,contentId:n})]})})};const vs=e=>{let{uiParams:{mainUuid:n,promotedMovieTitle:i},callbackParams:[{vsid:t,markType:a,uuid:l}]}=e;return{markType:a,entityType:S.d.Preroll,uuid:l,title:i||"-",vsid:t,mainUuid:n}},ps=e=>{const{contentId:n,isPlannedToWatch:i,promotedContentId:t,promotedMovieid:a,promotedMovieTitle:l}=e,o=(d={mainUuid:n,promotedMovieTitle:l},(0,nn.$)({event:en.$W,uiParams:d,eventParamsBuilder:vs}));var d;const r=(0,Qn.v)();return(0,Te.Kg)((e=>{o({vsid:(null===e||void 0===e?void 0:e.vsid)||"",markType:i?S.lb.Unbookmarked:S.lb.Bookmarked,uuid:a.toString()}),r({contentId:t,movieId:a,isFavorite:Boolean(i),toastViewVariant:ei.c.Top})}),[a,i])},Ns=["contentId"];function ys(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}const Ss=e=>{var n,i;let{contentId:t}=e,a=(0,X.Z)(e,Ns);const l=as(t),o=ds(t),d=(null===(i=(0,Ue.E)(null===o||void 0===o||null===(n=o.streamMeta)||void 0===n?void 0:n.prerolls)[0])||void 0===i?void 0:i.promotedEntityId)||0,{isPlannedToWatch:r,title:s,contentId:m}=(0,Jo._)(d),c=ps({contentId:t,isPlannedToWatch:Boolean(r),promotedContentId:m,promotedMovieid:d,promotedMovieTitle:s});return m?(0,w.jsx)(Yo,function(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?ys(Object(i),!0).forEach((function(n){(0,J.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ys(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}({skippableFragments:l,movieId:d,isPlannedToWatch:Boolean(r),onBookmarkClick:c},a)):null},fs=e=>Ge(ds(e)),gs={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"FilmPlayerRecognitionFlags"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"contentId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"videoToken"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"content"},arguments:[{kind:"Argument",name:{kind:"Name",value:"contentId"},value:{kind:"Variable",name:{kind:"Name",value:"contentId"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"VideoInterface"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"contentId"}},{kind:"Field",name:{kind:"Name",value:"ott"},selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Ott_AbstractVideo"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"recognition"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"MovieRecognitionFlags"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"MovieRecognitionFlags"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Recognition"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"actors"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"status"},arguments:[{kind:"Argument",name:{kind:"Name",value:"query"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"videoToken"},value:{kind:"Variable",name:{kind:"Name",value:"videoToken"}}}]}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"exists"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"music"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"status"},arguments:[{kind:"Argument",name:{kind:"Name",value:"query"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"videoToken"},value:{kind:"Variable",name:{kind:"Name",value:"videoToken"}}}]}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"exists"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}}]};function bs(e){var n,i,t,a;const l=null===(n=ts(e))||void 0===n||null===(i=n.onlineStreams)||void 0===i?void 0:i.streams;return null===(t=(0,Ze.J)(l))||void 0===t||null===(a=t.streamMeta)||void 0===a?void 0:a.videoToken}function _s(e){var n;const i=bs(e)||"",{data:t}=(0,j.a)(gs,{variables:{contentId:e,videoToken:i},skip:""===i}),a=t&&(null===t||void 0===t?void 0:t.content);let l=!1,o=!1;var d,r,s,m,c,u;a&&"Film"===a.__typename&&"Ott_AbstractVideo"===(null===(n=a.ott)||void 0===n?void 0:n.__typename)&&(l=(null===(d=a.ott.recognition)||void 0===d||null===(r=d.actors)||void 0===r||null===(s=r.status)||void 0===s?void 0:s.exists)||!1,o=(null===(m=a.ott.recognition)||void 0===m||null===(c=m.music)||void 0===c||null===(u=c.status)||void 0===u?void 0:u.exists)||!1);return{isActorsRecognitionEnabled:l,isMusicRecognitionEnabled:o}}const Fs={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"FilmPlayerMusicRecognitionData"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"contentId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"prerollsDurations"}},type:{kind:"NamedType",name:{kind:"Name",value:"Duration"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"videoToken"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"langCode"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"content"},arguments:[{kind:"Argument",name:{kind:"Name",value:"contentId"},value:{kind:"Variable",name:{kind:"Name",value:"contentId"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"VideoInterface"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"contentId"}},{kind:"Field",name:{kind:"Name",value:"ott"},selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Ott_AbstractVideo"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"recognition"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"MovieMusicRecognition"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"MovieMusicItemData"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"MusicRecognitionFragment"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"endTimeMs"}},{kind:"Field",name:{kind:"Name",value:"startTimeMs"}},{kind:"Field",name:{kind:"Name",value:"track"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"Field",name:{kind:"Name",value:"artistNames"}},{kind:"Field",name:{kind:"Name",value:"album"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"Field",name:{kind:"Name",value:"year"}},{kind:"Field",name:{kind:"Name",value:"type"}},{kind:"Field",name:{kind:"Name",value:"cover"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"avatarsUrl"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"MovieMusicRecognition"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Recognition"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"music"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},arguments:[{kind:"Argument",name:{kind:"Name",value:"query"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"videoToken"},value:{kind:"Variable",name:{kind:"Name",value:"videoToken"}}},{kind:"ObjectField",name:{kind:"Name",value:"langCode"},value:{kind:"Variable",name:{kind:"Name",value:"langCode"}}},{kind:"ObjectField",name:{kind:"Name",value:"prerollsDuration"},value:{kind:"Variable",name:{kind:"Name",value:"prerollsDurations"}}}]}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"MovieMusicItemData"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}}]};function hs(e){var n,i,t,a;const l=ts(e);return(null===l||void 0===l||null===(n=l.onlineStreams)||void 0===n||null===(i=n.streams)||void 0===i||null===(t=i[0])||void 0===t||null===(a=t.streamMeta)||void 0===a?void 0:a.prerollsDuration)||0}function Os(e){return Xe(hs(e))}function js(e){var n;const{isMusicRecognitionEnabled:i}=_s(e),t=Os(e),a=bs(e),l=null===(n=(0,Te.U5)())||void 0===n?void 0:n.lang,{data:o}=(0,j.a)(Fs,{variables:{contentId:e,videoToken:a||"",prerollsDurations:t,langCode:l||""},skip:!i||!a||!l}),d=(e=>{var n,i;return"Film"===(null===e||void 0===e||null===(n=e.content)||void 0===n?void 0:n.__typename)&&"Ott_AbstractVideo"===(null===(i=e.content.ott)||void 0===i?void 0:i.__typename)&&e.content.ott.recognition?e.content.ott.recognition:null})(o);return ud(d)}const Cs={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"FilmPlayerActorsRecognitionData"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"contentId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"prerollsDurations"}},type:{kind:"NamedType",name:{kind:"Name",value:"Duration"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"videoToken"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"timeMs"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"content"},arguments:[{kind:"Argument",name:{kind:"Name",value:"contentId"},value:{kind:"Variable",name:{kind:"Name",value:"contentId"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"VideoInterface"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"contentId"}},{kind:"Field",name:{kind:"Name",value:"ott"},selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Ott_AbstractVideo"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"recognition"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"MovieActorsRecognition"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"MovieRecognitionPerson"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Person"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"originalName"}},{kind:"Field",name:{kind:"Name",value:"poster"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"avatarsUrl"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"filmographyRelations"},arguments:[{kind:"Argument",name:{kind:"Name",value:"isOnline"},value:{kind:"BooleanValue",value:!0}},{kind:"Argument",name:{kind:"Name",value:"roleSlugs"},value:{kind:"ListValue",values:[{kind:"StringValue",value:"ACTOR",block:!1}]}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"IntValue",value:"15"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"movie"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"contentId"}},{kind:"Field",name:{kind:"Name",value:"title"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"localized"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"MovieRecognitionActorBoundingBox"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ActorBoundingBox"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"person"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"MovieRecognitionPerson"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"characterDescription"}},{kind:"Field",name:{kind:"Name",value:"roleDetails"}},{kind:"Field",name:{kind:"Name",value:"height"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"x"}},{kind:"Field",name:{kind:"Name",value:"y"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"MovieActorsRecognition"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Recognition"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"actors"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},arguments:[{kind:"Argument",name:{kind:"Name",value:"query"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"timeMs"},value:{kind:"Variable",name:{kind:"Name",value:"timeMs"}}},{kind:"ObjectField",name:{kind:"Name",value:"prerollsDuration"},value:{kind:"Variable",name:{kind:"Name",value:"prerollsDurations"}}},{kind:"ObjectField",name:{kind:"Name",value:"videoToken"},value:{kind:"Variable",name:{kind:"Name",value:"videoToken"}}}]}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"MovieRecognitionActorBoundingBox"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}}]};const Ts=["contentId"];function Is(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}function Ps(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?Is(Object(i),!0).forEach((function(n){(0,J.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Is(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}const ws=fd((e=>{let{contentId:n}=e,i=(0,X.Z)(e,Ts);const{isActorsRecognitionEnabled:a,isMusicRecognitionEnabled:l}=_s(n),{getCurrentActorsDeepDiveData:o,deepDiveActorsData:d}=function(e){const{isActorsRecognitionEnabled:n}=_s(e),i=bs(e),a=Os(e),[l,{data:o}]=(0,Nn.t)(Cs),d=(e=>{var n,i;return"Film"===(null===e||void 0===e||null===(n=e.content)||void 0===n?void 0:n.__typename)&&"Ott_AbstractVideo"===(null===(i=e.content.ott)||void 0===i?void 0:i.__typename)&&e.content.ott.recognition?e.content.ott.recognition:null})(o),r=xd(d);return{getCurrentActorsDeepDiveData:(0,t.useCallback)((t=>{n&&i&&l({variables:{contentId:e,videoToken:i,prerollsDurations:a,timeMs:t}})}),[e,l,n,a,i]),deepDiveActorsData:r}}(n),r=(0,t.useCallback)((e=>{o(Math.round(1e3*(e||0)))}),[o]);(0,Te.O8)(r);const s=js(n);return!(0,Te.ho)()&&(a||l)?(0,w.jsx)(Id,Ps(Ps({},i),{},{deepDiveActorsData:d,deepDiveMusicData:s})):null}),Pd.Tu),xs=e=>{let{contentId:n,className:i}=e;const t=js(n);return t?(0,w.jsx)(md,{className:i,deepDiveMusicData:t}):null},Ds=e=>{let{contentId:n,className:i,isControlsVisible:a}=e;const{isMusicRecognitionEnabled:l}=_s(n),{0:o,1:d}=(0,t.useState)(null),r=ns(Xr(n)),s=(0,t.useCallback)((()=>{d(!0)}),[]);return!l||o?null:(0,w.jsx)(Ud,{className:i,onHideMusicOnboardingToast:s,isControlsVisible:a,skipableFragments:r})};var Es=i(6696),Ms=i.n(Es);const As=(0,Rn.ZP)((()=>i.e(6467).then(i.bind(i,76467)))),Rs=e=>{let{contentId:n,onClose:i=f.Z,className:a,rootContainerRef:l}=e;fs(n);const{checkIsStageCurrent:o,switchToPrerollStage:d,switchToDefaultStage:r,switchToFullSizeDeepDiveStage:s,switchToGraceCommunicationStage:m,switchToRatingScreenStage:c}=xi();return(0,w.jsx)(Di.t,{children:(0,w.jsx)(za.H,{children:(0,w.jsxs)(Ct,{children:[(0,w.jsx)(Ot,{isMovieActionsBlocked:o("fullSizeDeepDive","graceCommunication","ratingScreen"),onClose:i}),(0,w.jsx)(Pt,{className:mn()(Ms().layout,a),renderTopControls:o("default","ratingScreen","graceCommunication","preroll")?()=>(0,w.jsx)(Pi.m,{name:wi.Y.CLOSE,onClick:i,className:Ms().closeButton,contentId:n}):void 0,renderBottomControls:o("default")||o("preroll")?e=>{let{setIsHidingControlsBlocked:i}=e;return(0,w.jsx)("div",{className:Ms().controlPanelContainer,"data-tid":"component",children:(0,w.jsx)(ks,{contentId:n,setIsHidingControlsBlocked:i})})}:void 0,renderControls:e=>{let{isControlsVisible:i}=e;return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(vt,{}),(0,w.jsx)(t.Suspense,{fallback:null,children:(0,w.jsx)(As,{rootContainerRef:l})}),!o("preroll")&&(0,w.jsx)(ws,{contentId:n,onOpenActorDetails:s,onCloseActorDetails:r,className:Ms().deepDive}),(0,w.jsx)(Vi,{contentId:n,className:Ms().ratingScreen,onOpen:c,onClose:r}),o("default")&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(xs,{contentId:n,className:Ms().toast}),(0,w.jsx)(Ds,{contentId:n,className:Ms().toast,isControlsVisible:i}),(0,w.jsx)(Yd,{className:Ms().toast}),(0,w.jsx)(Uo.j,{isControlsVisible:i}),(0,w.jsx)(Va,{className:Ms().playButton}),!i&&(0,w.jsx)(rs,{contentId:n}),(0,w.jsx)(ls,{contentId:n,className:Ms().skipButtonGroup})]}),!o("preroll")&&(0,w.jsx)(B,{movieId:n,className:Ms().meta,isControlsVisible:i}),(0,w.jsx)(Ss,{contentId:n,onStart:d,onClose:r,checkStage:o,className:Ms().prerollView}),o("preroll","default","graceCommunication")&&(0,w.jsx)(ct,{className:Ms().graceCommunication,onOpen:m,onClose:r}),l&&(0,w.jsx)(Zi.X,{rootContainerRef:l})]})}})]})})})},Bs=["contentId"];function Vs(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}function Ls(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?Vs(Object(i),!0).forEach((function(n){(0,J.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Vs(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}const Us=e=>{let{contentId:n}=e,i=(0,X.Z)(e,Bs);const a=(e=>{const n=(0,Te.YO)(),i=(0,Fi.N)(as(e));return(0,t.useMemo)((()=>n?An(i,n):void 0),[n,i])})(n);return(0,w.jsx)(fi,Ls(Ls({},i),{},{contentId:n,movieId:n,contentSkippableFragments:a}))};var Ws=i(96965);var Zs=i(10669),Hs=i.n(Zs);const zs=e=>{let{onClose:n,contentId:i}=e;const a=(e=>{let{contentId:n,onClose:i}=e;const a=(0,Te.jj)(),l=(0,Ws._)(),o=U(n),d=null===o||void 0===o?void 0:o.rating;return(0,t.useCallback)((()=>{const e=null===a||void 0===a?void 0:a.currentTime,t=null===a||void 0===a?void 0:a.duration;e&&t&&0===d&&e/t>.5&&(G({contentId:n}),l.showActiveModal(b.Z.USER_VOTE)),null===i||void 0===i||i()}),[n,l,null===a||void 0===a?void 0:a.currentTime,null===a||void 0===a?void 0:a.duration,i,d])})({onClose:n,contentId:i}),{isPlayerHidden:l,isPlayerExpanded:o,isTrailerOpened:d,isCoverOpened:r,hidePlayer:s,setIsTrailerOpened:m,setIsCoverOpened:c,setIsTinderOpened:u,setIsTinderFadeOpened:k,expandPlayer:v,onCloseWatchNext:p}=kn(i,a),N=(0,t.useRef)(null),y=!d&&!r;return(0,w.jsxs)("div",{ref:N,"data-tid":"FilmPlayerView",children:[(0,w.jsx)(cn.q,{className:mn()(Hs().root,{[Hs().hidden]:l,[Hs().minimized]:r||d,[Hs().shiftedToRight]:r,[Hs().shiftedToLeft]:d}),onClick:v,children:y&&(0,w.jsx)(Rs,{contentId:i,className:Hs().skin,onClose:a,rootContainerRef:N})}),(0,w.jsx)(Us,{isPlayerExpanded:o,contentId:i,onClose:p,onTrailerOpen:m,onCoverOpen:c,ontTinderFadeOpen:k,ontTinderOpen:u,onHidePlayer:s},i)]})},qs=e=>{var n,i,t;let{uiParams:{mainUuid:a},dependencies:{apolloClient:l},callbackParams:[{vsid:o}]}=e;const d=null!==(n=null===(i=l.readQuery({query:D,variables:{contentUuid:a}}))||void 0===i||null===(t=i.movieByContentUuid)||void 0===t?void 0:t.title.localized)&&void 0!==n?n:"-";return{entityType:S.d.Preroll,uuid:"preroll",title:d,vsid:o,mainUuid:a}},Gs=e=>{let{contentId:n,psid:i}=e;const t=ds(n);fs(n);const{yandexMetrika:a}=_e()().publicRuntimeConfig;return((e,n)=>{var i,t,a;const l=ds(e),o=null===(t=(0,Ue.E)(null===l||void 0===l||null===(i=l.streamMeta)||void 0===i?void 0:i.prerolls)[0])||void 0===t?void 0:t.promotedEntityId;(0,Ke.L)({contentId:e,additionalParams:{prerollDurationSeconds:qe()},additionalData:{prerollTargetContentId:(null===o||void 0===o?void 0:o.toString())||"",metrikaKey:n.main.toString()},streamTrackingData:(0,Ye.s)(null===l||void 0===l||null===(a=l.streamMeta)||void 0===a?void 0:a.trackings)})})(n,a),(0,Fe.i)({movieId:n,contentId:n,psid:i,manifestUrl:null===t||void 0===t?void 0:t.uri}),(e=>{let{contentId:n}=e;const i=hs(n);tn({prerollDuration:i,contentId:n,eventParamsBuilder:qs})})({contentId:n}),dn(),null},Ks=["onFinish","onClose","contentId"];function Ys(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}const Js=e=>{let{onFinish:n,onClose:i,contentId:a}=e,l=(0,X.Z)(e,Ks);const o=((e,n)=>{const{rating:i}=U(e);return(0,t.useCallback)((()=>{i>0&&(null===n||void 0===n||n())}),[n,i])})(a,i),d=(0,t.useCallback)((()=>{null===n||void 0===n||n(),o()}),[o,n]);return(0,w.jsx)(Cr,function(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?Ys(Object(i),!0).forEach((function(n){(0,J.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Ys(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}({contentId:a,onFinish:d},l))},Xs=e=>{let{contentId:n,concurrencyArbiterConfig:i,playerConfig:t,psid:a,onError:l,onSourceChanged:o,onContentImpression:d,onFinish:r,onClose:s,onWatchedTimeChanged:m}=e;const c=(0,xr.J)();return(0,w.jsx)(vr.J,{config:t,type:"film",children:(0,w.jsxs)(ge.F,{children:[(0,w.jsx)(Js,{contentId:n,tvSeriesId:n,timingsInterval:(0,ye.O)(),onContentImpression:d,onFinish:r,onError:l,onClose:s,onSourceChanged:o,onWatchedTimeChanged:m}),(0,w.jsx)(Gs,{contentId:n,psid:a}),c?(0,w.jsx)(kr.h,{onClose:s}):(0,w.jsx)(zs,{contentId:n,onClose:s}),i&&(0,w.jsx)(ur,{config:i})]})})};var $s=i(57098);const Qs=(0,Gr.f)({startMarks:[ee.c.FILM_FIRST_IMPRESSION],endMarks:$s.a})((e=>{let{contentId:n,onClose:i,onInitStart:a,onSourceChange:l,onStart:o}=e;const{handleClose:d,handleWatchedTimeChange:r}=(e=>{let{onClose:n}=e;return{handleWatchedTimeChange:(0,Ar.P)(),handleClose:(0,t.useCallback)((()=>{xe(),null===n||void 0===n||n(),Vr(),Hr(),(0,zr.R)()}),[n])}})({onClose:i}),s=(e=>{const n=Xr(e);return(0,ie.h)({contentId:e,preferredTracks:es(n),onlineStreams:Qr(n),startPosition:is(n),telemetry:{from_block:ne.wi.Film,stream_block:ne.uH.Film}})})(null!==n&&void 0!==n?n:"");(0,qr.c)((e=>{var n;const i=ts(e);return null===i||void 0===i||null===(n=i.onlineStreams)||void 0===n?void 0:n.streams})(n));const m=(e=>{var n;const i=Xr(e),t=i&&$r(i),a=null===t||void 0===t||null===(n=t.onlineStreams)||void 0===n?void 0:n.concurrencyArbiterConfig;return a?Er(a):void 0})(null!==n&&void 0!==n?n:"");return(e=>e.source.streams.length>0)(s)?(0,w.jsx)(ne.J5,{onStart:o,onClose:d,contentId:n,playerConfig:s,onBeforeInit:a,renderPlayer:e=>{let{contentId:n,onStartCallback:i,handleError:t,handleFinish:a,psid:o,onClose:d}=e;return(0,w.jsx)(Xs,{contentId:n,playerConfig:s,concurrencyArbiterConfig:m,onContentImpression:i,onFinish:a,onError:t,onClose:d,onSourceChanged:l,psid:o,onWatchedTimeChanged:r})}}):null}));var em=i(81529);const nm=e=>{var n;if("Catchup"===(null===e||void 0===e?void 0:e.__typename))return null!==(n=e.onlineStreams)&&void 0!==n?n:void 0},im={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"CatchupPlayerBaseInfo"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"contentId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"content"},arguments:[{kind:"Argument",name:{kind:"Name",value:"contentId"},value:{kind:"Variable",name:{kind:"Name",value:"contentId"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Catchup"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"CatchupPlayerBaseInfo"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"CatchupTvChannel"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Catchup"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"tvChannel"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"contentId"}},{kind:"Field",name:{kind:"Name",value:"ageRestriction"}},{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"Field",name:{kind:"Name",value:"gallery"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"logos"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"main"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"avatarsUrl"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"MovieStreamAudioMeta"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AudioMeta"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"audioChannelsNumber"}},{kind:"Field",name:{kind:"Name",value:"audioGroupId"}},{kind:"Field",name:{kind:"Name",value:"forAdult"}},{kind:"Field",name:{kind:"Name",value:"language"}},{kind:"Field",name:{kind:"Name",value:"languageName"}},{kind:"Field",name:{kind:"Name",value:"quality"}},{kind:"Field",name:{kind:"Name",value:"studioName"}},{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"Field",name:{kind:"Name",value:"visibleByDefault"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"MovieStreamDrmConfig"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"DrmConfig"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"drmServers"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"certificateUrl"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"processSPCPath"}},{kind:"Field",name:{kind:"Name",value:"provisioningUrl"}},{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"headers"}},{kind:"Field",name:{kind:"Name",value:"requestParams"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"MovieStreamSubtitleMeta"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"SubtitleMeta"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"forAdult"}},{kind:"Field",name:{kind:"Name",value:"languageName"}},{kind:"Field",name:{kind:"Name",value:"studio"}},{kind:"Field",name:{kind:"Name",value:"type"}},{kind:"Field",name:{kind:"Name",value:"language"}},{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"visibleByDefault"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"MovieStreamTile"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Tile"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"spriteDuration"}},{kind:"Field",name:{kind:"Name",value:"tileDuration"}},{kind:"Field",name:{kind:"Name",value:"uriTemplate"}},{kind:"Field",name:{kind:"Name",value:"tilePixelResolution"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"height"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"spriteMatrixSize"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"columns"}},{kind:"Field",name:{kind:"Name",value:"rows"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"spritePixelResolution"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"height"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"MovieStreamTiles"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"TilesContainer"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"highResolutionTiles"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"MovieStreamTile"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"lowResolutionTiles"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"MovieStreamTile"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"offset"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"MovieStreamPrerolls"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PrerollMeta"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"durationMs"}},{kind:"Field",name:{kind:"Name",value:"promotedEntityId"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"MovieStreamSkippableFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"SkippableFragment"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"startTime"}},{kind:"Field",name:{kind:"Name",value:"endTime"}},{kind:"Field",name:{kind:"Name",value:"final"}},{kind:"Field",name:{kind:"Name",value:"type"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"MovieStreamMeta"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"StreamMeta"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"audioMetas"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"MovieStreamAudioMeta"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"drmConfig"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"MovieStreamDrmConfig"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"subtitleMetas"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"MovieStreamSubtitleMeta"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"tilesContainer"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"MovieStreamTiles"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"trackings"}},{kind:"Field",name:{kind:"Name",value:"videoMetas"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"bitrate"}},{kind:"Field",name:{kind:"Name",value:"height"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"prerollsDuration"}},{kind:"Field",name:{kind:"Name",value:"prerolls"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"MovieStreamPrerolls"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"skippableFragments"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"MovieStreamSkippableFragment"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"videoToken"}},{kind:"Field",name:{kind:"Name",value:"cuesUrl"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"MovieStream"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Stream"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"streamMeta"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"MovieStreamMeta"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"MovieOnlineStreams"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"OnlineStreams"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"licenseStatus"}},{kind:"Field",name:{kind:"Name",value:"drmRequirement"}},{kind:"Field",name:{kind:"Name",value:"streams"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"MovieStream"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"sessionId"}},{kind:"Field",name:{kind:"Name",value:"concurrencyArbiterConfig"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"concurrencyArbiterRequestParams"}},{kind:"Field",name:{kind:"Name",value:"server"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"playerRestrictionConfig"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"subtitlesButtonEnable"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"monetizationModel"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"CatchupStreams"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Catchup"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"onlineStreams"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"MovieOnlineStreams"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"CatchupMeta"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Catchup"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"catchupTitle"},name:{kind:"Name",value:"title"}},{kind:"Field",name:{kind:"Name",value:"duration"}},{kind:"Field",name:{kind:"Name",value:"hasSmokingScenes"}},{kind:"Field",name:{kind:"Name",value:"ageRestriction"}},{kind:"Field",name:{kind:"Name",value:"viewOption"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"watchabilityExpirationTime"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"CatchupPlayerBaseInfo"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Catchup"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"catchupContentId"},name:{kind:"Name",value:"contentId"}},{kind:"FragmentSpread",name:{kind:"Name",value:"CatchupTvChannel"}},{kind:"FragmentSpread",name:{kind:"Name",value:"CatchupStreams"}},{kind:"FragmentSpread",name:{kind:"Name",value:"CatchupMeta"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}}]},tm=e=>{const{data:n}=(0,j.a)(im,{variables:{contentId:e},fetchPolicy:"cache-only",errorPolicy:"all"}),i=null===n||void 0===n?void 0:n.content;if(i&&"Catchup"===i.__typename)return i};var am=i(63485);const lm=e=>{let{onContentImpression:n,onFinish:i,onError:t,onWatchedTimeChanged:a,onClose:l}=e;return(0,Te.ae)(n),(0,jr.h)(t),(0,Te.Cj)(i),(0,Te.PW)(a),(0,Te.Bk)(Nr.o),(0,Or.Y)(),(0,Te.VL)(!1),(0,Ft.I)(),(0,Te.ae)((()=>{(0,am.FB)()})),(0,Te.Cj)(l),null},om=e=>{var n;const i=tm(e);return(0,Ze.J)(null===i||void 0===i||null===(n=i.onlineStreams)||void 0===n?void 0:n.streams)},dm=e=>{var n;let{contentId:i,psid:t}=e;const a=om(i);return(0,Ke.L)({contentId:i,streamTrackingData:(0,Ye.s)(null===a||void 0===a||null===(n=a.streamMeta)||void 0===n?void 0:n.trackings)}),(0,Fe.i)({movieId:i,contentId:i,psid:t,manifestUrl:null===a||void 0===a?void 0:a.uri}),dn(),null};var rm=i(66081),sm=i(79718),mm=i(26282),cm=i(53774),um=i.n(cm);const km=r().bind(um()),vm={"2x":mm.WQ.CHANNEL_PROMO_LOGO_2X,fallback:mm.WQ.CHANNEL_PROMO_LOGO},pm=e=>{let{channelLogoUrl:n,channelName:i,title:t,ageRestriction:a}=e;return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)("div",{className:km("channel"),"data-tid":"CatchupMeta",children:[n&&(0,w.jsx)(rm.b,{className:km("channel-icon"),originalUrl:n,adaptiveSizes:vm}),i&&(0,w.jsx)(sm.xv,{className:km("channel-name"),theme:ti.Q2.Dark,weight:sm.fs.Bold,size:sm.yH.Title,children:i})]}),t&&(0,w.jsx)(sm.xv,{className:km("title",{title_long:t.length>60}),weight:sm.fs.Bold,size:sm.yH.Superhead,theme:ti.Q2.Dark,children:t}),(0,w.jsx)("div",{className:km("bottomControls"),"data-tid":"CatchupMeta",children:(0,w.jsx)("div",{className:km("meta"),children:(0,w.jsx)(sm.xv,{className:km("description"),theme:ti.Q2.Dark,weight:sm.fs.Medium,size:sm.yH.Subtitle,children:[(0,wt.l)().formatMessage({id:"features.catchup-player.1451d6f20c7ccb702db99c0dd8a423d7"}),a].filter(Boolean).join("  \xb7  ")})})})]})},Nm=e=>{var n,i,t,a,l,o,d,r,s,m;let{contentId:c}=e;const u=tm(c);return{channelContentId:null!==(n=null===u||void 0===u||null===(i=u.tvChannel)||void 0===i?void 0:i.contentId)&&void 0!==n?n:void 0,channelLogoUrl:(0,E.W)(null===u||void 0===u||null===(t=u.tvChannel)||void 0===t||null===(a=t.gallery)||void 0===a||null===(l=a.logos)||void 0===l?void 0:l.main),channelName:null!==(o=null===u||void 0===u||null===(d=u.tvChannel)||void 0===d?void 0:d.title)&&void 0!==o?o:void 0,title:null!==(r=null===u||void 0===u?void 0:u.catchupTitle)&&void 0!==r?r:void 0,watchabilityExpirationTime:null!==u&&void 0!==u&&null!==(s=u.viewOption)&&void 0!==s&&s.watchabilityExpirationTime?Date.parse(u.viewOption.watchabilityExpirationTime):void 0,ageRestriction:(0,Wa.oW)(null!==(m=null===u||void 0===u?void 0:u.ageRestriction)&&void 0!==m?m:null)}},ym=e=>{let{contentId:n}=e;const{title:i,channelLogoUrl:t,channelName:a,ageRestriction:l}=Nm({contentId:n});return(0,w.jsx)(pm,{channelLogoUrl:t,title:i,channelName:a,ageRestriction:l})};var Sm=i(1618),fm=i(49093),gm=i(67270);const bm=e=>{let{contentId:n,onClose:i,className:a}=e;const l=tm(n),o=(0,Te.Z3)(),d=(0,t.useMemo)((()=>{var e;return null!==l&&void 0!==l&&null!==(e=l.tvChannel)&&void 0!==e&&e.contentId?(0,gm.x)({query:{openedChannelId:l.tvChannel.contentId}}):""}),[l]);return(0,w.jsx)(fm.r,{to:d,onClick:i,children:(0,w.jsx)(Sm.n,{className:a,isOnAir:!1,onClick:i,isStarted:o})})};var _m=i(75607),Fm=i(53810),hm=i(42601),Om=i(36518),jm=i(85914),Cm=i(83713),Tm=i(56888),Im=i(79154),Pm=i(38177),wm=i(91678);function xm(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}function Dm(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?xm(Object(i),!0).forEach((function(n){(0,J.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):xm(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}const Em=e=>{let{className:n,onSeek:i,currentProgram:{startTime:a,endTime:l}}=e;const o=a.getTime()/1e3,d=l.getTime()/1e3,r=(0,Te.YY)(),s=(0,t.useMemo)((()=>new jm.q(r)),[r]),{dvrEndTime:m}=(0,Te.yl)(),c=(0,t.useMemo)((()=>new Cm.n(null!==m&&void 0!==m?m:d-o)),[m,d,o]),u=(0,t.useMemo)((()=>new Cm.n(d-o)),[d,o]),k=(0,t.useMemo)((()=>(0,Tm.x)(s,u)),[s,u]);return(0,w.jsx)(go.T,{className:n,renderBufferedRangesBar:()=>null,renderActiveBar:e=>(0,w.jsx)(Im.N,Dm(Dm({},e),{},{currentTime:s,duration:c,onSeek:i})),renderProgressBar:e=>(0,w.jsx)(Pm.R,Dm(Dm({},e),{},{currentTime:s,duration:c,onSeek:i})),renderRemainingTime:e=>(0,w.jsx)(wm.h,Dm(Dm({},e),{},{formattedTime:k,remainingSeconds:d-s.streamTime}))})},Mm=e=>{let{className:n,catchupContentId:i,channelContentId:t}=e;const a=(0,Te.jj)(),{seekToTime:l}=(0,Te.uX)(),o=((e,n)=>null===e||void 0===e?void 0:e.find((e=>e.catchupContentId===n)))((0,Om.Q)(t||""),i);if(!a)return null;const{videoType:d}=a;return d===Te.ZS.vod?(0,w.jsx)(go.T,{className:n}):d&&d!==Te.ZS.event&&o?(0,w.jsx)(Em,{className:n,onSeek:l,currentProgram:o}):null};var Am=i(38958),Rm=i.n(Am);const Bm=e=>{let{contentId:n,className:i,setIsHidingControlsBlocked:a,onClose:l}=e;const{0:o,1:d}=(0,t.useState)(!1),r=(0,wl.j)(),s=(0,t.useCallback)((e=>{a(e),r(e)}),[a,r]),{channelContentId:m}=Nm({contentId:n}),{isCatchupFromTvProgram:c}=(0,_m.C)({channelContentId:m}),{0:u,1:k}=(0,t.useState)(!0);return(0,w.jsxs)("div",{className:Rm().root,"data-tid":"CatchupPlayerControlPanel",children:[(0,w.jsx)("div",{className:Rm().meta,children:(0,w.jsx)(ym,{contentId:n})}),(0,w.jsxs)("div",{className:mn()(Rm().rootPanel,i),children:[(0,w.jsx)(Mm,{className:mn()(Rm().timeline,{[Rm().hidden]:!u}),catchupContentId:n,channelContentId:m}),(0,w.jsx)("div",{className:Rm().controls,children:(0,w.jsxs)(Po.x,{onPopupToggle:s,children:[(0,w.jsxs)("div",{className:Rm().leftControls,children:[(0,w.jsx)(To,{name:wi.Y.PLAY,contentId:n}),(0,w.jsx)(Fo,{name:wi.Y.BACKWARD,type:"backward",contentId:n}),(0,w.jsx)(Fo,{name:wi.Y.FORWARD,type:"forward",contentId:n}),(0,w.jsx)(bm,{contentId:n,onClose:l,className:Rm().control}),(0,w.jsx)(Oo.y,{onEnlargementChanged:e=>k(!e),className:Rm().control})]}),(0,w.jsxs)("div",{className:Rm().rightControls,children:[(0,w.jsx)(cs,{contentId:n,name:wi.Y.AUDIO_SUBS_LIST,onSubtitleSizeSettingsClick:()=>d(!0)}),c&&m&&(0,w.jsx)(Fm.f,{psid:(0,hm.Q)(),className:Rm().control,name:wi.Y.ADJUSTMENT,contentId:m}),(0,w.jsx)(qa.x,{name:wi.Y.ADJUSTMENT,contentId:n,contentType:ri.Z.FILM,isSubtitleSizeSettingsForceOpened:o,setIsSubtitleSizeSettingsForceOpened:d}),(0,w.jsx)(ho.P,{name:wi.Y.FULLSCREEN,contentId:n})]})]})})]})]})},Vm=e=>{let{contentId:n}=e;const i=tm(n),t=om(n),a=null===i||void 0===i?void 0:i.ageRestriction,l=null===i||void 0===i?void 0:i.hasSmokingScenes,{videoHeight:o,videoWidth:d}=(0,La.C)(t),r=Za("catchup");return(0,w.jsx)(Ua.J,{age:a?(0,Wa.oW)(a):void 0,videoHeight:o,videoWidth:d,smokingWarningText:l?r:void 0})};function Lm(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}const Um=e=>{const{toggleFullscreen:n}=(0,_t.O)(),{togglePlay:i}=mt();return(0,w.jsx)(Tt.y,function(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?Lm(Object(i),!0).forEach((function(n){(0,J.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Lm(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}({onClick:i,onDoubleClick:n},e))};var Wm=i(34235);const Zm=e=>{let{contentId:n}=e;const{channelName:i,channelLogoUrl:a,channelContentId:l}=Nm({contentId:n}),o=(0,t.useCallback)((e=>(0,w.jsx)(fm.r,{to:l?(0,gm.x)({query:{openedChannelId:l}}):"",children:e})),[l]);return(0,w.jsx)(Wm.E,{channelLogoUrl:null!==a&&void 0!==a?a:"",channelTitle:null!==i&&void 0!==i?i:"",message:(0,w.jsx)(Yi.Z,{id:"features.catchup-player.b155245d0d9923a7a062c6e6e5344eb4"}),backToLiveButton:o})};var Hm=i(2812),zm=i.n(Hm);const qm=e=>{let{contentId:n,onClose:i,className:a,rootContainerRef:l}=e;const{catchupExpired:o}=(e=>{let{contentId:n}=e;const{watchabilityExpirationTime:i}=Nm({contentId:n}),{0:a,1:l}=(0,t.useState)(!1),o=(0,Te.jj)();(0,t.useEffect)((()=>{a&&(null===o||void 0===o||o.pause())}),[a,o]);const d=(0,t.useCallback)((()=>{i&&Date.now()>i&&l(!0)}),[i]),r=(0,t.useCallback)((e=>{e===Te.de.play&&d()}),[d]),s=(0,t.useCallback)((()=>{d()}),[d]);return(0,Te.$N)(r),(0,Te.Bk)(s),{catchupExpired:a}})({contentId:n});return(0,w.jsx)(Di.t,{children:(0,w.jsx)(za.H,{children:(0,w.jsxs)(Ct,{children:[(0,w.jsx)(Ot,{onClose:i}),(0,w.jsx)(Um,{className:mn()(zm().layout,a),renderTopControls:()=>(0,w.jsx)(Pi.m,{name:wi.Y.CLOSE,onClick:i,className:zm().closeButton,contentId:n}),renderBottomControls:o?void 0:e=>{let{setIsHidingControlsBlocked:t}=e;return(0,w.jsx)("div",{className:zm().bottomControls,"data-tid":"component",children:(0,w.jsx)(Bm,{onClose:i,contentId:n,setIsHidingControlsBlocked:t})})},renderControls:o?()=>(0,w.jsx)(Zm,{contentId:n}):e=>{let{isControlsVisible:i}=e;return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(vt,{}),!i&&(0,w.jsx)(Vm,{contentId:n}),(0,w.jsx)(Va,{className:zm().playButton}),(0,w.jsx)(Uo.j,{isControlsVisible:i}),l&&(0,w.jsx)(Zi.X,{rootContainerRef:l})]})}})]})})})};var Gm=i(84469),Km=i.n(Gm);const Ym=e=>{let{onClose:n=f.Z,contentId:i}=e;const a=(0,t.useRef)(null);return(0,w.jsx)("div",{ref:a,"data-tid":"CatchupPlayerView",children:(0,w.jsx)(cn.q,{className:Km().root,children:(0,w.jsx)(qm,{contentId:i,className:Km().skin,onClose:n,rootContainerRef:a})})})},Jm=e=>{let{contentId:n,playerConfig:i,onError:t,onContentImpression:a,onFinish:l,onClose:o=f.Z,onWatchedTimeChanged:d,psid:r}=e;return(0,w.jsx)(vr.J,{config:i,type:"film",children:(0,w.jsxs)(ge.F,{children:[(0,w.jsx)(lm,{onContentImpression:a,onFinish:l,onError:t,onWatchedTimeChanged:d,onClose:o}),(0,w.jsx)(dm,{contentId:n,psid:r}),(0,w.jsx)(Ym,{contentId:n,onClose:o})]})})},Xm=e=>{let{onClose:n}=e;const i=(0,Ar.P)();return{handleClose:(0,t.useCallback)((()=>{null===n||void 0===n||n(),(0,_m.T)(null),Vr(),Hr(),(0,zr.R)()}),[n]),handleWatchedTimeChange:i}};var $m=i(97570);const Qm=(0,Gr.f)({startMarks:[ee.c.CATCHUP_FIRST_IMPRESSION],endMarks:[ee.c.CATCHUP_FIRST_IMPRESSION,ee.c.CATCHUP_START_DELAY]})((e=>{let{contentId:n,onClose:i,onInitStart:t,onStart:a}=e;const l=(e=>{let{contentId:n}=e;const i=(0,em.K)(),t=tm(n);return(0,ie.h)({contentId:n,preferredTracks:i,onlineStreams:t&&nm(t),telemetry:{from_block:ne.wi.Catchup,stream_block:ne.uH.Catchup},startPosition:(0,am.mB)()})})({contentId:n}),{handleClose:o,handleWatchedTimeChange:d}=Xm({contentId:n,onClose:i});return(0,qr.c)((e=>{var n;const i=tm(e);return null===i||void 0===i||null===(n=i.onlineStreams)||void 0===n?void 0:n.streams})(n)),(0,w.jsx)($m.E,{children:()=>(0,w.jsx)(ne.J5,{contentId:n,playerConfig:l,onBeforeInit:t,onClose:o,onStart:a,renderPlayer:e=>{let{contentId:n,onStartCallback:i,handleError:t,handleFinish:a,psid:o,onClose:r}=e;return(0,w.jsx)(Jm,{contentId:n,playerConfig:l,onContentImpression:i,onFinish:a,onError:t,onClose:r,psid:o,onWatchedTimeChanged:d})}})})}));var ec=i(3044),nc=i(8859);const ic=(0,Gr.f)({startMarks:[ee.c.CHANNEL_FIRST_IMPRESSION],endMarks:[ee.c.CHANNEL_FIRST_IMPRESSION,ee.c.CHANNEL_START_DELAY]})(nc.z);var tc=i(35451),ac=i(34e3);function lc(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}function oc(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?lc(Object(i),!0).forEach((function(n){(0,J.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):lc(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}const dc=e=>{let{onContentImpression:n,onFinish:i,onError:t}=e;return(0,Te.ae)(n),(0,jr.h)(t),(0,Te.Cj)(i),(0,pr.q)(),(0,Te.Bk)(Nr.o),(0,Or.Y)(),(0,Te.VL)(!1),(0,Ft.I)(),null},rc={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"MovieTrailerPlayerBaseInfo"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"contentId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"ottTrailer"},arguments:[{kind:"Argument",name:{kind:"Name",value:"contentId"},value:{kind:"Variable",name:{kind:"Name",value:"contentId"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"ageRestriction"}},{kind:"FragmentSpread",name:{kind:"Name",value:"TrailerPlayerBaseInfo"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"MovieStreamAudioMeta"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AudioMeta"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"audioChannelsNumber"}},{kind:"Field",name:{kind:"Name",value:"audioGroupId"}},{kind:"Field",name:{kind:"Name",value:"forAdult"}},{kind:"Field",name:{kind:"Name",value:"language"}},{kind:"Field",name:{kind:"Name",value:"languageName"}},{kind:"Field",name:{kind:"Name",value:"quality"}},{kind:"Field",name:{kind:"Name",value:"studioName"}},{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"Field",name:{kind:"Name",value:"visibleByDefault"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"MovieStreamSubtitleMeta"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"SubtitleMeta"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"forAdult"}},{kind:"Field",name:{kind:"Name",value:"languageName"}},{kind:"Field",name:{kind:"Name",value:"studio"}},{kind:"Field",name:{kind:"Name",value:"type"}},{kind:"Field",name:{kind:"Name",value:"language"}},{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"visibleByDefault"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"TrailerStream"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Stream"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"streamMeta"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"audioMetas"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"MovieStreamAudioMeta"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"subtitleMetas"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"MovieStreamSubtitleMeta"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"videoMetas"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"height"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"trackings"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"TrailerPlayerBaseInfo"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"OttTrailer"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"contentGroupUuid"}},{kind:"Field",name:{kind:"Name",value:"ageRestriction"}},{kind:"Field",name:{kind:"Name",value:"streams"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"TrailerStream"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}}]};function sc(e){const n=function(e){return(0,te.a)(rc,{contentId:e})}(e);return n?function(e){var n;if("OttTrailer"===(null===e||void 0===e||null===(n=e.ottTrailer)||void 0===n?void 0:n.__typename))return e.ottTrailer}(n):void 0}const mc=e=>{var n;let{contentId:i,psid:t}=e;const a=(e=>{const n=sc(e);return(0,Ze.J)(null===n||void 0===n?void 0:n.streams)})(i);return(0,Ke.L)({contentId:i,streamTrackingData:(0,Ye.s)(null===a||void 0===a||null===(n=a.streamMeta)||void 0===n?void 0:n.trackings)}),(0,Fe.i)({movieId:i,contentId:i,psid:t,manifestUrl:null===a||void 0===a?void 0:a.uri}),dn(),null},cc=e=>{var n,i,t,a,l,o;let{contentId:d}=e;const r=(0,te.a)(rc,{contentId:d}),s=null===r||void 0===r||null===(n=r.ottTrailer)||void 0===n?void 0:n.ageRestriction,m=null===r||void 0===r||null===(i=r.ottTrailer)||void 0===i||null===(t=i.streams)||void 0===t||null===(a=t[0])||void 0===a||null===(l=a.streamMeta)||void 0===l||null===(o=l.videoMetas)||void 0===o?void 0:o[0];return(0,w.jsx)(Ua.J,{age:s?(0,Wa.oW)(s):void 0,videoHeight:(null===m||void 0===m?void 0:m.height)||void 0,videoWidth:(null===m||void 0===m?void 0:m.width)||void 0})},uc=e=>{var n;const{data:i}=(0,j.a)(rc,{variables:{contentId:e},fetchPolicy:"cache-only",errorPolicy:"all",skip:!e});return(0,Ze.J)(null===i||void 0===i||null===(n=i.ottTrailer)||void 0===n?void 0:n.streams)},kc=e=>{let{contentId:n,onSubtitleSizeSettingsClick:i}=e;const t=(e=>{var n;const i=uc(e),t=(0,Ue.E)(null===i||void 0===i||null===(n=i.streamMeta)||void 0===n?void 0:n.audioMetas);return(0,ro.q)(t)})(n),a=(e=>{var n;const i=uc(e),t=(0,Ue.E)(null===i||void 0===i||null===(n=i.streamMeta)||void 0===n?void 0:n.subtitleMetas);return(0,oo.G)(t)})(n),l=(0,Te.Kg)(((e,n)=>{n&&e&&e.setAudioTrack(n)}),[]),o=(0,Te.Kg)(((e,n)=>{n&&e&&e.setTextTrack(n)}),[]);return(0,w.jsx)(Jl.Z,{name:wi.Y.AUDIO_SUBS_LIST,audioTracks:t,subtitles:a,onSelectAudioTrack:l,onSelectTextTrack:o,onSubtitleSizeSettingsClick:i,contentId:n})},vc=e=>{let{contentId:n,onSubtitleSizeSettingsClick:i}=e;return n?(0,w.jsx)(kc,{contentId:n,onSubtitleSizeSettingsClick:i}):null};var pc=e=>{let{contentId:n,setIsHidingControlsBlocked:i,className:a}=e;const{0:l,1:o}=(0,t.useState)(!1),d=(0,wl.j)(),r=(0,t.useCallback)((e=>{i(e),d(e)}),[i,d]);return(0,w.jsx)(Mo,{contentId:n,onPopupToggle:r,className:a,renderRightControls:()=>(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(vc,{onSubtitleSizeSettingsClick:()=>o(!0),contentId:n}),(0,w.jsx)(qa.x,{name:wi.Y.ADJUSTMENT,contentId:n,contentType:ri.Z.TRAILER,isSubtitleSizeSettingsForceOpened:l,setIsSubtitleSizeSettingsForceOpened:o}),(0,w.jsx)(Pl,{name:wi.Y.STREAMING,contentId:n})]})})},Nc=i(72136),yc=i.n(Nc);const Sc=e=>{let{contentId:n,onClose:i,className:t}=e;const a=(0,Te.XO)();return a?(0,w.jsx)(Di.t,{children:(0,w.jsx)(za.H,{children:(0,w.jsxs)(Ct,{children:[(0,w.jsx)(Ot,{onClose:i}),(0,w.jsx)(Pt,{className:t,renderTopControls:()=>(0,w.jsx)(Pi.m,{name:wi.Y.CLOSE,onClick:i,className:yc().closeButton,contentId:n}),renderBottomControls:e=>{let{setIsHidingControlsBlocked:i}=e;return(0,w.jsx)("div",{className:yc().controlPanelContainer,"data-tid":"component",children:(0,w.jsx)(pc,{setIsHidingControlsBlocked:i,contentId:n})})},renderControls:e=>{let{isControlsVisible:i}=e;return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(vt,{}),(0,w.jsx)(Va,{className:yc().playButton}),(0,w.jsx)(Uo.j,{isControlsVisible:i}),!i&&(0,w.jsx)(cc,{contentId:n}),a&&(0,w.jsx)(Zi.X,{rootContainerRef:a})]})}})]})})}):null};var fc=i(73447),gc=i.n(fc);const bc=e=>{let{contentId:n,playerConfig:i,psid:t,onError:a,onContentImpression:l,onFinish:o,onClose:d=f.Z}=e;return(0,w.jsx)(vr.J,{config:i,type:"trailer",children:(0,w.jsxs)(ge.F,{children:[(0,w.jsx)(dc,{onContentImpression:l,onFinish:o,onError:a}),(0,w.jsx)(mc,{contentId:n,psid:t}),(0,w.jsx)(cn.q,{className:gc().root,children:(0,w.jsx)(Sc,{contentId:n,className:gc().skin,onClose:d})})]})})},_c={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"ChildLockPlayerKidSubProfile"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"UserKidSubProfile"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"ottId"}},{kind:"Field",name:{kind:"Name",value:"puid"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"restrictions"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"parentalControlVideo"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"streamUrl"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"parentalControlEnabled"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}}]};function Fc(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}function hc(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?Fc(Object(i),!0).forEach((function(n){(0,J.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Fc(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}const Oc=e=>{const{kidSubProfileOttId:n,kidSubProfilePuid:i}=(0,Xl.j)(),t=(e=>{var n,i;const t=(0,em.K)(),a=(0,ac.x)(),l=(e=>{var n;return"UserKidSubProfile"===(null===e||void 0===e?void 0:e.__typename)?null===(n=e.restrictions)||void 0===n?void 0:n.parentalControlVideo:null})(e),o=null!==(n=null===l||void 0===l?void 0:l.streamUrl)&&void 0!==n?n:"",d={source:{id:null!==(i=null===l||void 0===l?void 0:l.id)&&void 0!==i?i:"",streams:[{url:o}],additionalParams:oc(oc({},a),{},{from_block:ne.wi.ChildLock,stream_block:ne.uH.ChildLock}),userPreferences:{preferredTracks:t}}};return(0,tc.m)({config:d})})((0,he.r)({id:(0,Oe.eW)({puid:i||null,ottId:n||null}),fragment:_c,fragmentName:"ChildLockPlayerKidSubProfile"})),a=n?n.toString():void 0;return a?(0,w.jsx)(ne.J5,hc(hc({},e),{},{contentId:a,playerConfig:t,renderPlayer:e=>{let{contentId:n,onStartCallback:i,handleError:a,handleFinish:l,psid:o,onClose:d}=e;return(0,w.jsx)(bc,{contentId:n,playerConfig:t,onContentImpression:i,onFinish:l,onError:a,onClose:d,psid:o})}})):null};var jc=i(19569),Cc=i.n(jc);const Tc=["contentId","isLoading","contentType","isParentalControlEnabled"];function Ic(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}function Pc(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?Ic(Object(i),!0).forEach((function(n){(0,J.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Ic(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}const wc=e=>{let{contentId:n,isLoading:i,contentType:t,isParentalControlEnabled:a}=e,l=(0,X.Z)(e,Tc);return a?(0,w.jsx)(Oc,Pc({},l)):i||!t?(0,w.jsx)("div",{className:Cc().loader,"data-tid":"PlayerManager",children:(0,w.jsx)(cl.$,{size:nl.E.BIG})}):(0,w.jsxs)(w.Fragment,{children:[("Film"===t||"Video"===t)&&(0,w.jsx)(Qs,Pc({contentId:n},l)),"Episode"===t&&(0,w.jsx)(Yr,Pc({contentId:n},l)),"Catchup"===t&&(0,w.jsx)(Qm,Pc({contentId:n},l)),"TvChannel"===t&&(0,w.jsx)(ic,Pc({channelId:n,telemetryContentPlace:ec.wi.Channel},l))]})};var xc=i(24269),Dc=i(61404);const Ec=["WatchingRejectionError","DeviceNotFoundError","AgeRestrictionError"];var Mc=i(583),Ac=i(79993);const Rc={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"NextEpisode"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"contentUuid"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"movieByContentUuid"},arguments:[{kind:"Argument",name:{kind:"Name",value:"contentUuid"},value:{kind:"Variable",name:{kind:"Name",value:"contentUuid"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"contentId"}},{kind:"FragmentSpread",name:{kind:"Name",value:"OttNextEpisode"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"EpisodeBase"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Episode"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"contentId"}},{kind:"Field",name:{kind:"Name",value:"number"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"Title"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Title"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"localized"}},{kind:"Field",name:{kind:"Name",value:"original"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"SeasonBase"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Season"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"contentId"}},{kind:"Field",name:{kind:"Name",value:"number"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"OttEpisodeTiming"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Episode"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"ott"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"timing"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"current"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"NextEpisode"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Episode"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"EpisodeBase"}},{kind:"Field",name:{kind:"Name",value:"title"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"Title"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"cover"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"avatarsUrl"}},{kind:"Field",name:{kind:"Name",value:"fallbackUrl"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"ott"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"duration"}},{kind:"Field",name:{kind:"Name",value:"viewOption"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"availabilityEndDate"}},{kind:"Field",name:{kind:"Name",value:"availabilityStatus"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"season"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"SeasonBase"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"OttEpisodeTiming"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"OttNextEpisode"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Movie"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"contentId"}},{kind:"Field",name:{kind:"Name",value:"ott"},selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Ott_AbstractSeries"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nextEpisode"},arguments:[{kind:"Argument",name:{kind:"Name",value:"fallbackToFirstEpisode"},value:{kind:"BooleanValue",value:!0}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"contentId"}},{kind:"Field",name:{kind:"Name",value:"fallback"}},{kind:"Field",name:{kind:"Name",value:"episode"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"offsetInSeason"},arguments:[{kind:"Argument",name:{kind:"Name",value:"filter"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"onlyOnline"},value:{kind:"BooleanValue",value:!0}}]}}]},{kind:"FragmentSpread",name:{kind:"Name",value:"NextEpisode"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}}]};const Bc={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"MovieTiming"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"contentUuid"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"movieByContentUuid"},arguments:[{kind:"Argument",name:{kind:"Name",value:"contentUuid"},value:{kind:"Variable",name:{kind:"Name",value:"contentUuid"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"contentId"}},{kind:"FragmentSpread",name:{kind:"Name",value:"OttMovieTiming"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"OttMovieTiming"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Movie"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"ott"},selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Ott_AbstractVideo"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"preview"},selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"OttPreview_AbstractVideo"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"timing"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"current"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}}]};function Vc(e,n){const i=(0,pn.x)(),a=(0,Ac.w)(),l=Oi(e)||e;return(0,t.useCallback)((async()=>{if("Film"===n)return i.query({query:Bc,variables:{contentUuid:l},fetchPolicy:"network-only"});if("Episode"===n)try{await function(e,n){return e.query({query:Rc,variables:{contentUuid:n},fetchPolicy:"network-only"})}(i,l)}catch(e){a.error({error:e,contentUuid:l},"Fetch next episode error")}}),[i,l,n,a])}var Lc=i(66255);const Uc=e=>{var n;return"UserKidSubProfile"===(null===e||void 0===e||null===(n=e.userProfile)||void 0===n?void 0:n.__typename)&&e.userProfile.restrictions.parentalControlEnabled},Wc=["contentId","onClose"];function Zc(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}function Hc(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?Zc(Object(i),!0).forEach((function(n){(0,J.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Zc(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}const zc=e=>{var n;let{contentId:i,onClose:a}=e,l=(0,X.Z)(e,Wc);const o=(0,Mc.t)()||i,{isDynamicPrerollEnabled:d}=(0,Q.E)(),r=(()=>{const e=(0,xc.GJ)();return(0,t.useCallback)((n=>{n.networkError&&(e(Dc.G5.NETWORK_ERROR,{}),zn.H({message:"Network error getting streams"},n)),n.graphQLErrors.forEach((n=>{var i,t,a;const l=null===(i=n.extensions)||void 0===i?void 0:i.classification;var o,d;"string"===typeof l&&Ec.includes(l)&&(null!==(t=n.extensions)&&void 0!==t&&t.reason?e(null===(o=n.extensions)||void 0===o?void 0:o.reason):null!==(a=n.extensions)&&void 0!==a&&a.type&&e(null===(d=n.extensions)||void 0===d?void 0:d.type))}))}),[e])})(),{kidSubProfileOttId:s}=(0,Xl.j)(),{data:m,loading:c}=(0,j.a)($.R,{variables:{contentId:o,prerollsSupported:d,isKidSubProfile:Boolean(s)},fetchPolicy:"network-only",nextFetchPolicy:"cache-only",errorPolicy:"all",skip:!o,context:{headers:Lc.j},onError:r}),u=null===m||void 0===m||null===(n=m.content)||void 0===n?void 0:n.__typename,k=Vc(o,u),v=(0,t.useCallback)((()=>{null===a||void 0===a||a(),k()}),[a,k]),p=Uc(m);return(0,w.jsx)(wc,Hc(Hc({},l),{},{onClose:v,contentId:o,contentType:u,isLoading:c,isParentalControlEnabled:p}))};var qc=i(96941);const Gc={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ChildLockPlayerBaseInfo"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"userProfile"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ChildLockPlayerKidSubProfile"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"ChildLockPlayerKidSubProfile"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"UserKidSubProfile"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"ottId"}},{kind:"Field",name:{kind:"Name",value:"puid"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"restrictions"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"parentalControlVideo"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"streamUrl"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"parentalControlEnabled"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}}]};var Kc=i(82025),Yc=i.n(Kc);const Jc=["isLoading"];function Xc(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}function $c(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?Xc(Object(i),!0).forEach((function(n){(0,J.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Xc(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}const Qc=e=>{let{isLoading:n}=e,i=(0,X.Z)(e,Jc);return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(ne.J5,$c({},i)),n&&(0,w.jsx)("div",{className:Yc().loader,"data-tid":"MovieTrailerPlayer",children:(0,w.jsx)(cl.$,{size:nl.E.BIG})})]})};var eu=i(78984),nu=i(26184);function iu(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}function tu(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?iu(Object(i),!0).forEach((function(n){(0,J.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):iu(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}const au=(0,Gr.f)({startMarks:[ee.c.TRAILER_FIRST_IMPRESSION],endMarks:[ee.c.TRAILER_FIRST_IMPRESSION,ee.c.TRAILER_START_DELAY]})((e=>{let{contentId:n,onInitStart:i,onStart:t,onFinish:a,onClose:l,onError:o,startPosition:d}=e;const{loading:r}=(0,j.a)(rc,{variables:{contentId:n},fetchPolicy:"network-only",nextFetchPolicy:"cache-only",errorPolicy:"all",skip:!n,context:{headers:Lc.j}}),s=(e=>{var n;let{contentId:i,startPosition:t=0}=e;const a=(0,em.K)(),l=(0,ac.x)(),{data:o}=(0,j.a)(rc,{variables:{contentId:i},fetchPolicy:"cache-only",errorPolicy:"all",skip:!i});let d=[];null!==o&&void 0!==o&&null!==(n=o.ottTrailer)&&void 0!==n&&n.streams&&(d=o.ottTrailer.streams.reduce(((e,n)=>{var i,t;return n&&e.push({url:n.uri,audio:(0,eu.y)(null===n||void 0===n||null===(i=n.streamMeta)||void 0===i?void 0:i.audioMetas),subtitles:(0,nu.G)(null===n||void 0===n||null===(t=n.streamMeta)||void 0===t?void 0:t.subtitleMetas)}),e}),[]));const r={source:{streams:d,userPreferences:{preferredTracks:a},id:i,additionalParams:tu(tu({},l),{},{from_block:ne.wi.Trailer,stream_block:ne.uH.Trailer}),startPosition:(0,Br.g)()||t}};return(0,tc.m)({config:r})})({contentId:null!==n&&void 0!==n?n:"",startPosition:d});return(0,qr.c)(((e,n)=>{const i=sc(e);return n?Array(1):null===i||void 0===i?void 0:i.streams})(n,r)),r||!(e=>e.source.streams.length>=1)(s)?null:(0,w.jsx)(Qc,{onError:o,onStart:t,onFinish:a,onClose:l,contentId:n,onBeforeInit:i,isLoading:r,playerConfig:s,renderPlayer:e=>{let{contentId:n,onStartCallback:i,handleError:t,handleFinish:a,psid:l,onClose:o}=e;return(0,w.jsx)(bc,{contentId:n,playerConfig:s,onContentImpression:i,onFinish:a,onError:t,onClose:o,psid:l})}})})),lu=e=>{let{contentId:n,onClose:i,onError:t,isParentalControlEnabled:a}=e;return a?(0,w.jsx)(Oc,{onTrailerEnd:i,isCover:!1,onClose:i}):(0,w.jsx)(au,{contentId:n,onFinish:i,onClose:i,onError:t})};function ou(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}function du(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?ou(Object(i),!0).forEach((function(n){(0,J.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ou(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}const ru=e=>{let n=Object.assign({},e);const i=(()=>{const e=(0,V.o)(),n=(0,qc.H)(e),{data:i}=(0,j.a)(Gc,{fetchPolicy:"network-only",skip:!n});return Uc(i)})(),{defaultPlayerError:t}=(0,Q.E)(),a=(0,xc.GJ)();return(0,w.jsx)(lu,du(du({},n),{},{isParentalControlEnabled:i,onError:()=>a(t)}))};var su=i(51606),mu=i(20098),cu=i(58764);const uu={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"MovieSeoInfo"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Movie"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"title"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"localized"}},{kind:"Field",name:{kind:"Name",value:"original"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"shortDescription"}},{kind:"Field",name:{kind:"Name",value:"synopsis"}},{kind:"Field",name:{kind:"Name",value:"genres"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"slug"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"countries"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"viewOption"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"isAvailableOnline"},name:{kind:"Name",value:"isWatchable"},arguments:[{kind:"Argument",name:{kind:"Name",value:"filter"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"anyDevice"},value:{kind:"BooleanValue",value:!1}},{kind:"ObjectField",name:{kind:"Name",value:"anyRegion"},value:{kind:"BooleanValue",value:!1}}]}}]},{kind:"Field",name:{kind:"Name",value:"availabilityAnnounce"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",alias:{kind:"Name",value:"watchabilityCount"},name:{kind:"Name",value:"watchability"},arguments:[{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"IntValue",value:"0"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"total"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"ott"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"preview"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"features"},arguments:[{kind:"Argument",name:{kind:"Name",value:"filter"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"layout"},value:{kind:"EnumValue",value:"OTT_TITLE_CARD"}},{kind:"ObjectField",name:{kind:"Name",value:"onlyClientSupported"},value:{kind:"BooleanValue",value:!0}}]}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"alias"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"VideoInterface"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"duration"}},{kind:"Field",alias:{kind:"Name",value:"kpProductionYear"},name:{kind:"Name",value:"productionYear"},arguments:[{kind:"Argument",name:{kind:"Name",value:"override"},value:{kind:"EnumValue",value:"DISABLED"}}]},{kind:"Field",alias:{kind:"Name",value:"ottProductionYear"},name:{kind:"Name",value:"productionYear"},arguments:[{kind:"Argument",name:{kind:"Name",value:"override"},value:{kind:"EnumValue",value:"OTT_WHEN_EXISTS"}}]},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Series"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"releaseYears"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"start"}},{kind:"Field",name:{kind:"Name",value:"end"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",alias:{kind:"Name",value:"seasonsAll"},name:{kind:"Name",value:"seasons"},arguments:[{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"IntValue",value:"0"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"total"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",alias:{kind:"Name",value:"seasonsOnline"},name:{kind:"Name",value:"seasons"},arguments:[{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"IntValue",value:"0"}},{kind:"Argument",name:{kind:"Name",value:"isOnlyOnline"},value:{kind:"BooleanValue",value:!0}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"total"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}}]};var ku=i(54765);const vu=e=>{let{contentId:n}=e;const i=function(e){const{data:n}=(0,pi.J)({from:(0,Oe.wY)(e),fragment:uu,fragmentName:"MovieSeoInfo"});return(0,ku.L)({movie:n})}(n),t=function(e){const{data:n,complete:i}=(0,pi.J)({from:(0,Oe.wY)(e),fragment:cu.O,fragmentName:"MovieTitle"});return i?(0,A.o)(null===n||void 0===n?void 0:n.title):""}(n),a=i||(0,mu.T)(t);return(0,w.jsx)(su.o,{title:a})},pu=()=>{const{query:e}=(0,l.useRouter)(),n=e[ti.cG.REDIRECT_TO_FILM_PAGE];return ti.cG.WATCH in e&&n?(0,w.jsx)(vu,{contentId:String(n)}):null},Nu=async e=>{try{const e=new Map,n=await(async e=>{const n=await fetch(e),i=await n.text();return JSON.parse(i).jobs})("https://strm.yandex.ru/probe/jobs?count=5&size=102400"),i=new PerformanceObserver((t=>{n.forEach((n=>{const i=t.getEntriesByName(n);i.length>0&&i[0]&&e.set(n,i[0])})),5===e.size&&((async(e,n)=>{const i=Array.from(e.values());await fetch(n,{method:"POST",body:JSON.stringify(i)})})(e,"https://strm.yandex.ru/perf"),i.disconnect())}));i.observe({entryTypes:["resource"]}),await(async e=>Promise.all(e.map((async e=>{const n=await fetch(e);await n.arrayBuffer()}))))(n)}catch(n){n instanceof Error&&(null===e||void 0===e||e(n))}},yu=()=>{((e,n)=>{const i=(0,t.useRef)(null);(0,t.useEffect)((()=>{null===i.current&&(i.current=setTimeout((()=>Nu(n)),e))}),[e,n])})(6e4,(0,t.useCallback)((e=>{zn.H({message:`Cdn checker failed: ${e.message}`},e)}),[]))},Su=()=>(yu(),null),fu=()=>(0,w.jsx)(Su,{}),gu=e=>{const n=(0,t.useRef)(null),i=(0,t.useCallback)((()=>{Boolean(document.fullscreenElement||document.webkitFullscreenElement)?"exitFullscreen"in document?document.exitFullscreen():"webkitExitFullscreen"in document&&document.webkitExitFullscreen():n.current&&function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.documentElement;if("requestFullscreen"in e)e.requestFullscreen().catch(f.Z);else if("webkitRequestFullscreen"in e)try{e.webkitRequestFullscreen()}catch(n){}}(n.current)}),[n]);return{toggleFullscreen:i,fullscreenRef:(0,t.useCallback)((i=>{i&&(n.current=i,e(i))}),[e])}};var bu=i(52148),_u=i.n(bu);let Fu;!function(e){e.PLAYER_CLOSED="player-closed"}(Fu||(Fu={}));var hu=i(42976);const Ou=r().bind(_u()),ju={allowMuted:(0,p.tq)()},Cu=e=>{let{playingContentId:n,onCloseContentPlayer:i,contentType:t,isErrorShown:a}=e;return!a&&n?(0,w.jsx)("div",{className:Ou("player-wrapper"),"data-tid":"ContentPlayerBody",children:t===ri.Z.TRAILER?(0,w.jsx)(ru,{contentId:n,autoplay:ju,onClose:i}):(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(zc,{contentId:n,autoplay:ju,onClose:i}),(0,w.jsx)(pu,{})]})}):null},Tu=e=>{const{playingContentId:n,contentType:i,stopContent:a,children:l}=e,o=Boolean(n),d=v(o),{toggleFullscreen:r,fullscreenRef:s}=gu(d),u=(0,t.useCallback)((()=>{(0,N.$)()&&window.parent.postMessage({action:Fu.PLAYER_CLOSED},"*"),n&&a(n)}),[n]),k=(0,t.useMemo)((()=>({toggleFullscreen:r})),[r]),p=(e=>{const n=(0,xc.GJ)(),i=(0,xc.ss)(),{name:a}=(0,xc.IG)(),l=(0,t.useRef)(null),o=zn.xu(),{defaultPlayerError:d}=(0,Q.E)();return(0,t.useEffect)((()=>{i({onErrorClose:e,sessionId:o})}),[i,e,o]),(0,t.useEffect)((()=>{d&&null===l.current&&(l.current=!0,n(d,{}))}),[d,n]),null!==a})(u),y=(0,c.Z)();return(0,w.jsxs)(hu.H.Provider,{value:k,children:[(0,w.jsxs)("div",{className:Ou("root"),"data-tid":"PlayerManager",children:[(0,w.jsx)("div",{className:Ou("browser-view-player","browser-view-player_seamless-container")}),(0,w.jsx)(m(),{isOpen:o,className:Ou("root"),bodyOpenClassName:Ou("player-manager-body"),overlayClassName:Ou("overlay"),shouldCloseOnEsc:!1,contentLabel:y.formatMessage({id:"features.player-manager.0432bb2a6b7bdcc54c67b8fa3664e625"}),children:(0,w.jsx)("div",{className:Ou("browser-view-player","browser-view-player_active"),role:"presentation",ref:s,children:(0,w.jsx)(Cu,{playingContentId:n,onCloseContentPlayer:u,contentType:i,isErrorShown:p})})})]}),(0,w.jsx)(Y,{}),(0,w.jsx)(fu,{}),l]})};var Iu=i(54522),Pu=i(70655);const wu=e=>{let{children:n}=e;const i=(0,l.useRouter)(),a=(0,Lr.Z)(),d=(0,Ur.e)(),r=(0,t.useCallback)((()=>{Vr(),Hr(),(0,zr.R)(),(0,Wr.j)({router:i,queryParams:[ti.cG.OPENED_CHANNEL_ID]})}),[i]);return(()=>{const e=(0,l.useRouter)(),n=(0,t.useRef)(e.asPath);(0,t.useEffect)((()=>{const e=e=>{const i=(0,Lr.N)(),[t="",a]=n.current.split("?"),[l="",o]=e.split("?");if(n.current=e,(0,Pu.u)(l)!==(0,Pu.u)(t))return;const d=a?Iu.parse(a):{},r=o?Iu.parse(o):{},s=ti.cG.WATCH in r;if(ti.cG.WATCH in d&&!s&&Boolean(i)&&"string"===typeof i)return Vr(),Hr(),void(0,zr.R)();const m=r[ti.cG.REDIRECT_TO_FILM_PAGE];s&&!i&&Boolean(m)&&"string"===typeof m&&((0,si.K)(m,ri.Z.FILM),(0,mi.s)({}))};return o().events.on("routeChangeComplete",e),()=>{o().events.off("routeChangeComplete",e)}}),[])})(),(()=>{const e=(0,l.useRouter)(),n=(0,t.useRef)(e.asPath);(0,t.useEffect)((()=>{const e=e=>{const i=(0,Lr.N)(),[t=""]=n.current.split("?"),[a=""]=e.split("?");n.current=e,(0,Pu.u)(a)!==(0,Pu.u)(t)&&i&&(Vr(),Hr(),(0,zr.R)())};return o().events.on("routeChangeStart",e),()=>{o().events.off("routeChangeStart",e)}}),[])})(),(0,w.jsx)(Tu,{contentType:d,playingContentId:a,stopContent:r,children:n})}},87609:function(e,n,i){"use strict";i.d(n,{T:function(){return a}});var t=i(34778);const a=()=>window.screen.availWidth>window.screen.availHeight?t.i5.Horizontal:t.i5.Vertical},75279:function(e,n,i){"use strict";i.d(n,{F:function(){return r}});var t=i(9246),a=i.n(t),l=i(24821),o=i.n(l),d=i(47934);const r=e=>{let{children:n,className:i,fixedHeight:t=!0}=e;return(0,d.jsx)("div",{className:a()(o().root,i,{[o().fixedHeight]:t}),"data-tid":"Toast",children:n})}},53774:function(e){e.exports={channel:"styles_channel__m7DJ9","channel-name":"styles_channel-name__l_1sV",title:"styles_title__hXwc_",title_long:"styles_title_long__8h8HI",bottomControls:"styles_bottomControls__Vr9o9",meta:"styles_meta__TW7_r",description:"styles_description___b9ni",description_pending:"styles_description_pending__5jPvS"}},38958:function(e){e.exports={root:"styles_root__B2_xV",meta:"styles_meta___RG5z",rootPanel:"styles_rootPanel__CSrf_",timeline:"styles_timeline__zjm3j",hidden:"styles_hidden__9Soqf",controls:"styles_controls__7J8qs",rightControls:"styles_rightControls___kz0i",leftControls:"styles_leftControls__d7NLY"}},2812:function(e){e.exports={layout:"styles_layout__oUVnb",closeButton:"styles_closeButton__bhS_m",bottomControls:"styles_bottomControls__PwVnM",playButton:"styles_playButton__SVD6X"}},84469:function(e){e.exports={root:"styles_root__v3vOQ",skin:"styles_skin__pMvft"}},50954:function(e){e.exports={root:"styles_root__TWWRu",withActiveActor:"styles_withActiveActor__LbuS4",compactCardsLayout:"styles_compactCardsLayout__S3PLt",compactCardsBlock:"styles_compactCardsBlock__OzGRf",cardsLabel:"styles_cardsLabel__95UV7",fullCard:"styles_fullCard__foNKV",boxes:"styles_boxes__ZbYmN",boxesInactive:"styles_boxesInactive__PCX2j",backButton:"styles_backButton__NwYgr"}},54069:function(e){e.exports={root:"GracePlayerCommunication_root__j9ggp",container:"GracePlayerCommunication_container__D99E9",text:"GracePlayerCommunication_text__HSwEU","primary-button":"GracePlayerCommunication_primary-button__cRBoj","secondary-button":"GracePlayerCommunication_secondary-button__eMapU"}},94830:function(e){e.exports={root:"styles_root___RIVr",timeline:"styles_timeline__sRKVD",hidden:"styles_hidden__3CQ4Y",controls:"styles_controls__jOmkA",rightControls:"styles_rightControls__QTO2u",leftControls:"styles_leftControls__lk4zM",forwardSeekButton:"styles_forwardSeekButton__5h7jY",backwardSeekButton:"styles_backwardSeekButton__yD8E4",volumeControl:"styles_volumeControl__LRqi6"}},82025:function(e){e.exports={loader:"styles_loader__o3BIy"}},95222:function(e){e.exports={wrapper:"styles_wrapper__M91TC",text:"styles_text__Qz9YD","music-deep-dive-logo":"styles_music-deep-dive-logo__c8JGX"}},52148:function(e){e.exports={root:"styles_root___Mrpg","browser-view-player":"styles_browser-view-player__yz1d7","browser-view-player_seamless-container":"styles_browser-view-player_seamless-container__6NpdQ","browser-view-player_active":"styles_browser-view-player_active__RqAnG",overlay:"styles_overlay___dOWY","player-manager-body":"styles_player-manager-body__LV__R","spinner-wrapper":"styles_spinner-wrapper__xz6Fz",fadeIn:"styles_fadeIn__77aJe","player-wrapper":"styles_player-wrapper__FPULj","player-wrapper_hidden":"styles_player-wrapper_hidden__qa73z"}},19569:function(e){e.exports={loader:"styles_loader__jMhcr"}},39933:function(e){e.exports={root:"styles_root__9vyi8",episodeNavigatorButton:"styles_episodeNavigatorButton__AH3N6"}},23741:function(e){e.exports={layout:"styles_layout__GVtRF",closeButton:"styles_closeButton__jlJJN",skipButtonGroup:"styles_skipButtonGroup__fuWnu",prerollView:"styles_prerollView__stAzi",controlPanelContainer:"styles_controlPanelContainer__D_Nf9",meta:"styles_meta__IeqQI",playButton:"styles_playButton__6IVUX",deepDive:"styles_deepDive__Cu1nz",toast:"styles_toast__TJxGU",graceCommunication:"styles_graceCommunication__zK3u2",ratingScreen:"styles_ratingScreen__BNUIo"}},10128:function(e){e.exports={root:"styles_root__PYVDF",hidden:"styles_hidden__7fUOZ",minimized:"styles_minimized__uZarQ",skin:"styles_skin__UcC7E",playerContainer:"styles_playerContainer__NMxQs",shiftedToLeft:"styles_shiftedToLeft__knyo9",shiftedToRight:"styles_shiftedToRight__btRlH"}},6696:function(e){e.exports={layout:"styles_layout__dSnpW",closeButton:"styles_closeButton__Z2aC2",skipButtonGroup:"styles_skipButtonGroup__OK8pq",controlPanelContainer:"styles_controlPanelContainer__c87nj",meta:"styles_meta__y0YUj",prerollView:"styles_prerollView__pnL0Z",playButton:"styles_playButton__V1zg0",deepDive:"styles_deepDive__bRm2L",toast:"styles_toast__KjBUd",graceCommunication:"styles_graceCommunication__HLCRf",ratingScreen:"styles_ratingScreen__1n4cu"}},10669:function(e){e.exports={root:"styles_root__1IBmi",hidden:"styles_hidden__Czm6l",minimized:"styles_minimized__NOVJ4",skin:"styles_skin___wK80",shiftedToLeft:"styles_shiftedToLeft__RrW_w",shiftedToRight:"styles_shiftedToRight__aTL_O"}},77225:function(e){e.exports={container:"styles_container__7hsyj",buttonGroup:"styles_buttonGroup__lMm6k"}},92339:function(e){e.exports={button:"styles_button__YuEIB",gray:"styles_gray__Qex5C",orange:"styles_orange__ztvz6",withIcon:"styles_withIcon__HBSoL",button_animated:"styles_button_animated__X5hfU",filling:"styles_filling__mg3nd"}},65072:function(e){e.exports={root:"styles_root__z7RK2"}},35499:function(e){e.exports={root:"styles_root__fmg8n",button:"styles_button__Ms90U",device:"styles_device__Dg9vP",description:"styles_description__yLVky",name:"styles_name__ImSI9",state:"styles_state__Im44y",icon:"styles_icon__5R5hV",spinner:"styles_spinner__BqDBM"}},93974:function(e){e.exports={root:"styles_root__7Xdpg",visible:"styles_visible__1O7Wa",subtitle:"styles_subtitle__4t4F9",subtitle_medium:"styles_subtitle_medium__eokP8",editorAnnotation:"styles_editorAnnotation__FgfK3",extraInfo:"styles_extraInfo___FGUV",logo:"styles_logo__tu1Iv",placeholder:"styles_placeholder__UsqWG","placeholder-vote":"styles_placeholder-vote__Ob35N","placeholder-watch-next":"styles_placeholder-watch-next__lqvOH",image:"styles_image__jU3o9",image_horizontal:"styles_image_horizontal__kMLDl",image_vertical:"styles_image_vertical__GIT8g",image_loading:"styles_image_loading__3enb_","image_watch-next-trailer-compilation":"styles_image_watch-next-trailer-compilation__WAQqZ","image_watch-next-cover":"styles_image_watch-next-cover__SsA0_"}},31877:function(e){e.exports={wrapper:"styles_wrapper__4nJmB",text:"styles_text__PT1YW","music-deep-dive-logo":"styles_music-deep-dive-logo__mJ_2T"}},45802:function(e){e.exports={root:"styles_root__Q_lTv"}},52028:function(e){e.exports={icon:"styles_icon__ftDXQ"}},67957:function(e){e.exports={root:"styles_root___v80G",button:"styles_button__Z1Jox",icon:"styles_icon__SxqDi"}},54928:function(e){e.exports={root:"styles_root__UFWah",settingsIcon:"styles_settingsIcon__Hc6_0"}},45884:function(e){e.exports={root:"styles_root__EJmtl",root_loading:"styles_root_loading__12vGp",root_result:"styles_root_result__QE0TA",result:"styles_result__fSzdV",spinner:"styles_spinner__jR8Hb",header:"styles_header__Zt4m6",devices:"styles_devices__5KWNi",retry:"styles_retry__laNU8","retry-icon":"styles_retry-icon__Jbc7d","result-message":"styles_result-message__4SO4G","result-button":"styles_result-button__d_Yit"}},78597:function(e){e.exports={root:"styles_root__SH_wx",preview:"styles_preview__lAH9G",time:"styles_time__7HjnU"}},41601:function(e){e.exports={wrapper:"styles_wrapper__yX3Gz",text:"styles_text__uFvPV",image:"styles_image__29gs7"}},21171:function(e){e.exports={root:"styles_root__iWZmR",indicator:"styles_indicator__ew_gf",showAndHide:"styles_showAndHide__CN0i9",play:"styles_play__hQsvM",pause:"styles_pause__s9CAh",seekInterval:"styles_seekInterval___WmkJ",seekForward:"styles_seekForward__vugAu",seekBackward:"styles_seekBackward__phmGB"}},62742:function(e){e.exports={"user-picked-rating":"styles_user-picked-rating__HeMPR",modal:"styles_modal__JLxtd",spacer:"styles_spacer__1oXdQ","spacer-bottom":"styles_spacer-bottom__qvu_o","rating-badge":"styles_rating-badge__TdDdY",negative:"styles_negative__kKSiS",positive:"styles_positive__eSJMH",animate:"styles_animate__QbfbH",bounceIn:"styles_bounceIn__EK7J_","star-icon":"styles_star-icon__6kGiq","user-rating":"styles_user-rating__jw93i","remove-rating-button":"styles_remove-rating-button___q2BJ",fadeIn:"styles_fadeIn__47_mp"}},40123:function(e){e.exports={"post-credit-rating":"styles_post-credit-rating__EegY8"}},89485:function(e){e.exports={"user-rating-vote":"styles_user-rating-vote__tu8Mt",negative:"styles_negative__sTTMQ",positive:"styles_positive__APbc7",neutral:"styles_neutral__U9dxm",star:"styles_star__QRyD3",hovered:"styles_hovered__ZJU_P","user-rating-mark":"styles_user-rating-mark__jkwgf","user-rating-hint":"styles_user-rating-hint__VjQeo","watch-next-rating":"styles_watch-next-rating__AR2Hc","rating-vote-text":"styles_rating-vote-text__zqzXg","user-rating-title":"styles_user-rating-title__6WaTr","user-rating-controls":"styles_user-rating-controls__OYFIo",modal:"styles_modal__lKYrQ","stars-set":"styles_stars-set__0PO0P"}},72136:function(e){e.exports={closeButton:"styles_closeButton__JVWs_",controlPanelContainer:"styles_controlPanelContainer__c4S38"}},73447:function(e){e.exports={root:"styles_root__z6HML",skin:"styles_skin__JZgPy"}},15581:function(e){e.exports={body:"styles_body__K59Oi",meta:"styles_meta__0Ob5c","rating-container":"styles_rating-container__KTV7j"}},23131:function(e){e.exports={root:"loader_root__aLEPP"}},24821:function(e){e.exports={root:"style_root__9BwZt",fixedHeight:"style_fixedHeight__ZUeLQ"}}}]);
//# sourceMappingURL=https://kinopoisk-frontend-internal.s3.mds.yandex.net/hd-www/release/_next/static/chunks/2818-4735c5f5f3cccece.js.map